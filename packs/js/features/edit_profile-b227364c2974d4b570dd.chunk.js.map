{"version":3,"file":"packs/js/features/edit_profile-b227364c2974d4b570dd.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/edit-profile/components/profile-preview.tsx","webpack://soapbox/./app/soapbox/features/edit-profile/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import StillImage from'soapbox/components/still-image';import{Avatar,HStack,Stack,Text}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification-badge';import{useSoapboxConfig}from'soapbox/hooks';/** Displays a preview of the user's account, including avatar, banner, etc. */var ProfilePreview=function ProfilePreview(_ref){var account=_ref.account;var _useSoapboxConfig=useSoapboxConfig(),displayFqn=_useSoapboxConfig.displayFqn;return/*#__PURE__*/_jsx(\"div\",{className:\"dark:sm:shadow-inset overflow-hidden rounded-lg bg-white text-black dark:bg-gray-800 dark:text-white sm:shadow\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative isolate h-32 w-full overflow-hidden bg-gray-200 dark:bg-gray-900/50 md:rounded-t-lg\"},void 0,/*#__PURE__*/_jsx(StillImage,{src:account.header})),/*#__PURE__*/_jsx(HStack,{space:3,alignItems:\"center\",className:\"p-3\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative\"},void 0,/*#__PURE__*/_jsx(Avatar,{className:\"bg-gray-400\",src:account.avatar}),account.verified&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1.5 -right-1.5\"},void 0,/*#__PURE__*/_jsx(VerificationBadge,{}))),/*#__PURE__*/_jsx(Stack,{className:\"truncate\"},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\",size:\"sm\",truncate:true,dangerouslySetInnerHTML:{__html:account.display_name_html}}),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,\"@\",displayFqn?account.fqn:account.acct))));};export default ProfilePreview;","import\"core-js/modules/es.object.keys.js\";import\"core-js/modules/es.symbol.js\";import\"core-js/modules/es.array.filter.js\";import\"core-js/modules/es.object.get-own-property-descriptor.js\";import\"core-js/modules/web.dom-collections.for-each.js\";import\"core-js/modules/es.object.get-own-property-descriptors.js\";import\"core-js/modules/es.object.define-properties.js\";import\"core-js/modules/es.object.define-property.js\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array.iterator.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.promise.js\";import\"core-js/modules/es.string.iterator.js\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.array.concat.js\";import\"core-js/modules/es.array.splice.js\";import\"core-js/modules/web.url.js\";import\"core-js/modules/web.url-search-params.js\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import{List as ImmutableList}from'immutable';import React,{useState,useEffect,useMemo}from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import{updateNotificationSettings}from'soapbox/actions/accounts';import{patchMe}from'soapbox/actions/me';import BirthdayInput from'soapbox/components/birthday-input';import List,{ListItem}from'soapbox/components/list';import{Button,Column,FileInput,Form,FormActions,FormGroup,HStack,Input,Streamfield,Textarea,Toggle}from'soapbox/components/ui';import{useAppDispatch,useOwnAccount,useFeatures,useInstance}from'soapbox/hooks';import{normalizeAccount}from'soapbox/normalizers';import toast from'soapbox/toast';import resizeImage from'soapbox/utils/resize-image';import ProfilePreview from'./components/profile-preview';/**\n * Whether the user is hiding their follows and/or followers.\n * Pleroma's config is granular, but we simplify it into one setting.\n */var hidesNetwork=function hidesNetwork(account){var _account$pleroma$toJS=account.pleroma.toJS(),hide_followers=_account$pleroma$toJS.hide_followers,hide_follows=_account$pleroma$toJS.hide_follows,hide_followers_count=_account$pleroma$toJS.hide_followers_count,hide_follows_count=_account$pleroma$toJS.hide_follows_count;return Boolean(hide_followers&&hide_follows&&hide_followers_count&&hide_follows_count);};var messages=defineMessages({heading:{\"id\":\"column.edit_profile\",\"defaultMessage\":\"Edit profile\"},header:{\"id\":\"edit_profile.header\",\"defaultMessage\":\"Edit Profile\"},metaFieldLabel:{\"id\":\"edit_profile.fields.meta_fields.label_placeholder\",\"defaultMessage\":\"Label\"},metaFieldContent:{\"id\":\"edit_profile.fields.meta_fields.content_placeholder\",\"defaultMessage\":\"Content\"},success:{\"id\":\"edit_profile.success\",\"defaultMessage\":\"Profile saved!\"},error:{\"id\":\"edit_profile.error\",\"defaultMessage\":\"Profile update failed\"},bioPlaceholder:{\"id\":\"edit_profile.fields.bio_placeholder\",\"defaultMessage\":\"Tell us about yourself.\"},displayNamePlaceholder:{\"id\":\"edit_profile.fields.display_name_placeholder\",\"defaultMessage\":\"Name\"},websitePlaceholder:{\"id\":\"edit_profile.fields.website_placeholder\",\"defaultMessage\":\"Display a Link\"},locationPlaceholder:{\"id\":\"edit_profile.fields.location_placeholder\",\"defaultMessage\":\"Location\"},cancel:{\"id\":\"common.cancel\",\"defaultMessage\":\"Cancel\"}});/**\n * Profile metadata `name` and `value`.\n * (By default, max 4 fields and 255 characters per property/value)\n */ /** Convert an account into an update_credentials request object. */var accountToCredentials=function accountToCredentials(account){var hideNetwork=hidesNetwork(account);return{discoverable:account.discoverable,bot:account.bot,display_name:account.display_name,note:account.source.get('note'),locked:account.locked,fields_attributes:_toConsumableArray(account.source.get('fields',ImmutableList()).toJS()),stranger_notifications:account.getIn(['pleroma','notification_settings','block_from_strangers'])===true,accepts_email_list:account.getIn(['pleroma','accepts_email_list'])===true,hide_followers:hideNetwork,hide_follows:hideNetwork,hide_followers_count:hideNetwork,hide_follows_count:hideNetwork,website:account.website,location:account.location,birthday:account.birthday};};var ProfileField=function ProfileField(_ref){var value=_ref.value,onChange=_ref.onChange;var intl=useIntl();var handleChange=function handleChange(key){return function(e){onChange(_objectSpread(_objectSpread({},value),{},_defineProperty({},key,e.currentTarget.value)));};};return/*#__PURE__*/_jsx(HStack,{space:2,grow:true},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",outerClassName:\"w-2/5 grow\",value:value.name,onChange:handleChange('name'),placeholder:intl.formatMessage(messages.metaFieldLabel)}),/*#__PURE__*/_jsx(Input,{type:\"text\",outerClassName:\"w-3/5 grow\",value:value.value,onChange:handleChange('value'),placeholder:intl.formatMessage(messages.metaFieldContent)}));};/** Edit profile page. */var EditProfile=function EditProfile(){var intl=useIntl();var dispatch=useAppDispatch();var instance=useInstance();var account=useOwnAccount();var features=useFeatures();var maxFields=instance.pleroma.getIn(['metadata','fields_limits','max_fields'],4);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),muteStrangers=_useState6[0],setMuteStrangers=_useState6[1];useEffect(function(){if(account){var credentials=accountToCredentials(account);var strangerNotifications=account.getIn(['pleroma','notification_settings','block_from_strangers'])===true;setData(credentials);setMuteStrangers(strangerNotifications);}},[account===null||account===void 0?void 0:account.id]);/** Set a single key in the request data. */var updateData=function updateData(key,value){setData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},key,value));});};var handleSubmit=function handleSubmit(event){var _params$fields_attrib;var promises=[];var params=_objectSpread({},data);if(((_params$fields_attrib=params.fields_attributes)===null||_params$fields_attrib===void 0?void 0:_params$fields_attrib.length)===0)params.fields_attributes=[{name:'',value:''}];promises.push(dispatch(patchMe(params,true)));if(features.muteStrangers){promises.push(dispatch(updateNotificationSettings({block_from_strangers:muteStrangers})).catch(console.error));}setLoading(true);Promise.all(promises).then(function(){setLoading(false);toast.success(intl.formatMessage(messages.success));}).catch(function(){setLoading(false);toast.error(intl.formatMessage(messages.error));});event.preventDefault();};var handleCheckboxChange=function handleCheckboxChange(key){return function(e){updateData(key,e.target.checked);};};var handleTextChange=function handleTextChange(key){return function(e){updateData(key,e.target.value);};};var handleBirthdayChange=function handleBirthdayChange(date){updateData('birthday',date);};var handleHideNetworkChange=function handleHideNetworkChange(e){var hide=e.target.checked;setData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{hide_followers:hide,hide_follows:hide,hide_followers_count:hide,hide_follows_count:hide});});};var handleFileChange=function handleFileChange(name,maxPixels){return function(e){var _e$target$files;var f=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files.item(0);if(!f)return;resizeImage(f,maxPixels).then(function(file){updateData(name,file);}).catch(console.error);};};var handleFieldsChange=function handleFieldsChange(fields){updateData('fields_attributes',fields);};var handleAddField=function handleAddField(){var oldFields=data.fields_attributes||[];var fields=[].concat(_toConsumableArray(oldFields),[{name:'',value:''}]);updateData('fields_attributes',fields);};var handleRemoveField=function handleRemoveField(i){var oldFields=data.fields_attributes||[];var fields=_toConsumableArray(oldFields);fields.splice(i,1);updateData('fields_attributes',fields);};/** Memoized avatar preview URL. */var avatarUrl=useMemo(function(){return data.avatar?URL.createObjectURL(data.avatar):account===null||account===void 0?void 0:account.avatar;},[data.avatar,account===null||account===void 0?void 0:account.avatar]);/** Memoized header preview URL. */var headerUrl=useMemo(function(){return data.header?URL.createObjectURL(data.header):account===null||account===void 0?void 0:account.header;},[data.header,account===null||account===void 0?void 0:account.header]);/** Preview account data. */var previewAccount=useMemo(function(){return normalizeAccount(_objectSpread(_objectSpread(_objectSpread({},account===null||account===void 0?void 0:account.toJS()),data),{},{avatar:avatarUrl,header:headerUrl}));},[account===null||account===void 0?void 0:account.id,data.display_name,avatarUrl,headerUrl]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.header)},void 0,/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 md:grid-cols-2\"},void 0,/*#__PURE__*/_jsx(ProfilePreview,{account:previewAccount}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\"},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.header_label\",defaultMessage:\"Choose Background Picture\"}),hintText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.header\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'1920x1080px'}})},void 0,/*#__PURE__*/_jsx(FileInput,{onChange:handleFileChange('header',1920*1080)})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.avatar_label\",defaultMessage:\"Choose Profile Picture\"}),hintText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.avatar\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'400x400px'}})},void 0,/*#__PURE__*/_jsx(FileInput,{onChange:handleFileChange('avatar',400*400)})))),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.display_name_label\",defaultMessage:\"Display name\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.display_name,onChange:handleTextChange('display_name'),placeholder:intl.formatMessage(messages.displayNamePlaceholder)})),features.birthdays&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.birthday_label\",defaultMessage:\"Birthday\"})},void 0,/*#__PURE__*/_jsx(BirthdayInput,{value:data.birthday,onChange:handleBirthdayChange})),features.accountLocation&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.location_label\",defaultMessage:\"Location\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.location,onChange:handleTextChange('location'),placeholder:intl.formatMessage(messages.locationPlaceholder)})),features.accountWebsite&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.website_label\",defaultMessage:\"Website\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.website,onChange:handleTextChange('website'),placeholder:intl.formatMessage(messages.websitePlaceholder)})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bio_label\",defaultMessage:\"Bio\"})},void 0,/*#__PURE__*/_jsx(Textarea,{value:data.note,onChange:handleTextChange('note'),autoComplete:\"off\",placeholder:intl.formatMessage(messages.bioPlaceholder)})),/*#__PURE__*/_jsx(List,{},void 0,features.followRequests&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.locked_label\",defaultMessage:\"Lock account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.locked\",defaultMessage:\"Requires you to manually approve followers\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.locked,onChange:handleCheckboxChange('locked')})),features.hideNetwork&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.hide_network_label\",defaultMessage:\"Hide network\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.hide_network\",defaultMessage:\"Who you follow and who follows you will not be shown on your profile\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:account?data.hide_followers&&data.hide_follows&&data.hide_followers_count&&data.hide_follows_count:false,onChange:handleHideNetworkChange})),features.bots&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bot_label\",defaultMessage:\"This is a bot account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.bot\",defaultMessage:\"This account mainly performs automated actions and might not be monitored\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.bot,onChange:handleCheckboxChange('bot')})),features.muteStrangers&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.stranger_notifications_label\",defaultMessage:\"Block notifications from strangers\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.stranger_notifications\",defaultMessage:\"Only show notifications from people you follow\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:muteStrangers,onChange:function onChange(e){return setMuteStrangers(e.target.checked);}})),features.profileDirectory&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.discoverable_label\",defaultMessage:\"Allow account discovery\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.discoverable\",defaultMessage:\"Display account in profile directory and allow indexing by external services\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.discoverable,onChange:handleCheckboxChange('discoverable')})),features.emailList&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.accepts_email_list_label\",defaultMessage:\"Subscribe to newsletter\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.accepts_email_list\",defaultMessage:\"Opt-in to news and marketing updates.\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.accepts_email_list,onChange:handleCheckboxChange('accepts_email_list')}))),features.profileFields&&/*#__PURE__*/_jsx(Streamfield,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.meta_fields_label\",defaultMessage:\"Profile fields\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.meta_fields\",defaultMessage:\"You can have up to {count, plural, one {# custom field} other {# custom fields}} displayed on your profile.\",values:{count:maxFields}}),values:data.fields_attributes||[],onChange:handleFieldsChange,onAddItem:handleAddField,onRemoveItem:handleRemoveField,component:ProfileField,maxItems:maxFields}),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{to:\"/settings\",theme:\"tertiary\"},void 0,intl.formatMessage(messages.cancel)),/*#__PURE__*/_jsx(Button,{theme:\"primary\",type:\"submit\",disabled:isLoading},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.save\",defaultMessage:\"Save\"})))));};export default EditProfile;"],"names":["_ref","account","displayFqn","className","src","header","space","alignItems","avatar","verified","weight","size","truncate","dangerouslySetInnerHTML","__html","display_name_html","theme","fqn","acct","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","messages","heading","metaFieldLabel","metaFieldContent","success","error","bioPlaceholder","displayNamePlaceholder","websitePlaceholder","locationPlaceholder","cancel","ProfileField","value","onChange","intl","useIntl","handleChange","e","currentTarget","grow","type","outerClassName","name","placeholder","formatMessage","dispatch","instance","features","maxFields","pleroma","getIn","_useState","useState","_useState2","isLoading","setLoading","_useState3","_useState4","data","setData","_useState5","_useState6","muteStrangers","setMuteStrangers","useEffect","credentials","hideNetwork","_account$pleroma$toJS","toJS","hide_followers","hide_follows","hide_followers_count","hide_follows_count","Boolean","hidesNetwork","discoverable","bot","display_name","note","get","locked","fields_attributes","stranger_notifications","accepts_email_list","website","location","birthday","accountToCredentials","strangerNotifications","id","updateData","prevData","handleCheckboxChange","checked","handleTextChange","handleFileChange","maxPixels","_e$target$files","f","files","item","then","file","catch","console","avatarUrl","useMemo","URL","createObjectURL","headerUrl","previewAccount","label","onSubmit","event","_params$fields_attrib","promises","params","block_from_strangers","Promise","all","toast","preventDefault","labelText","defaultMessage","hintText","values","birthdays","date","accountLocation","accountWebsite","autoComplete","followRequests","hint","hide","bots","profileDirectory","emailList","profileFields","count","fields","onAddItem","oldFields","concat","onRemoveItem","splice","component","maxItems","to","disabled"],"sourceRoot":""}