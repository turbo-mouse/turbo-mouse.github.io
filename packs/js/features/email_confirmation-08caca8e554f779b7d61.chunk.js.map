{"version":3,"file":"packs/js/features/email_confirmation-08caca8e554f779b7d61.chunk.js","mappings":"4PAAsxBA,EAA8B,UAA9BA,EAA6C,OAAYC,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,6BAA6B,eAAiB,oCAAwCC,EAAM,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,sBAIh2B,UAJ44B,WAA6B,IAAIC,GAAK,SAAcC,GAAS,UAAqBC,EAAgB,WAA3W,QAAyYC,GAAiB,OAAeD,EAAgB,GAAGE,EAAOD,EAAiB,GAAGE,EAAUF,EAAiB,GAIrwC,OAJwwC,aAAgB,WAAcT,GAAOO,GAAS,QAAoBP,IAAQY,MAAK,WAAWD,EAAUd,GAAkB,YAAcS,EAAKO,cAAcf,EAASC,SAAU,IAAGe,OAAM,SAASC,GAAgC,GAAzBJ,EAAUd,GAAkBkB,EAAMC,SAASC,KAAKF,MAAM,CAAC,IAAIG,GAAQ,IAAAC,GAAkBJ,EAAMC,SAASC,KAAKF,OAAO,UAAYG,E,CAItlD,GAAI,GAAE,CAAClB,IAAYA,GAAOU,IAASb,GAAkBa,IAASb,GAA8E,OAAK,KAAQ,CAAC,IAA1D,OAAK,KAAS,CAACuB,GAAG,KAA2C,C","sources":["webpack://soapbox/./app/soapbox/features/email-confirmation/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.iterator.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.string.iterator.js\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url-search-params.js\";import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.search.js\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{Redirect}from'react-router-dom';import{confirmChangedEmail}from'soapbox/actions/security';import{Spinner}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';import toast from'soapbox/toast';import{buildErrorMessage}from'soapbox/utils/errors';var Statuses={IDLE:'IDLE',SUCCESS:'SUCCESS',FAIL:'FAIL'};var messages=defineMessages({success:{\"id\":\"email_confirmation.success\",\"defaultMessage\":\"Your email has been confirmed!\"}});var token=new URLSearchParams(window.location.search).get('confirmation_token');var EmailConfirmation=function EmailConfirmation(){var intl=useIntl();var dispatch=useAppDispatch();var _React$useState=React.useState(Statuses.IDLE),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];React.useEffect(function(){if(token){dispatch(confirmChangedEmail(token)).then(function(){setStatus(Statuses.SUCCESS);toast.success(intl.formatMessage(messages.success));}).catch(function(error){setStatus(Statuses.FAIL);if(error.response.data.error){var message=buildErrorMessage(error.response.data.error);toast.error(message// intl.formatMessage({\n//   id: 'email_confirmation.fail',\n//   defaultMessage,\n// }),\n);}});}},[token]);if(!token||status===Statuses.SUCCESS||status===Statuses.FAIL){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(Spinner,{});};export default EmailConfirmation;"],"names":["Statuses","messages","success","token","URLSearchParams","window","location","search","get","intl","dispatch","_React$useState","_React$useState2","status","setStatus","then","formatMessage","catch","error","response","data","message","b","to"],"sourceRoot":""}