{"version":3,"file":"packs/js/features/scheduled_statuses-d4def4fd1aa129bf060f.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/scheduled-statuses/components/scheduled-status-action-bar.tsx","webpack://soapbox/./app/soapbox/features/scheduled-statuses/components/scheduled-status.tsx","webpack://soapbox/./app/soapbox/features/scheduled-statuses/builder.tsx","webpack://soapbox/./app/soapbox/features/scheduled-statuses/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{openModal}from'soapbox/actions/modals';import{cancelScheduledStatus}from'soapbox/actions/scheduled-statuses';import{getSettings}from'soapbox/actions/settings';import IconButton from'soapbox/components/icon-button';import{HStack}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';var messages=defineMessages({cancel:{\"id\":\"scheduled_status.cancel\",\"defaultMessage\":\"Cancel\"},deleteConfirm:{\"id\":\"confirmations.scheduled_status_delete.confirm\",\"defaultMessage\":\"Cancel\"},deleteHeading:{\"id\":\"confirmations.scheduled_status_delete.heading\",\"defaultMessage\":\"Cancel scheduled post\"},deleteMessage:{\"id\":\"confirmations.scheduled_status_delete.message\",\"defaultMessage\":\"Are you sure you want to cancel this scheduled post?\"}});var ScheduledStatusActionBar=function ScheduledStatusActionBar(_ref){var status=_ref.status;var intl=useIntl();var dispatch=useAppDispatch();var handleCancelClick=function handleCancelClick(){dispatch(function(_,getState){var deleteModal=getSettings(getState()).get('deleteModal');if(!deleteModal){dispatch(cancelScheduledStatus(status.id));}else{dispatch(openModal('CONFIRM',{icon:require('@tabler/icons/calendar-stats.svg'),heading:intl.formatMessage(messages.deleteHeading),message:intl.formatMessage(messages.deleteMessage),confirm:intl.formatMessage(messages.deleteConfirm),onConfirm:function onConfirm(){return dispatch(cancelScheduledStatus(status.id));}}));}});};return/*#__PURE__*/_jsx(HStack,{justifyContent:\"end\"},void 0,/*#__PURE__*/_jsx(IconButton,{title:intl.formatMessage(messages.cancel),text:intl.formatMessage(messages.cancel),src:require('@tabler/icons/x.svg'),onClick:handleCancelClick}));};export default ScheduledStatusActionBar;","import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"statusId\"];import clsx from'clsx';import React from'react';import Account from'soapbox/components/account';import AttachmentThumbs from'soapbox/components/attachment-thumbs';import StatusContent from'soapbox/components/status-content';import StatusReplyMentions from'soapbox/components/status-reply-mentions';import{HStack}from'soapbox/components/ui';import PollPreview from'soapbox/features/ui/components/poll-preview';import{useAppSelector}from'soapbox/hooks';import{buildStatus}from'../builder';import ScheduledStatusActionBar from'./scheduled-status-action-bar';var ScheduledStatus=function ScheduledStatus(_ref){var statusId=_ref.statusId,other=_objectWithoutProperties(_ref,_excluded);var status=useAppSelector(function(state){var scheduledStatus=state.scheduled_statuses.get(statusId);if(!scheduledStatus)return null;return buildStatus(state,scheduledStatus);});if(!status)return null;var account=status.account;return/*#__PURE__*/_jsx(\"div\",{className:clsx('status__wrapper',\"status__wrapper-\".concat(status.visibility),{'status__wrapper-reply':!!status.in_reply_to_id}),tabIndex:0},void 0,/*#__PURE__*/_jsx(\"div\",{className:clsx('status',\"status-\".concat(status.visibility),{'status-reply':!!status.in_reply_to_id}),\"data-id\":status.id},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(HStack,{justifyContent:\"between\",alignItems:\"start\"},void 0,/*#__PURE__*/_jsx(Account,{account:account,timestamp:status.created_at,futureTimestamp:true,hideActions:true},account.id))),/*#__PURE__*/_jsx(StatusReplyMentions,{status:status}),/*#__PURE__*/_jsx(StatusContent,{status:status,collapsable:true}),status.media_attachments.size>0&&/*#__PURE__*/_jsx(AttachmentThumbs,{media:status.media_attachments,sensitive:status.sensitive}),status.poll&&/*#__PURE__*/_jsx(PollPreview,{pollId:status.poll}),/*#__PURE__*/React.createElement(ScheduledStatusActionBar,_extends({status:status},other))));};export default ScheduledStatus;","import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.replace.js\";import\"core-js/modules/es.regexp.constructor.js\";import\"core-js/modules/es.regexp.dot-all.js\";import\"core-js/modules/es.regexp.sticky.js\";import\"core-js/modules/es.regexp.to-string.js\";import{Map as ImmutableMap}from'immutable';import{normalizeStatus}from'soapbox/normalizers/status';import{calculateStatus}from'soapbox/reducers/statuses';import{makeGetAccount}from'soapbox/selectors';export var buildStatus=function buildStatus(state,scheduledStatus){var getAccount=makeGetAccount();var me=state.me;var account=getAccount(state,me);var status=ImmutableMap({account:account,content:scheduledStatus.text.replace(new RegExp('\\n','g'),'<br>'),/* eslint-disable-line no-control-regex */created_at:scheduledStatus.scheduled_at,id:scheduledStatus.id,in_reply_to_id:scheduledStatus.in_reply_to_id,media_attachments:scheduledStatus.media_attachments,poll:scheduledStatus.poll,sensitive:scheduledStatus.sensitive,uri:\"/scheduled_statuses/\".concat(scheduledStatus.id),url:\"/scheduled_statuses/\".concat(scheduledStatus.id),visibility:scheduledStatus.visibility});return calculateStatus(normalizeStatus(status));};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.map.js\";import debounce from'lodash/debounce';import React,{useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchScheduledStatuses,expandScheduledStatuses}from'soapbox/actions/scheduled-statuses';import ScrollableList from'soapbox/components/scrollable-list';import{Column}from'soapbox/components/ui';import{useAppSelector,useAppDispatch}from'soapbox/hooks';import ScheduledStatus from'./components/scheduled-status';var messages=defineMessages({heading:{\"id\":\"column.scheduled_statuses\",\"defaultMessage\":\"Scheduled Posts\"}});var handleLoadMore=debounce(function(dispatch){dispatch(expandScheduledStatuses());},300,{leading:true});var ScheduledStatuses=function ScheduledStatuses(){var intl=useIntl();var dispatch=useAppDispatch();var statusIds=useAppSelector(function(state){return state.status_lists.get('scheduled_statuses').items;});var isLoading=useAppSelector(function(state){return state.status_lists.get('scheduled_statuses').isLoading;});var hasMore=useAppSelector(function(state){return!!state.status_lists.get('scheduled_statuses').next;});useEffect(function(){dispatch(fetchScheduledStatuses());},[]);var emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.scheduled_statuses\",defaultMessage:\"You don't have any scheduled statuses yet. When you add one, it will show up here.\"});return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"scheduled_statuses\",hasMore:hasMore,isLoading:typeof isLoading==='boolean'?isLoading:true,onLoadMore:function onLoadMore(){return handleLoadMore(dispatch);},emptyMessage:emptyMessage},void 0,statusIds.map(function(id){return/*#__PURE__*/_jsx(ScheduledStatus,{statusId:id},id);})));};export default ScheduledStatuses;"],"names":["messages","cancel","deleteConfirm","deleteHeading","deleteMessage","_ref","status","intl","useIntl","dispatch","justifyContent","title","formatMessage","text","src","onClick","_","getState","deleteModal","get","icon","heading","message","confirm","onConfirm","id","_excluded","statusId","other","state","scheduledStatus","scheduled_statuses","account","getAccount","me","content","replace","RegExp","created_at","scheduled_at","in_reply_to_id","media_attachments","poll","sensitive","uri","concat","url","visibility","buildStatus","className","tabIndex","alignItems","timestamp","futureTimestamp","hideActions","collapsable","size","media","pollId","handleLoadMore","leading","statusIds","status_lists","items","isLoading","hasMore","next","useEffect","emptyMessage","defaultMessage","label","scrollKey","onLoadMore","map"],"sourceRoot":""}