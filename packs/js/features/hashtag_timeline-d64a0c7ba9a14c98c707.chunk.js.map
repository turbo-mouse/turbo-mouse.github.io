{"version":3,"file":"packs/js/features/hashtag_timeline-d64a0c7ba9a14c98c707.chunk.js","mappings":"6RAAsyBA,GAAS,QAAe,CAACC,IAAI,CAAC,GAAK,qCAAqC,eAAiB,mBAAmBC,IAAI,CAAC,GAAK,qCAAqC,eAAiB,oBAAoBC,KAAK,CAAC,GAAK,sCAAsC,eAAiB,wBAAwBC,MAAM,CAAC,GAAK,uBAAuB,eAAiB,2CAAsDC,EAAgB,SAAyBC,GAAM,IAE1rCC,EAF8rCC,EAAOF,EAAKE,OAAWC,GAAK,SAAcC,GAAIF,aAA+B,EAAOA,EAAOE,KAAK,GAAOC,GAAMH,aAA+B,EAAOA,EAAOG,OAAO,CAACV,IAAI,GAAGC,IAAI,GAAGC,KAAK,IAAQS,GAAS,UAAqBC,GAAY,IAAAC,QAAO,IAEhjCC,EAAc,SAAuBC,GAAM,OAAGL,IAAOA,EAAKK,IAAO,IAAIC,OAAO,EAAUN,EAAKK,GAAME,KAAI,SAASC,GAAK,OAAOA,EAAIC,KAAM,IAAGC,KAAK,KAAiB,EAAI,EAAMC,EAAU,WAAqB,IAAIrB,EAAIU,EAAKV,IAAIiB,KAAI,SAASC,GAAK,OAAOA,EAAIC,KAAM,IAAOlB,EAAIS,EAAKT,IAAIgB,KAAI,SAASC,GAAK,OAAOA,EAAIC,KAAM,IAAOjB,EAAKQ,EAAKR,KAAKe,KAAI,SAASC,GAAK,OAAOA,EAAIC,KAAM,IAAG,CAACV,GAAIa,QAAO,OAAmBtB,IAAMiB,KAAI,SAASC,GAAKN,EAAYW,QAAQC,KAAKb,GAAS,QAAqBF,EAAGS,GAAI,SAASO,GAAQ,IAAIf,EAAKe,EAAOf,KAAKO,KAAI,SAASC,GAAK,OAAOA,EAAIQ,IAAK,IAAG,OAAOzB,EAAI0B,QAAO,SAAST,GAAK,OAAOR,EAAKkB,SAASV,EAAK,IAAGF,SAASf,EAAIe,QAAwE,IAAhEd,EAAKyB,QAAO,SAAST,GAAK,OAAOR,EAAKkB,SAASV,EAAK,IAAGF,MAAW,KAAK,GAAG,EAAMa,EAAY,WAAuBjB,EAAYW,QAAQN,KAAI,SAASa,GAAY,OAAOA,GAAa,IAAGlB,EAAYW,QAAQ,EAAG,EAAiY,OAA/Q,IAAAQ,YAAU,WAAuE,OAA5DV,IAAYV,GAAS,QAAsBF,EAAG,CAACC,KAAKA,KAAe,WAAWmB,GAAc,CAAE,GAAE,KAAI,IAAAE,YAAU,WAAWF,IAAcR,IAAYV,GAAS,QAAc,WAAWW,OAAOb,KAAME,GAAS,QAAsBF,EAAG,CAACC,KAAKA,IAAQ,GAAE,CAACD,KAAwB,OAAK,KAAO,CAACuB,OAA1mD1B,EAAM,CAAC,IAAIgB,OAAOb,IAAQK,EAAc,QAAQR,EAAMkB,KAAK,IAAIhB,EAAKyB,cAAclC,EAASC,IAAI,CAACkC,WAAWpB,EAAc,UAAcA,EAAc,QAAQR,EAAMkB,KAAK,IAAIhB,EAAKyB,cAAclC,EAASC,IAAI,CAACkC,WAAWpB,EAAc,UAAcA,EAAc,SAASR,EAAMkB,KAAK,IAAIhB,EAAKyB,cAAclC,EAASC,IAAI,CAACkC,WAAWpB,EAAc,WAAmBR,EAAMc,KAAK,KAAswCe,aAAY,QAAM,GAAoB,OAAK,IAAS,CAACC,UAAU,mBAAmBC,WAAW,WAAWf,OAAOb,GAAI6B,WAA7gB,SAAwBC,GAAO5B,GAAS,QAAsBF,EAAG,CAAC8B,MAAMA,EAAM7B,KAAKA,IAAQ,EAA4c8B,aAAahC,EAAKyB,cAAclC,EAASI,OAAOsC,WAAW,UAAW,EAAE,W","sources":["webpack://soapbox/./app/soapbox/features/hashtag-timeline/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array.map.js\";import\"core-js/modules/es.array.concat.js\";import\"core-js/modules/es.array.filter.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.array.includes.js\";import\"core-js/modules/es.string.includes.js\";import React,{useEffect,useRef}from'react';import{useIntl,defineMessages}from'react-intl';import{connectHashtagStream}from'soapbox/actions/streaming';import{expandHashtagTimeline,clearTimeline}from'soapbox/actions/timelines';import{Column}from'soapbox/components/ui';import Timeline from'soapbox/features/ui/components/timeline';import{useAppDispatch}from'soapbox/hooks';var messages=defineMessages({any:{\"id\":\"hashtag.column_header.tag_mode.any\",\"defaultMessage\":\"or {additional}\"},all:{\"id\":\"hashtag.column_header.tag_mode.all\",\"defaultMessage\":\"and {additional}\"},none:{\"id\":\"hashtag.column_header.tag_mode.none\",\"defaultMessage\":\"without {additional}\"},empty:{\"id\":\"empty_column.hashtag\",\"defaultMessage\":\"There is nothing in this hashtag yet.\"}});export var HashtagTimeline=function HashtagTimeline(_ref){var params=_ref.params;var intl=useIntl();var id=(params===null||params===void 0?void 0:params.id)||'';var tags=(params===null||params===void 0?void 0:params.tags)||{any:[],all:[],none:[]};var dispatch=useAppDispatch();var disconnects=useRef([]);// Mastodon supports displaying results from multiple hashtags.\n// https://github.com/mastodon/mastodon/issues/6359\nvar title=function title(){var title=[\"#\".concat(id)];if(additionalFor('any')){title.push(' ',intl.formatMessage(messages.any,{additional:additionalFor('any')}));}if(additionalFor('all')){title.push(' ',intl.formatMessage(messages.any,{additional:additionalFor('all')}));}if(additionalFor('none')){title.push(' ',intl.formatMessage(messages.any,{additional:additionalFor('none')}));}return title.join('');};var additionalFor=function additionalFor(mode){if(tags&&(tags[mode]||[]).length>0){return tags[mode].map(function(tag){return tag.value;}).join('/');}else{return'';}};var subscribe=function subscribe(){var any=tags.any.map(function(tag){return tag.value;});var all=tags.all.map(function(tag){return tag.value;});var none=tags.none.map(function(tag){return tag.value;});[id].concat(_toConsumableArray(any)).map(function(tag){disconnects.current.push(dispatch(connectHashtagStream(id,tag,function(status){var tags=status.tags.map(function(tag){return tag.name;});return all.filter(function(tag){return tags.includes(tag);}).length===all.length&&none.filter(function(tag){return tags.includes(tag);}).length===0;})));});};var unsubscribe=function unsubscribe(){disconnects.current.map(function(disconnect){return disconnect();});disconnects.current=[];};var handleLoadMore=function handleLoadMore(maxId){dispatch(expandHashtagTimeline(id,{maxId:maxId,tags:tags}));};useEffect(function(){subscribe();dispatch(expandHashtagTimeline(id,{tags:tags}));return function(){unsubscribe();};},[]);useEffect(function(){unsubscribe();subscribe();dispatch(clearTimeline(\"hashtag:\".concat(id)));dispatch(expandHashtagTimeline(id,{tags:tags}));},[id]);return/*#__PURE__*/_jsx(Column,{label:title(),transparent:true},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:\"hashtag_timeline\",timelineId:\"hashtag:\".concat(id),onLoadMore:handleLoadMore,emptyMessage:intl.formatMessage(messages.empty),divideType:\"space\"}));};export default HashtagTimeline;"],"names":["messages","any","all","none","empty","HashtagTimeline","_ref","title","params","intl","id","tags","dispatch","disconnects","useRef","additionalFor","mode","length","map","tag","value","join","subscribe","concat","current","push","status","name","filter","includes","unsubscribe","disconnect","useEffect","label","formatMessage","additional","transparent","scrollKey","timelineId","onLoadMore","maxId","emptyMessage","divideType"],"sourceRoot":""}