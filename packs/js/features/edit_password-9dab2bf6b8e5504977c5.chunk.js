"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[34],{1255:function(e,s,a){a.r(s),a(12),a(13),a(10),a(20),a(4),a(8),a(22),a(23),a(9);var t=a(2063),r=a(2047),o=a(2053),n=(a(0),a(25),a(226),a(1)),d=a(2064),i=a(2065),l=a(206),u=a(2),c=a(3),w=a(36),f=a(842);function p(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);s&&(t=t.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),a.push.apply(a,t)}return a}function b(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?p(Object(a),!0).forEach((function(s){(0,r.Z)(e,s,a[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))}))}return e}var g=(0,d.vU)({updatePasswordSuccess:{id:"security.update_password.success",defaultMessage:"Password successfully updated."},updatePasswordFail:{id:"security.update_password.fail",defaultMessage:"Update password failed."},oldPasswordFieldLabel:{id:"security.fields.old_password.label",defaultMessage:"Current password"},newPasswordFieldLabel:{id:"security.fields.new_password.label",defaultMessage:"New password"},confirmationFieldLabel:{id:"security.fields.password_confirmation.label",defaultMessage:"New password (again)"},header:{id:"edit_password.header",defaultMessage:"Change Password"},submit:{id:"security.submit",defaultMessage:"Save changes"},cancel:{id:"common.cancel",defaultMessage:"Cancel"}}),m={currentPassword:"",newPassword:"",newPasswordConfirmation:""};s.default=function(){var e=(0,i.Z)(),s=(0,c.TL)(),a=(0,c.hz)().passwordRequirements,d=n.useState(m),p=(0,o.Z)(d,2),P=p[0],Z=p[1],v=n.useState(!1),y=(0,o.Z)(v,2),h=y[0],O=y[1],M=n.useState(!a),C=(0,o.Z)(M,2),j=C[0],S=C[1],k=P.currentPassword,F=P.newPassword,x=P.newPasswordConfirmation,L=function(){return Z(m)},I=n.useCallback((function(e){e.persist(),Z((function(s){return b(b({},s),{},(0,r.Z)({},e.target.name,e.target.value))}))}),[]),_=n.useCallback((function(){O(!0),s((0,l.Cp)(k,F,x)).then((function(){L(),w.Z.success(e.formatMessage(g.updatePasswordSuccess))})).finally((function(){O(!1)})).catch((function(){L(),w.Z.error(e.formatMessage(g.updatePasswordFail))}))}),[k,F,x,s,e]);return(0,t.Z)(u.sg,{label:e.formatMessage(g.header),transparent:!0,withHeader:!1},void 0,(0,t.Z)(u.Zb,{variant:"rounded"},void 0,(0,t.Z)(u.Ol,{backHref:"/settings"},void 0,(0,t.Z)(u.ll,{title:e.formatMessage(g.header)})),(0,t.Z)(u.eW,{},void 0,(0,t.Z)(u.l0,{onSubmit:_},void 0,(0,t.Z)(u.cw,{labelText:e.formatMessage(g.oldPasswordFieldLabel)},void 0,(0,t.Z)(u.II,{type:"password",name:"currentPassword",onChange:I,value:k})),(0,t.Z)(u.cw,{labelText:e.formatMessage(g.newPasswordFieldLabel)},void 0,(0,t.Z)(u.II,{type:"password",name:"newPassword",onChange:I,value:F}),a&&(0,t.Z)(f.Z,{password:F,onChange:S})),(0,t.Z)(u.cw,{labelText:e.formatMessage(g.confirmationFieldLabel)},void 0,(0,t.Z)(u.II,{type:"password",name:"newPasswordConfirmation",onChange:I,value:x})),(0,t.Z)(u.iN,{},void 0,(0,t.Z)(u.zx,{to:"/settings",theme:"tertiary"},void 0,e.formatMessage(g.cancel)),(0,t.Z)(u.zx,{type:"submit",theme:"primary",disabled:h||!j},void 0,e.formatMessage(g.submit)))))))}}}]);
//# sourceMappingURL=edit_password-9dab2bf6b8e5504977c5.chunk.js.map