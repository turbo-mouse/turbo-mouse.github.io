{"version":3,"file":"packs/js/features/favourited_statuses-bc9f0ba01e83a49be25e.chunk.js","mappings":"qPAAkxBA,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,6BAA6B,eAAiB,iBAA0vG,UAAlqG,SAAoBC,GAAO,IAAIC,EAAcC,EAAyBC,GAAK,SAAcC,GAAS,UAAqBC,GAAS,UAAkBC,GAAW,UAAoBC,GAAyC,QAA9BN,EAAcD,EAAMQ,cAAgC,IAAhBP,OAAuB,EAAOA,EAAcM,WAAW,GAAOE,GAAQ,SAAe,SAASC,GAAO,OAAO,QAAsBA,EAAMH,EAAU,IAAOI,EAAaJ,EAASK,iBAAiBN,SAA2F,QAA5CJ,EAAqBI,EAAWC,gBAAyC,IAAvBL,OAA1D,EAA+FA,EAAqBU,eAAmBC,EAAYF,EAAa,aAAa,cAAcG,OAAOL,aAAiC,EAAOA,EAAQM,IAAQC,GAAU,SAAe,SAASN,GAAO,IAAIO,EAAsB,OAAqE,QAA7DA,EAAsBP,EAAMQ,aAAaC,IAAIN,UAA8C,IAAxBI,OAA+B,EAAOA,EAAsBG,SAAQ,iBAAsB,IAAOC,GAAU,SAAe,SAASX,GAAO,IAAIY,EAAuB,OAAuJ,KAAjF,QAA9DA,EAAuBZ,EAAMQ,aAAaC,IAAIN,UAA+C,IAAzBS,OAAgC,EAAOA,EAAuBD,UAAkB,IAAOE,GAAQ,SAAe,SAASb,GAAO,IAAIc,EAAuB,QAAwE,QAA9DA,EAAuBd,EAAMQ,aAAaC,IAAIN,UAA+C,IAAzBW,IAAiCA,EAAuBC,KAAM,IAAOC,GAAc,SAAe,SAAShB,GAAO,IAAIiB,GAAyG,IAA/FjB,EAAMkB,cAAcC,MAAM,CAACpB,aAAiC,EAAOA,EAAQM,GAAG,eAAsB,OAAOJ,GAAmBgB,IAAYtB,EAASyB,eAAgB,IAAOC,GAAe,IAAAC,aAAY,KAAS,WAAcrB,EAAcP,GAAS,WAAqCK,GAASL,GAAS,QAAgCK,EAAQM,IAAM,GAAE,IAAI,CAACkB,SAAQ,IAAO,CAACxB,aAAiC,EAAOA,EAAQM,KAAib,IAA5a,IAAAmB,YAAU,WAAcvB,EAAaP,GAAS,WAAmCK,GAASL,GAAS,SAAaK,EAAQM,KAAKX,GAAS,QAA+BK,EAAQM,MAAWX,GAAS,SAAuBG,GAAa,GAAE,KAAI,IAAA2B,YAAU,WAAczB,IAAUE,IAAcP,GAAS,SAAaK,EAAQM,KAAKX,GAAS,QAA+BK,EAAQM,KAAM,GAAE,CAACN,aAAiC,EAAOA,EAAQM,KAAQW,EAAe,OAAmB,OAAK,KAAO,CAAC,OAAE,GAAoB,OAAK,MAAM,CAACS,UAAU,+BAA0B,GAAoB,OAAK,IAAiB,CAACpB,GAAG,mCAAmCqB,eAAe,0BAA2B,IAAI3B,EAAS,OAAmB,OAAK,IAAiB,CAAC,GAAI,IAAI4B,EAAa1B,GAA0B,OAAK,IAAiB,CAACI,GAAG,mCAAmCqB,eAAe,kFAA8F,OAAK,IAAiB,CAACrB,GAAG,2CAA2CqB,eAAe,gDAAgD,OAAmB,OAAK,KAAO,CAACE,MAAMnC,EAAKoC,cAAczC,EAASC,SAASyC,YAAW,EAAMC,aAAY,QAAM,GAAoB,OAAK,IAAW,CAACzB,UAAUA,EAAU0B,UAAU,sBAAsBnB,QAAQA,EAAQF,UAAUA,EAAUsB,WAAWZ,EAAeM,aAAaA,IAAgB,C","sources":["webpack://soapbox/./app/soapbox/features/favourited-statuses/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import{OrderedSet as ImmutableOrderedSet}from'immutable';import debounce from'lodash/debounce';import React,{useCallback,useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchAccount,fetchAccountByUsername}from'soapbox/actions/accounts';import{fetchFavouritedStatuses,expandFavouritedStatuses,fetchAccountFavouritedStatuses,expandAccountFavouritedStatuses}from'soapbox/actions/favourites';import MissingIndicator from'soapbox/components/missing-indicator';import StatusList from'soapbox/components/status-list';import{Column}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures,useOwnAccount}from'soapbox/hooks';import{findAccountByUsername}from'soapbox/selectors';var messages=defineMessages({heading:{\"id\":\"column.favourited_statuses\",\"defaultMessage\":\"Liked posts\"}});/** Timeline displaying a user's favourited statuses. */var Favourites=function Favourites(props){var _props$params,_ownAccount$username;var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var ownAccount=useOwnAccount();var username=((_props$params=props.params)===null||_props$params===void 0?void 0:_props$params.username)||'';var account=useAppSelector(function(state){return findAccountByUsername(state,username);});var isOwnAccount=username.toLowerCase()===(ownAccount===null||ownAccount===void 0?void 0:(_ownAccount$username=ownAccount.username)===null||_ownAccount$username===void 0?void 0:_ownAccount$username.toLowerCase());var timelineKey=isOwnAccount?'favourites':\"favourites:\".concat(account===null||account===void 0?void 0:account.id);var statusIds=useAppSelector(function(state){var _state$status_lists$g;return((_state$status_lists$g=state.status_lists.get(timelineKey))===null||_state$status_lists$g===void 0?void 0:_state$status_lists$g.items)||ImmutableOrderedSet();});var isLoading=useAppSelector(function(state){var _state$status_lists$g2;return((_state$status_lists$g2=state.status_lists.get(timelineKey))===null||_state$status_lists$g2===void 0?void 0:_state$status_lists$g2.isLoading)===true;});var hasMore=useAppSelector(function(state){var _state$status_lists$g3;return!!((_state$status_lists$g3=state.status_lists.get(timelineKey))!==null&&_state$status_lists$g3!==void 0&&_state$status_lists$g3.next);});var isUnavailable=useAppSelector(function(state){var blockedBy=state.relationships.getIn([account===null||account===void 0?void 0:account.id,'blocked_by'])===true;return isOwnAccount?false:blockedBy&&!features.blockersVisible;});var handleLoadMore=useCallback(debounce(function(){if(isOwnAccount){dispatch(expandFavouritedStatuses());}else if(account){dispatch(expandAccountFavouritedStatuses(account.id));}},300,{leading:true}),[account===null||account===void 0?void 0:account.id]);useEffect(function(){if(isOwnAccount)dispatch(fetchFavouritedStatuses());else{if(account){dispatch(fetchAccount(account.id));dispatch(fetchAccountFavouritedStatuses(account.id));}else{dispatch(fetchAccountByUsername(username));}}},[]);useEffect(function(){if(account&&!isOwnAccount){dispatch(fetchAccount(account.id));dispatch(fetchAccountFavouritedStatuses(account.id));}},[account===null||account===void 0?void 0:account.id]);if(isUnavailable){return/*#__PURE__*/_jsx(Column,{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"})));}if(!account){return/*#__PURE__*/_jsx(MissingIndicator,{});}var emptyMessage=isOwnAccount?/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.favourited_statuses\",defaultMessage:\"You don't have any liked posts yet. When you like one, it will show up here.\"}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_favourited_statuses\",defaultMessage:\"This user doesn't have any liked posts yet.\"});return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading),withHeader:false,transparent:true},void 0,/*#__PURE__*/_jsx(StatusList,{statusIds:statusIds,scrollKey:\"favourited_statuses\",hasMore:hasMore,isLoading:isLoading,onLoadMore:handleLoadMore,emptyMessage:emptyMessage}));};export default Favourites;"],"names":["messages","heading","props","_props$params","_ownAccount$username","intl","dispatch","features","ownAccount","username","params","account","state","isOwnAccount","toLowerCase","timelineKey","concat","id","statusIds","_state$status_lists$g","status_lists","get","items","isLoading","_state$status_lists$g2","hasMore","_state$status_lists$g3","next","isUnavailable","blockedBy","relationships","getIn","blockersVisible","handleLoadMore","useCallback","leading","useEffect","className","defaultMessage","emptyMessage","label","formatMessage","withHeader","transparent","scrollKey","onLoadMore"],"sourceRoot":""}