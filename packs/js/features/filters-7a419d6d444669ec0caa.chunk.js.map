{"version":3,"file":"packs/js/features/filters-7a419d6d444669ec0caa.chunk.js","mappings":"qOAA4tBA,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,iBAAiB,eAAiB,eAAeC,mBAAmB,CAAC,GAAK,oCAAoC,eAAiB,kBAAkBC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,qBAAqBC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,gBAAgBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,gDAAgDC,cAAc,CAAC,GAAK,+BAA+B,eAAiB,iBAAiBC,gBAAgB,CAAC,GAAK,iCAAiC,eAAiB,mBAAmBC,cAAc,CAAC,GAAK,+BAA+B,eAAiB,iBAAiBC,cAAc,CAAC,GAAK,+BAA+B,eAAiB,iBAAiBC,YAAY,CAAC,GAAK,6BAA6B,eAAiB,wBAAwBC,UAAU,CAAC,GAAK,2BAA2B,eAAiB,+EAA+EC,kBAAkB,CAAC,GAAK,mCAAmC,eAAiB,cAAcC,gBAAgB,CAAC,GAAK,iCAAiC,eAAiB,yGAAyGC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,kBAAkBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,uBAAuBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,yBAAyBC,mBAAmB,CAAC,GAAK,oCAAoC,eAAiB,mBAAmBC,OAAO,CAAC,GAAK,wBAAwB,eAAiB,YAAgBC,EAAS,CAACC,KAAKpB,EAASM,cAAce,OAAOrB,EAASO,gBAAgBC,cAAcR,EAASQ,cAAcc,OAAOtB,EAASS,eAWstF,UAH7sK,WAAmB,IAAIc,GAAK,SAAcC,GAAS,UAAqBC,GAAQ,SAAe,SAASC,GAAO,OAAOA,EAAMD,OAAQ,IAAOE,GAAU,IAAAC,UAAS,IAAIC,GAAW,OAAeF,EAAU,GAAGG,EAAOD,EAAW,GAAGE,EAAUF,EAAW,GAAOG,GAAW,IAAAJ,UAAS,IAA4CK,GAA7B,OAAeD,EAAW,GAAwB,GAAOE,GAAW,IAAAN,WAAS,GAAMO,GAAW,OAAeD,EAAW,GAAGE,EAAaD,EAAW,GAAGE,EAAgBF,EAAW,GAAOG,GAAW,IAAAV,WAAS,GAAOW,GAAW,OAAeD,EAAW,GAAGE,EAAeD,EAAW,GAAGE,EAAkBF,EAAW,GAAOG,GAAW,IAAAd,WAAS,GAAOe,GAAY,OAAeD,EAAW,GAAGlC,EAAcmC,EAAY,GAAGC,EAAiBD,EAAY,GAAOE,GAAY,IAAAjB,WAAS,GAAOkB,GAAY,OAAeD,EAAY,GAAGpC,EAAcqC,EAAY,GAAGC,EAAiBD,EAAY,GAAOE,GAAY,IAAApB,WAAS,GAAOqB,GAAY,OAAeD,EAAY,GAAGE,EAAaD,EAAY,GAAGE,EAAgBF,EAAY,GAAOG,GAAY,IAAAxB,WAAS,GAAMyB,GAAY,OAAeD,EAAY,GAAGE,EAAUD,EAAY,GAAGE,EAAaF,EAAY,IAGjc,IAAAG,YAAU,WAAWhC,GAAS,UAAgB,GAAE,IAAI,IAAIiC,GAA0B,OAAK,IAAiB,CAACC,GAAG,uBAAuBC,eAAe,6CAA6C,OAAmB,OAAK,KAAO,CAACC,UAAU,wBAAwBC,MAAMtC,EAAKuC,cAAc9D,EAASC,eAAU,GAAoB,OAAK,KAAW,CAAC,OAAE,GAAoB,OAAK,KAAU,CAAC8D,MAAMxC,EAAKuC,cAAc9D,EAASE,wBAAoC,OAAK,KAAK,CAAC8D,SAApmC,SAAsBC,GAAGA,EAAEC,iBAAiB,IAAIC,EAAQ,GAAM/B,GAAc+B,EAAQC,KAAK,QAAY5B,GAAgB2B,EAAQC,KAAK,UAAc5D,GAAe2D,EAAQC,KAAK,iBAAqB3D,GAAe0D,EAAQC,KAAK,UAAW5C,GAAS,QAAaM,EAAOG,EAAUkC,EAAQb,EAAUJ,IAAemB,MAAK,WAAW,OAAO7C,GAAS,UAAgB,IAAG8C,OAAM,SAASC,GAAO,UAAYhD,EAAKuC,cAAc9D,EAASe,cAAe,GAAG,QAAwsB,GAAoB,OAAK,KAAU,CAACyD,UAAUjD,EAAKuC,cAAc9D,EAASG,eAAU,GAAoB,OAAK,KAAM,CAACsE,UAAS,EAAKC,KAAK,OAAOC,KAAK,SAASC,SAAS,SAAkBC,GAAM,IAAIC,EAAOD,EAAKC,OAAO,OAAO/C,EAAU+C,EAAOC,MAAO,MAAkB,OAAK,KAAM,CAAC,OAAE,GAAoB,OAAK,KAAK,CAACC,KAAK,KAAKC,OAAO,eAAU,GAAoB,OAAK,IAAiB,CAACvB,GAAG,yBAAyBC,eAAe,sBAAkC,OAAK,KAAK,CAACqB,KAAK,KAAKE,MAAM,cAAS,GAAoB,OAAK,IAAiB,CAACxB,GAAG,uBAAuBC,eAAe,8DAA0E,OAAK,IAAK,CAAC,OAAE,GAAoB,OAAK,IAAS,CAACE,MAAMtC,EAAKuC,cAAc9D,EAASM,qBAAgB,GAAoB,OAAK,KAAO,CAACqE,KAAK,gBAAgBQ,QAAQ/C,EAAawC,SAAS,SAAkBQ,GAAO,IAAIN,EAAOM,EAAMN,OAAO,OAAOzC,EAAgByC,EAAOK,QAAS,MAAkB,OAAK,IAAS,CAACtB,MAAMtC,EAAKuC,cAAc9D,EAASO,uBAAkB,GAAoB,OAAK,KAAO,CAACoE,KAAK,kBAAkBQ,QAAQ3C,EAAeoC,SAAS,SAAkBS,GAAO,IAAIP,EAAOO,EAAMP,OAAO,OAAOrC,EAAkBqC,EAAOK,QAAS,MAAkB,OAAK,IAAS,CAACtB,MAAMtC,EAAKuC,cAAc9D,EAASQ,qBAAgB,GAAoB,OAAK,KAAO,CAACmE,KAAK,gBAAgBQ,QAAQ3E,EAAcoE,SAAS,SAAkBU,GAAO,IAAIR,EAAOQ,EAAMR,OAAO,OAAOlC,EAAiBkC,EAAOK,QAAS,MAAkB,OAAK,IAAS,CAACtB,MAAMtC,EAAKuC,cAAc9D,EAASS,qBAAgB,GAAoB,OAAK,KAAO,CAACkE,KAAK,gBAAgBQ,QAAQ1E,EAAcmE,SAAS,SAAkBW,GAAO,IAAIT,EAAOS,EAAMT,OAAO,OAAO/B,EAAiB+B,EAAOK,QAAS,OAAmB,OAAK,IAAK,CAAC,OAAE,GAAoB,OAAK,IAAS,CAACtB,MAAMtC,EAAKuC,cAAc9D,EAASU,aAAa8E,KAAKjE,EAAKuC,cAAc9D,EAASW,iBAAY,GAAoB,OAAK,KAAO,CAACgE,KAAK,eAAeQ,QAAQjC,EAAa0B,SAAS,SAAkBa,GAAO,IAAIX,EAAOW,EAAMX,OAAO,OAAO3B,EAAgB2B,EAAOK,QAAS,MAAkB,OAAK,IAAS,CAACtB,MAAMtC,EAAKuC,cAAc9D,EAASY,mBAAmB4E,KAAKjE,EAAKuC,cAAc9D,EAASa,uBAAkB,GAAoB,OAAK,KAAO,CAAC8D,KAAK,aAAaQ,QAAQ7B,EAAUsB,SAAS,SAAkBc,GAAO,IAAIZ,EAAOY,EAAMZ,OAAO,OAAOvB,EAAauB,EAAOK,QAAS,OAAmB,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAO,CAACT,KAAK,SAASQ,MAAM,gBAAW,EAAO3D,EAAKuC,cAAc9D,EAASc,aAAyB,OAAK,KAAW,CAAC,OAAE,GAAoB,OAAK,KAAU,CAACiD,MAAMxC,EAAKuC,cAAc9D,EAASiB,wBAAoC,OAAK,IAAe,CAAC0E,UAAU,UAAUlC,aAAaA,EAAamC,cAAc,uBAAkB,EAAOnE,EAAQoE,KAAI,SAASC,EAAOC,GAAG,OAAmB,OAAK,KAAO,CAACC,MAAM,EAAEC,eAAe,gBAAW,GAAoB,OAAK,KAAM,CAACD,MAAM,QAAG,GAAoB,OAAK,KAAK,CAACf,OAAO,eAAU,GAAoB,OAAK,IAAiB,CAACvB,GAAG,oCAAoCC,eAAe,uBAAuB,KAAiB,OAAK,KAAK,CAACuB,MAAM,QAAQgB,IAAI,aAAQ,EAAOJ,EAAOhE,UAAsB,OAAK,KAAK,CAACmD,OAAO,eAAU,GAAoB,OAAK,IAAiB,CAACvB,GAAG,qCAAqCC,eAAe,qBAAqB,KAAiB,OAAK,KAAK,CAACuB,MAAM,QAAQgB,IAAI,aAAQ,EAAOJ,EAAO3B,QAAQ0B,KAAI,SAAS1B,GAAS,OAAOhD,EAASgD,GAAS5C,EAAKuC,cAAc3C,EAASgD,IAAUA,CAAQ,IAAGgC,KAAK,SAAqB,OAAK,KAAO,CAACH,MAAM,QAAG,GAAoB,OAAK,KAAK,CAACf,OAAO,eAAU,EAAOa,EAAO5C,cAA0B,OAAK,IAAiB,CAACQ,GAAG,4BAA4BC,eAAe,UAAsB,OAAK,IAAiB,CAACD,GAAG,4BAA4BC,eAAe,UAAUmC,EAAOM,aAAyB,OAAK,KAAK,CAACnB,OAAO,eAAU,GAAoB,OAAK,IAAiB,CAACvB,GAAG,kCAAkCC,eAAe,mBAA+B,OAAK,KAAW,CAAC0C,cAAc,wFAAwFC,IAAI,EAAQ,IAA2BC,SAAtoJ7C,EAAiqJoC,EAAOpC,GAA7pJ,WAAWlC,GAAS,QAAakC,IAAKW,MAAK,WAAW,OAAO7C,GAAS,UAAgB,IAAG8C,OAAM,WAAW,UAAY/C,EAAKuC,cAAc9D,EAASgB,cAAe,GAAG,GAA6/I+C,MAAMxC,EAAKuC,cAAc9D,EAASkB,WAA1uJ,IAA4BwC,CAAytJ,KAAK,C","sources":["webpack://soapbox/./app/soapbox/features/filters/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.array.map.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchFilters,createFilter,deleteFilter}from'soapbox/actions/filters';import List,{ListItem}from'soapbox/components/list';import ScrollableList from'soapbox/components/scrollable-list';import{Button,CardHeader,CardTitle,Column,Form,FormActions,FormGroup,HStack,IconButton,Input,Stack,Text,Toggle}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import toast from'soapbox/toast';var messages=defineMessages({heading:{\"id\":\"column.filters\",\"defaultMessage\":\"Muted words\"},subheading_add_new:{\"id\":\"column.filters.subheading_add_new\",\"defaultMessage\":\"Add New Filter\"},keyword:{\"id\":\"column.filters.keyword\",\"defaultMessage\":\"Keyword or phrase\"},expires:{\"id\":\"column.filters.expires\",\"defaultMessage\":\"Expire after\"},expires_hint:{\"id\":\"column.filters.expires_hint\",\"defaultMessage\":\"Expiration dates are not currently supported\"},home_timeline:{\"id\":\"column.filters.home_timeline\",\"defaultMessage\":\"Home timeline\"},public_timeline:{\"id\":\"column.filters.public_timeline\",\"defaultMessage\":\"Public timeline\"},notifications:{\"id\":\"column.filters.notifications\",\"defaultMessage\":\"Notifications\"},conversations:{\"id\":\"column.filters.conversations\",\"defaultMessage\":\"Conversations\"},drop_header:{\"id\":\"column.filters.drop_header\",\"defaultMessage\":\"Drop instead of hide\"},drop_hint:{\"id\":\"column.filters.drop_hint\",\"defaultMessage\":\"Filtered posts will disappear irreversibly, even if filter is later removed\"},whole_word_header:{\"id\":\"column.filters.whole_word_header\",\"defaultMessage\":\"Whole word\"},whole_word_hint:{\"id\":\"column.filters.whole_word_hint\",\"defaultMessage\":\"When the keyword or phrase is alphanumeric only, it will only be applied if it matches the whole word\"},add_new:{\"id\":\"column.filters.add_new\",\"defaultMessage\":\"Add New Filter\"},create_error:{\"id\":\"column.filters.create_error\",\"defaultMessage\":\"Error adding filter\"},delete_error:{\"id\":\"column.filters.delete_error\",\"defaultMessage\":\"Error deleting filter\"},subheading_filters:{\"id\":\"column.filters.subheading_filters\",\"defaultMessage\":\"Current Filters\"},delete:{\"id\":\"column.filters.delete\",\"defaultMessage\":\"Delete\"}});var contexts={home:messages.home_timeline,public:messages.public_timeline,notifications:messages.notifications,thread:messages.conversations};// const expirations = {\n//   null: 'Never',\n//   // 3600: '30 minutes',\n//   // 21600: '1 hour',\n//   // 43200: '12 hours',\n//   // 86400 : '1 day',\n//   // 604800: '1 week',\n// };\nvar Filters=function Filters(){var intl=useIntl();var dispatch=useAppDispatch();var filters=useAppSelector(function(state){return state.filters;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),phrase=_useState2[0],setPhrase=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,1),expiresAt=_useState4[0];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),homeTimeline=_useState6[0],setHomeTimeline=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),publicTimeline=_useState8[0],setPublicTimeline=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),notifications=_useState10[0],setNotifications=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),conversations=_useState12[0],setConversations=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),irreversible=_useState14[0],setIrreversible=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),wholeWord=_useState16[0],setWholeWord=_useState16[1];// const handleSelectChange = e => {\n//   this.setState({ [e.target.name]: e.target.value });\n// };\nvar handleAddNew=function handleAddNew(e){e.preventDefault();var context=[];if(homeTimeline){context.push('home');}if(publicTimeline){context.push('public');}if(notifications){context.push('notifications');}if(conversations){context.push('thread');}dispatch(createFilter(phrase,expiresAt,context,wholeWord,irreversible)).then(function(){return dispatch(fetchFilters());}).catch(function(error){toast.error(intl.formatMessage(messages.create_error));});};var handleFilterDelete=function handleFilterDelete(id){return function(){dispatch(deleteFilter(id)).then(function(){return dispatch(fetchFilters());}).catch(function(){toast.error(intl.formatMessage(messages.delete_error));});};};useEffect(function(){dispatch(fetchFilters());},[]);var emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.filters\",defaultMessage:\"You haven't created any muted words yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"filter-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Form,{onSubmit:handleAddNew},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.keyword)},void 0,/*#__PURE__*/_jsx(Input,{required:true,type:\"text\",name:\"phrase\",onChange:function onChange(_ref){var target=_ref.target;return setPhrase(target.value);}})),/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",weight:\"medium\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_header\",defaultMessage:\"Filter contexts\"})),/*#__PURE__*/_jsx(Text,{size:\"xs\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_hint\",defaultMessage:\"One or multiple contexts where the filter should apply\"}))),/*#__PURE__*/_jsx(List,{},void 0,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.home_timeline)},void 0,/*#__PURE__*/_jsx(Toggle,{name:\"home_timeline\",checked:homeTimeline,onChange:function onChange(_ref2){var target=_ref2.target;return setHomeTimeline(target.checked);}})),/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.public_timeline)},void 0,/*#__PURE__*/_jsx(Toggle,{name:\"public_timeline\",checked:publicTimeline,onChange:function onChange(_ref3){var target=_ref3.target;return setPublicTimeline(target.checked);}})),/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.notifications)},void 0,/*#__PURE__*/_jsx(Toggle,{name:\"notifications\",checked:notifications,onChange:function onChange(_ref4){var target=_ref4.target;return setNotifications(target.checked);}})),/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.conversations)},void 0,/*#__PURE__*/_jsx(Toggle,{name:\"conversations\",checked:conversations,onChange:function onChange(_ref5){var target=_ref5.target;return setConversations(target.checked);}}))),/*#__PURE__*/_jsx(List,{},void 0,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.drop_header),hint:intl.formatMessage(messages.drop_hint)},void 0,/*#__PURE__*/_jsx(Toggle,{name:\"irreversible\",checked:irreversible,onChange:function onChange(_ref6){var target=_ref6.target;return setIrreversible(target.checked);}})),/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.whole_word_header),hint:intl.formatMessage(messages.whole_word_hint)},void 0,/*#__PURE__*/_jsx(Toggle,{name:\"whole_word\",checked:wholeWord,onChange:function onChange(_ref7){var target=_ref7.target;return setWholeWord(target.checked);}}))),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\"},void 0,intl.formatMessage(messages.add_new)))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_filters)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"filters\",emptyMessage:emptyMessage,itemClassName:\"pb-4 last:pb-0\"},void 0,filters.map(function(filter,i){return/*#__PURE__*/_jsx(HStack,{space:1,justifyContent:\"between\"},void 0,/*#__PURE__*/_jsx(Stack,{space:1},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_phrase_label\",defaultMessage:\"Keyword or phrase:\"}),' ',/*#__PURE__*/_jsx(Text,{theme:\"muted\",tag:\"span\"},void 0,filter.phrase)),/*#__PURE__*/_jsx(Text,{weight:\"medium\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_context_label\",defaultMessage:\"Filter contexts:\"}),' ',/*#__PURE__*/_jsx(Text,{theme:\"muted\",tag:\"span\"},void 0,filter.context.map(function(context){return contexts[context]?intl.formatMessage(contexts[context]):context;}).join(', '))),/*#__PURE__*/_jsx(HStack,{space:4},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\"},void 0,filter.irreversible?/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_drop\",defaultMessage:\"Drop\"}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_hide\",defaultMessage:\"Hide\"})),filter.whole_word&&/*#__PURE__*/_jsx(Text,{weight:\"medium\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_whole-word\",defaultMessage:\"Whole word\"})))),/*#__PURE__*/_jsx(IconButton,{iconClassName:\"h-5 w-5 text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500\",src:require('@tabler/icons/trash.svg'),onClick:handleFilterDelete(filter.id),title:intl.formatMessage(messages.delete)}));})));};export default Filters;"],"names":["messages","heading","subheading_add_new","keyword","expires","expires_hint","home_timeline","public_timeline","notifications","conversations","drop_header","drop_hint","whole_word_header","whole_word_hint","add_new","create_error","delete_error","subheading_filters","delete","contexts","home","public","thread","intl","dispatch","filters","state","_useState","useState","_useState2","phrase","setPhrase","_useState3","expiresAt","_useState5","_useState6","homeTimeline","setHomeTimeline","_useState7","_useState8","publicTimeline","setPublicTimeline","_useState9","_useState10","setNotifications","_useState11","_useState12","setConversations","_useState13","_useState14","irreversible","setIrreversible","_useState15","_useState16","wholeWord","setWholeWord","useEffect","emptyMessage","id","defaultMessage","className","label","formatMessage","title","onSubmit","e","preventDefault","context","push","then","catch","error","labelText","required","type","name","onChange","_ref","target","value","size","weight","theme","checked","_ref2","_ref3","_ref4","_ref5","hint","_ref6","_ref7","scrollKey","itemClassName","map","filter","i","space","justifyContent","tag","join","whole_word","iconClassName","src","onClick"],"sourceRoot":""}