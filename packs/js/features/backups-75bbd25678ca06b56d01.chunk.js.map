{"version":3,"file":"packs/js/features/backups-75bbd25678ca06b56d01.chunk.js","mappings":"sMAAufA,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,iBAAiB,eAAiB,WAAWC,OAAO,CAAC,GAAK,yBAAyB,eAAiB,iBAAiBC,aAAa,CAAC,GAAK,wBAAwB,eAAiB,8BAA8BC,mBAAmB,CAAC,GAAK,+BAA+B,eAAiB,mBAAmBC,QAAQ,CAAC,GAAK,kBAAkB,eAAiB,aAAkjD,UAAzhD,WAAmB,IAAIC,GAAK,SAAcC,GAAS,UAAqBC,GAAQ,SAAe,SAASC,GAAO,OAAOA,EAAMD,QAAQE,SAASC,QAAO,SAASC,GAAQ,OAAOA,EAAOC,WAAY,GAAG,IAAOC,GAAU,IAAAC,WAAS,GAAMC,GAAW,OAAeF,EAAU,GAAGG,EAAUD,EAAW,GAAGE,EAAaF,EAAW,GAAOG,EAAmB,SAA4BC,GAAGb,GAAS,WAAgBa,EAAEC,gBAAiB,GAAE,IAAAC,YAAU,WAAWf,GAAS,WAAgBgB,MAAK,WAAWL,GAAa,EAAO,IAAGM,OAAM,WAAW,GAAG,GAAE,IAAI,IAAIC,EAAYR,GAA6B,IAAlBT,EAAQkB,QAAgBtB,GAAgC,OAAK,IAAI,CAACuB,KAAK,IAAIC,QAAQT,QAAoB,GAAoB,OAAK,KAAK,CAACU,IAAI,OAAOC,MAAM,UAAUC,KAAK,KAAKC,UAAU,wBAAmB,EAAO1B,EAAK2B,cAAcjC,EAASI,sBAAsB,OAAmB,OAAK,KAAO,CAAC8B,MAAM5B,EAAK2B,cAAcjC,EAASC,eAAU,GAAoB,OAAK,IAAe,CAACgB,UAAUA,EAAUQ,YAAYA,EAAYU,UAAU,UAAUhC,aAAaG,EAAK2B,cAAcjC,EAASG,aAAa,CAACiC,OAAOhC,UAAsB,EAAOI,EAAQ6B,KAAI,SAASzB,GAAQ,OAAmB,OAAK,MAAM,CAACoB,UAAU,OAAOpB,EAAO0B,GAAG1B,EAAO2B,WAAuB,OAAK,IAAI,CAACZ,KAAKf,EAAO4B,IAAIC,OAAO,eAAU,EAAO7B,EAAOC,cAA0B,OAAK,KAAK,CAACiB,MAAM,eAAU,EAAOxB,EAAK2B,cAAcjC,EAASK,SAAS,KAAKO,EAAOC,aAAc,MAAiB,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAO,CAACiB,MAAM,UAAUY,SAASzB,EAAUW,QAAQT,QAAoB,EAAOb,EAAK2B,cAAcjC,EAASE,UAAW,C","sources":["webpack://soapbox/./app/soapbox/features/backups/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.map.js\";import React,{useEffect,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{fetchBackups,createBackup}from'soapbox/actions/backups';import ScrollableList from'soapbox/components/scrollable-list';import{Button,Column,FormActions,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({heading:{\"id\":\"column.backups\",\"defaultMessage\":\"Backups\"},create:{\"id\":\"backups.actions.create\",\"defaultMessage\":\"Create backup\"},emptyMessage:{\"id\":\"backups.empty_message\",\"defaultMessage\":\"No backups found. {action}\"},emptyMessageAction:{\"id\":\"backups.empty_message.action\",\"defaultMessage\":\"Create one now?\"},pending:{\"id\":\"backups.pending\",\"defaultMessage\":\"Pending\"}});var Backups=function Backups(){var intl=useIntl();var dispatch=useAppDispatch();var backups=useAppSelector(function(state){return state.backups.toList().sortBy(function(backup){return backup.inserted_at;});});var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var handleCreateBackup=function handleCreateBackup(e){dispatch(createBackup());e.preventDefault();};useEffect(function(){dispatch(fetchBackups()).then(function(){setIsLoading(false);}).catch(function(){});},[]);var showLoading=isLoading&&backups.count()===0;var emptyMessageAction=/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:handleCreateBackup},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"primary\",size:\"sm\",className:\"hover:underline\"},void 0,intl.formatMessage(messages.emptyMessageAction)));return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{isLoading:isLoading,showLoading:showLoading,scrollKey:\"backups\",emptyMessage:intl.formatMessage(messages.emptyMessage,{action:emptyMessageAction})},void 0,backups.map(function(backup){return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\"},backup.id,backup.processed?/*#__PURE__*/_jsx(\"a\",{href:backup.url,target:\"_blank\"},void 0,backup.inserted_at):/*#__PURE__*/_jsx(Text,{theme:\"subtle\"},void 0,intl.formatMessage(messages.pending),\": \",backup.inserted_at));})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{theme:\"primary\",disabled:isLoading,onClick:handleCreateBackup},void 0,intl.formatMessage(messages.create))));};export default Backups;"],"names":["messages","heading","create","emptyMessage","emptyMessageAction","pending","intl","dispatch","backups","state","toList","sortBy","backup","inserted_at","_useState","useState","_useState2","isLoading","setIsLoading","handleCreateBackup","e","preventDefault","useEffect","then","catch","showLoading","count","href","onClick","tag","theme","size","className","formatMessage","label","scrollKey","action","map","id","processed","url","target","disabled"],"sourceRoot":""}