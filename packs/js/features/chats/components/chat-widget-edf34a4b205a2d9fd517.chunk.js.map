{"version":3,"file":"packs/js/features/chats/components/chat-widget-edf34a4b205a2d9fd517.chunk.js","mappings":"2TAAuMA,EAAU,CAAC,SAAS,eAAe,WAAW,kBAAkB,sBAAsB,QAAQ,eAAimD,EAA5+C,SAAwBC,GAAO,IAAIC,EAAOD,EAAMC,OAAOC,EAAoBF,EAAMG,aAAaA,OAAmC,IAAtBD,GAAkCA,EAAoBE,EAASJ,EAAMI,SAASC,EAAgBL,EAAMK,gBAAgBC,EAAoBN,EAAMM,oBAAoBC,EAAMP,EAAMO,MAAMC,EAAYR,EAAMQ,YAAYC,GAAK,OAAyBT,EAAMD,GAAeW,EAAWP,EAAa,SAAS,MAAUQ,EAAY,CAAC,EAAiD,OAA5CR,IAAcQ,EAAYC,QAAQR,GAA6B,gBAAoB,MAAO,OAAS,CAAC,EAAEK,EAAK,CAACI,WAAW,SAASC,eAAe,UAAUC,UAAU,gCAA6C,gBAAoBL,GAAW,OAAS,CAACK,UAAU,iDAAiD,cAAc,SAASJ,IAA0B,OAAK,KAAK,CAACK,OAAO,WAAWC,IAAI,YAAO,EAAOV,QAA4B,IAAdC,GAA2BA,EAAY,IAAgB,OAAK,KAAO,CAACK,WAAW,SAASK,MAAM,QAAG,GAAoB,OAAK,KAAK,CAACF,OAAO,WAAW,cAAc,qBAAgB,EAAO,IAAIR,EAAY,MAAkB,OAAK,MAAM,CAACO,UAAU,8CAA0D,OAAK,KAAO,CAACG,MAAM,EAAEL,WAAW,eAAU,EAAOR,GAA6B,OAAK,KAAW,CAACO,QAAQP,EAAgBc,IAAIb,EAAoBc,cAAc,0BAA0B,MAAkB,OAAK,KAAW,CAACR,QAAQR,EAASe,IAAW,EAAPlB,EAAe,IAA0C,MAAgCmB,cAAc,2BAA4B,E,0FCAtoCC,GAAS,QAAe,CAACC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,iHAAiHC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,iBAAiBC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,SAASC,eAAe,CAAC,GAAK,gCAAgC,eAAiB,mFAAmFC,eAAe,CAAC,GAAK,gCAAgC,eAAiB,mBAAmBC,eAAe,CAAC,GAAK,gCAAgC,eAAiB,WAAWC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,6HAA6HC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,cAAcC,aAAa,CAAC,GAAK,8BAA8B,eAAiB,cAAcvB,MAAM,CAAC,GAAK,sBAAsB,eAAiB,gBAAgBwB,UAAU,CAAC,GAAK,mCAAmC,eAAiB,iBAAiBC,YAAY,CAAC,GAAK,qCAAqC,eAAiB,mBAAmBC,UAAU,CAAC,GAAK,mCAAmC,eAAiB,cAAcC,gBAAgB,CAAC,GAAK,kCAAkC,eAAiB,wBAAwBC,eAAe,CAAC,GAAK,iCAAiC,eAAiB,+CAA2zI,EAA3vI,WAAwB,IAAIC,GAAS,UAAqBC,GAAK,EAAAC,EAAA,KAAcC,GAAS,UAAkBC,GAAgB,UAAiBC,EAAKD,EAAgBC,KAAKC,EAAaF,EAAgBE,aAAaC,EAAeH,EAAgBG,eAAmBC,GAAgB,QAAeH,aAA2B,EAAOA,EAAKI,IAAIC,EAAWF,EAAgBE,WAAWC,EAAWH,EAAgBG,WAA4HC,GAAW,SAAe,SAASC,GAAO,IAAIC,EAAc,OAAOD,EAAME,MAAM,CAAC,gBAAgBV,SAAiE,QAA9BS,EAAcT,EAAKW,eAAiC,IAAhBF,OAA5C,EAA0EA,EAAcL,GAAG,YAAa,IAAOQ,EAAc,WAAyBX,EAAa,UAAuBD,aAA2B,EAAOA,EAAKI,GAAI,EAAowC,OAAIJ,EAAsC,gBAAoB,WAAe,MAAkB,OAAK,EAAe,CAACxC,QAAO,EAAKE,cAAa,EAAMC,SAAh4C,WAA4BiD,IAAgBV,GAAiB,EAA61CpC,OAAmB,OAAK,KAAO,CAACM,WAAW,SAASK,MAAM,QAAG,GAAoB,OAAK,SAAS,CAACN,QAAQyC,QAAe,GAAoB,OAAK,KAAK,CAAClC,IAAI,EAAQ,KAAgCJ,UAAU,+CAA2D,OAAK,KAAK,CAACC,OAAO,iBAAY,EAAOqB,EAAKiB,cAAcjC,EAASd,YAAwB,OAAK,KAAM,CAACW,MAAM,EAAEH,UAAU,sBAAiB,GAAoB,OAAK,KAAO,CAACF,WAAW,SAASK,MAAM,QAAG,GAAoB,OAAK,KAAO,CAACC,IAAIsB,EAAKW,QAAQG,cAAcC,KAAK,MAAkB,OAAK,KAAM,CAAC,OAAE,GAAoB,OAAK,KAAK,CAACxC,OAAO,iBAAY,EAAOyB,EAAKW,QAAQK,eAA2B,OAAK,KAAK,CAACD,KAAK,KAAKE,MAAM,gBAAW,EAAO,IAAIjB,EAAKW,QAAQO,QAAQpB,EAASqB,kBAA8B,OAAK,IAAK,CAAC,OAAE,GAAoB,OAAK,IAAS,CAACC,MAAMxB,EAAKiB,cAAcjC,EAASa,uBAAkB,GAAoB,OAAK,KAAO,CAAC4B,aAAarB,EAAKsB,mBAAmBC,SAAS,SAAkBC,GAAO,OAA/xFC,EAAuzFC,OAAOF,EAAMG,OAAOF,OAA7zFnB,EAAWsB,OAAO,CAACN,mBAAmBG,IAA9E,IAA0BA,CAAm1F,QAAG,EAAO,UAA6B,SAASI,GAAU,IAAIC,GAAO,QAAcD,GAAU,OAAmB,OAAK,SAAS,CAACJ,MAAMI,GAAUA,EAASjC,EAAKiB,cAAcjC,EAASc,eAAe,CAACqC,IAAID,IAAU,QAAmB,OAAK,KAAM,CAACrD,MAAM,QAAG,GAAoB,OAAK,SAAS,CAACN,QAAQoC,EAAzrE,WAA6BZ,GAAS,QAAU,UAAU,CAACqC,QAAQpC,EAAKiB,cAAcjC,EAASK,eAAe,CAACiC,KAAKlB,aAA2B,EAAOA,EAAKW,QAAQO,OAAOe,QAAQrC,EAAKiB,cAAcjC,EAASI,gBAAgBkD,QAAQtC,EAAKiB,cAAcjC,EAASM,gBAAgBiD,kBAAkB,UAAUC,UAAU,WAAqB,OAAOzC,GAAS,SAAeK,aAA2B,EAAOA,EAAKW,QAAQP,IAAK,IAAK,EAAx1B,WAA2BT,GAAS,QAAU,UAAU,CAACqC,QAAQpC,EAAKiB,cAAcjC,EAASE,aAAa,CAACoC,KAAKlB,aAA2B,EAAOA,EAAKW,QAAQO,OAAOe,QAAQrC,EAAKiB,cAAcjC,EAASC,cAAcqD,QAAQtC,EAAKiB,cAAcjC,EAASG,cAAcoD,kBAAkB,UAAUC,UAAU,WAAqB,OAAOzC,GAAS,SAAaK,aAA2B,EAAOA,EAAKW,QAAQP,IAAK,IAAK,EAA8vE9B,UAAU,oGAA+F,GAAoB,OAAK,KAAK,CAACI,IAAI,EAAQ,KAAyBJ,UAAU,aAAyB,OAAK,OAAO,CAAC,OAAE,EAAOsB,EAAKiB,cAAcN,EAAW3B,EAASW,YAAYX,EAASU,UAAU,CAAC4B,KAAKlB,EAAKW,QAAQO,SAASpB,EAASuC,cAA0B,OAAK,SAAS,CAAClE,QAArqE,WAA2BwB,GAAS,QAAU,UAAU,CAACqC,QAAQpC,EAAKiB,cAAcjC,EAASQ,cAAc6C,QAAQrC,EAAKiB,cAAcjC,EAASO,cAAc+C,QAAQtC,EAAKiB,cAAcjC,EAASS,cAAc8C,kBAAkB,UAAUC,UAAU,WAAqB,OAAO/B,EAAWuB,QAAS,IAAK,EAAm5DtD,UAAU,6EAAwE,GAAoB,OAAK,KAAK,CAACI,IAAI,EAAQ,KAA4BJ,UAAU,aAAyB,OAAK,OAAO,CAAC,OAAE,EAAOsB,EAAKiB,cAAcjC,EAASY,gBAA9mE,IAA8nE,ECA1gM,GAAS,QAAe,CAAC8C,kBAAkB,CAAC,GAAK,gCAAgC,eAAiB,+DAA+DC,yBAAyB,CAAC,GAAK,kCAAkC,eAAiB,wGAA4GC,EAAY,SAAqBC,GAAM,IAAIC,EAAQD,EAAKC,QAAQC,EAAGF,EAAKE,GAAGC,EAASH,EAAKG,SAAS,OAAIF,GAAkG,OAAK,KAAK,CAACC,GAAGA,QAAI,EAAOC,GAA/F,gBAAoB,WAAe,KAAKA,EAAiE,EAA6iF,EAAx/E,WAAsB,IAAIhD,GAAK,EAAAC,EAAA,KAAcE,GAAgB,UAAiBC,EAAKD,EAAgBC,KAAK6C,EAAc9C,EAAgB8C,cAAcC,EAAO/C,EAAgB+C,OAAO7C,EAAaF,EAAgBE,aAAazC,EAAOuC,EAAgBvC,OAAOuF,EAAgBhD,EAAgBgD,gBAAgB7C,EAAeH,EAAgBG,eAAmB8C,GAAS,IAAAC,QAAO,MAAqFC,EAAW,WAAsBhD,IAAiBD,EAAa,YAA0B,EAAMkD,EAAiB,WAA4BlD,EAAa,mBAAgC4C,EAAe,EAAmI,OAAI7C,EAAoB8C,IAAS,oBAAoD,OAAK,EAAa,CAAC,GAAuB,gBAAoB,WAAe,MAAkB,OAAK,EAAe,CAAChF,OAAmB,OAAK,KAAO,CAACM,WAAW,SAASK,MAAM,QAAG,EAAOjB,IAAqB,OAAK,SAAS,CAACW,QAA7rB,WAAqB8B,EAAa,WAAyB,QAAqpB,GAAoB,OAAK,KAAK,CAACvB,IAAI,EAAQ,KAAgCJ,UAAU,+CAA2D,OAAK,KAAO,CAACF,WAAW,SAASK,MAAM,QAAG,EAAOjB,IAAqB,OAAK,KAAK,CAACmF,GAAG,KAAKS,OAAOpD,EAAKW,QAAQO,YAAO,GAAoB,OAAK,KAAO,CAACxC,IAAIsB,EAAKW,QAAQ0C,OAAOtC,KAAK,OAAmB,OAAK,KAAM,CAAC3C,WAAW,cAAS,GAAoB,OAAKoE,EAAY,CAACE,QAAQlF,EAAOmF,GAAG,KAAKS,OAAOpD,EAAKW,QAAQO,YAAO,GAAoB,OAAK,MAAM,CAAC5C,UAAU,yCAAoC,GAAoB,OAAK,KAAK,CAACyC,KAAK,KAAKxC,OAAO,OAAO+E,UAAS,QAAM,EAAOtD,EAAKW,QAAQK,cAAc,IAAIoC,OAAOpD,EAAKW,QAAQO,OAAOlB,EAAKW,QAAQ4C,WAAuB,OAAK,IAAkB,CAAC,KAAKvD,EAAKsB,qBAAiC,OAAK,IAAQ,CAACkC,KAAK5D,EAAKiB,cAAc,EAAS0B,yBAAyB,CAACR,KAAI,QAAc/B,EAAKsB,4BAAuB,GAAoB,OAAK,KAAK,CAACP,KAAK,KAAKxC,OAAO,SAAS0C,MAAM,UAAUqC,UAAS,EAAKhF,UAAU,oBAAe,EAAOsB,EAAKiB,cAAc,EAASyB,kBAAkB,CAACP,KAAI,QAAc/B,EAAKsB,2BAA2B1D,gBAAzgD,WAA2B,IAAGmF,EAAmC,OAAOvF,EAAO2F,EAAiBD,CAAW,CAA86CtF,GAAkBC,oBAA2B,EAAPL,EAAe,IAAyC,KAA0BE,cAAcF,EAAOA,OAAOA,EAAOG,SAASuC,KAA8B,OAAK,KAAM,CAAC5B,UAAU,8BAA8BG,MAAM,QAAG,GAAoB,OAAK,IAAK,CAACuB,KAAKA,EAAKgD,SAASA,MAA7sD,IAA0tD,ECA92G,GAAS,QAAe,CAAClF,MAAM,CAAC,GAAK,oBAAoB,eAAiB,cAAgwB,EAA7tB,WAA4B,IAAI8B,GAAK,EAAAC,EAAA,KAAcE,GAAgB,UAAiBE,EAAaF,EAAgBE,aAAazC,EAAOuC,EAAgBvC,OAAO0C,EAAeH,EAAgBG,eAAe,OAAmB,OAAK,EAAe,CAAC,cAAc,cAAcpC,OAAmB,OAAK,KAAO,CAACM,WAAW,SAASK,MAAM,QAAG,GAAoB,OAAK,SAAS,CAACN,QAAQ,WAAmB8B,EAAa,WAAyB,QAAG,GAAoB,OAAK,KAAK,CAACvB,IAAI,EAAQ,KAAgCJ,UAAU,+CAA2D,OAAK,KAAK,CAACyC,KAAK,KAAKxC,OAAO,OAAO+E,UAAS,QAAM,EAAO1D,EAAKiB,cAAc,EAAS/C,SAASN,OAAOA,EAAOE,cAAa,EAAMC,SAASuC,GAAiB,E,SCAt+BuD,EAAK,SAAchB,GAAM,IAAIiB,EAAYjB,EAAKjF,OAAOA,OAAqB,IAAdkG,GAA2BA,EAAYC,EAAMlB,EAAKkB,MAAMf,EAASH,EAAKG,SAAyEgB,GAAtDnB,EAAKoB,KAAuD,IAAIF,EAAM,IAAG,OAAmB,OAAK,MAAM,CAACrF,WAAU,aAAK,qGAAqG,CAAC,0BAA0Bd,EAAO,QAAQA,IAASsG,MAAM,CAACF,MAAM,GAAGR,OAAOQ,EAAM,OAAO,cAAc,aAAQ,EAAOhB,EAAU,ECA5c,GAAS,QAAe,CAAC9E,MAAM,CAAC,GAAK,6CAA6C,eAAiB,mBAAmBiG,KAAK,CAAC,GAAK,4CAA4C,eAAiB,oCAAoCC,OAAO,CAAC,GAAK,8CAA8C,eAAiB,qBAA4tB,EAAxrB,SAAoBvB,GAAM,IAAIwB,EAASxB,EAAKwB,SAAarE,GAAK,EAAAC,EAAA,KAAU,OAAmB,OAAK,KAAM,CAACzB,WAAW,SAASC,eAAe,SAASC,UAAU,cAAc,cAAc,6BAAwB,GAAoB,OAAK,KAAM,CAACG,MAAM,QAAG,GAAoB,OAAK,KAAM,CAACA,MAAM,EAAEH,UAAU,4BAAuB,GAAoB,OAAK,KAAK,CAACyC,KAAK,KAAKxC,OAAO,OAAO2F,MAAM,eAAU,EAAOtE,EAAKiB,cAAc,EAAS/C,SAAqB,OAAK,KAAK,CAACmD,MAAM,QAAQiD,MAAM,eAAU,EAAOtE,EAAKiB,cAAc,EAASkD,SAAqB,OAAK,MAAM,CAACzF,UAAU,gBAAW,GAAoB,OAAK,KAAO,CAAC2C,MAAM,UAAU9C,QAAQ8F,QAAU,EAAOrE,EAAKiB,cAAc,EAASmD,WAAY,ECCvW,EADmI,WAAoB,IAAIlE,GAAS,UAAkBqE,EAAS,KAAiDC,GAAjB,SAAkDA,iBAAqBC,GAAU,IAAAC,YAAWC,GAAW,OAAeF,EAAU,GAAG5C,EAAM8C,EAAW,GAAGC,EAASD,EAAW,GAAOE,EAAeN,EAAS1C,EAAM,KAAS1B,GAAgB,UAAiB+C,EAAO/C,EAAgB+C,OAAO7C,EAAaF,EAAgBE,aAAazC,EAAOuC,EAAgBvC,OAAO0C,EAAeH,EAAgBG,eAAsDwE,GAAzB,QAASD,GAA+CE,WAAWC,EAAMF,EAAqBG,KAAKC,EAAUJ,EAAqBI,UAAcC,EAAerD,OAAO+C,aAA+C,EAAOA,EAAeO,QAAQ,EACjsD,OAAGlC,IAAS,WAAwBA,IAAS,oBAAoD,OAAKW,EAAK,CAACjG,OAAOA,EAAOmG,MAAM,EAAEE,MAAK,QAAM,GAAoB,OAAK,EAAW,CAAC,IAAQf,IAAS,aAA6C,OAAKW,EAAK,CAACjG,OAAOA,EAAOmG,MAAM,EAAEE,MAAK,QAAM,GAAoB,OAAK,EAAiB,CAAC,GAAGrG,GAAoB,OAAK,IAAW,CAAC,GAAG,OAA0B,OAAKiG,EAAK,CAACjG,OAAOA,EAAOmG,MAAM,EAAEE,MAAK,QAAM,GAAoB,OAAK,EAAe,CAAC/F,OAAmB,OAAK,IAAiB,CAACsC,GAAG,eAAe6E,eAAe,UAAUlH,YAAYqG,EAAiB5G,OAAOA,EAAOG,SAASuC,EAAetC,gBAAgB,WAA2BqC,EAAa,aAA0BuE,OAASU,GAAe1H,GAAQ0C,GAAkB,EAAErC,oBAAoB,EAAQ,OAA4BL,EAD0nCuH,GAAgBrD,OAAOkD,aAA6B,EAAOA,EAAMI,QAAQ,GAAGF,GAA8B,OAAK,KAAM,CAACrG,MAAM,EAAEH,UAAU,oBAAe,EAAOwB,EAASqF,cAA0B,OAAK,MAAM,CAAC7G,UAAU,aAAQ,GAAoB,OAAK,IAAgB,CAACmD,MAAMA,GAAO,GAAGF,SAAS,SAAkBC,GAAO,OAAOgD,EAAShD,EAAMG,OAAOF,MAAO,EAAE2D,QAAlc,WAAyBL,GAAgBP,EAAS,GAAK,KAAia9C,OAAOkD,aAA6B,EAAOA,EAAMI,QAAQ,GAAGF,GAAuB,OAAK,IAAS,CAACO,YAAYZ,EAAea,YAA9sB,SAAyBC,GAAUtF,EAAa,UAAuBsF,EAASnF,IAAIoE,OAASU,EAAW,KAAipB,OAAK,IAAuB,CAAC,IAAkE,KAApDN,aAA6B,EAAOA,EAAMI,SAAgC,OAAK,EAAW,CAACf,SAAS,WAAoBhE,EAAa,YAA0B,SAAnK,EAC5qD,KAAM,ECDxJ,EAApV,WAAsB,IAAIU,GAAQ,UAA6C6E,GAAjB,UAA8BC,SAASC,SAAaC,EAAiBC,QAAQJ,EAAKK,MAAM,aAAa,OAAKlF,UAAkCA,EAAQmF,iBAAkBH,EAAyB,MAAyB,OAAK,KAAa,CAAC,OAAE,GAAoB,OAAK,EAAS,CAAC,GAAI,C","sources":["webpack://soapbox/./app/soapbox/features/chats/components/chat-widget/chat-pane-header.tsx","webpack://soapbox/./app/soapbox/features/chats/components/chat-widget/chat-settings.tsx","webpack://soapbox/./app/soapbox/features/chats/components/chat-widget/chat-window.tsx","webpack://soapbox/./app/soapbox/features/chats/components/chat-widget/headers/chat-search-header.tsx","webpack://soapbox/./app/soapbox/features/chats/components/ui/pane.tsx","webpack://soapbox/./app/soapbox/features/chats/components/chat-pane/blankslate.tsx","webpack://soapbox/./app/soapbox/features/chats/components/chat-pane/chat-pane.tsx","webpack://soapbox/./app/soapbox/features/chats/components/chat-widget/chat-widget.tsx"],"sourcesContent":["import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"isOpen\",\"isToggleable\",\"onToggle\",\"secondaryAction\",\"secondaryActionIcon\",\"title\",\"unreadCount\"];import React from'react';import{HStack,IconButton,Text}from'soapbox/components/ui';var ChatPaneHeader=function ChatPaneHeader(props){var isOpen=props.isOpen,_props$isToggleable=props.isToggleable,isToggleable=_props$isToggleable===void 0?true:_props$isToggleable,onToggle=props.onToggle,secondaryAction=props.secondaryAction,secondaryActionIcon=props.secondaryActionIcon,title=props.title,unreadCount=props.unreadCount,rest=_objectWithoutProperties(props,_excluded);var ButtonComp=isToggleable?'button':'div';var buttonProps={};if(isToggleable){buttonProps.onClick=onToggle;}return/*#__PURE__*/React.createElement(HStack,_extends({},rest,{alignItems:\"center\",justifyContent:\"between\",className:\"h-16 rounded-t-xl py-3 px-4\"}),/*#__PURE__*/React.createElement(ButtonComp,_extends({className:\"flex h-16 grow flex-row items-center space-x-1\",\"data-testid\":\"title\"},buttonProps),/*#__PURE__*/_jsx(Text,{weight:\"semibold\",tag:\"div\"},void 0,title),typeof unreadCount!=='undefined'&&unreadCount>0&&/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:2},void 0,/*#__PURE__*/_jsx(Text,{weight:\"semibold\",\"data-testid\":\"unread-count\"},void 0,\"(\",unreadCount,\")\"),/*#__PURE__*/_jsx(\"div\",{className:\"h-2.5 w-2.5 rounded-full bg-accent-300\"}))),/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,secondaryAction?/*#__PURE__*/_jsx(IconButton,{onClick:secondaryAction,src:secondaryActionIcon,iconClassName:\"h-5 w-5 text-gray-600\"}):null,/*#__PURE__*/_jsx(IconButton,{onClick:onToggle,src:isOpen?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),iconClassName:\"h-5 w-5 text-gray-600\"})));};export default ChatPaneHeader;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.number.constructor.js\";import\"core-js/modules/es.array.map.js\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{blockAccount,unblockAccount}from'soapbox/actions/accounts';import{openModal}from'soapbox/actions/modals';import List,{ListItem}from'soapbox/components/list';import{Avatar,HStack,Icon,Select,Stack,Text}from'soapbox/components/ui';import{ChatWidgetScreens,useChatContext}from'soapbox/contexts/chat-context';import{useAppDispatch,useAppSelector,useFeatures}from'soapbox/hooks';import{messageExpirationOptions,useChatActions}from'soapbox/queries/chats';import{secondsToDays}from'soapbox/utils/numbers';import ChatPaneHeader from'./chat-pane-header';var messages=defineMessages({blockMessage:{\"id\":\"chat_settings.block.message\",\"defaultMessage\":\"Blocking will prevent this profile from direct messaging you and viewing your content. You can unblock later.\"},blockHeading:{\"id\":\"chat_settings.block.heading\",\"defaultMessage\":\"Block @{acct}\"},blockConfirm:{\"id\":\"chat_settings.block.confirm\",\"defaultMessage\":\"Block\"},unblockMessage:{\"id\":\"chat_settings.unblock.message\",\"defaultMessage\":\"Unblocking will allow this profile to direct message you and view your content.\"},unblockHeading:{\"id\":\"chat_settings.unblock.heading\",\"defaultMessage\":\"Unblock @{acct}\"},unblockConfirm:{\"id\":\"chat_settings.unblock.confirm\",\"defaultMessage\":\"Unblock\"},leaveMessage:{\"id\":\"chat_settings.leave.message\",\"defaultMessage\":\"Are you sure you want to leave this chat? Messages will be deleted for you and this chat will be removed from your inbox.\"},leaveHeading:{\"id\":\"chat_settings.leave.heading\",\"defaultMessage\":\"Leave Chat\"},leaveConfirm:{\"id\":\"chat_settings.leave.confirm\",\"defaultMessage\":\"Leave Chat\"},title:{\"id\":\"chat_settings.title\",\"defaultMessage\":\"Chat Details\"},blockUser:{\"id\":\"chat_settings.options.block_user\",\"defaultMessage\":\"Block @{acct}\"},unblockUser:{\"id\":\"chat_settings.options.unblock_user\",\"defaultMessage\":\"Unblock @{acct}\"},leaveChat:{\"id\":\"chat_settings.options.leave_chat\",\"defaultMessage\":\"Leave Chat\"},autoDeleteLabel:{\"id\":\"chat_settings.auto_delete.label\",\"defaultMessage\":\"Auto-delete messages\"},autoDeleteDays:{\"id\":\"chat_settings.auto_delete.days\",\"defaultMessage\":\"{day, plural, one {# day} other {# days}}\"}});var ChatSettings=function ChatSettings(){var dispatch=useAppDispatch();var intl=useIntl();var features=useFeatures();var _useChatContext=useChatContext(),chat=_useChatContext.chat,changeScreen=_useChatContext.changeScreen,toggleChatPane=_useChatContext.toggleChatPane;var _useChatActions=useChatActions(chat===null||chat===void 0?void 0:chat.id),deleteChat=_useChatActions.deleteChat,updateChat=_useChatActions.updateChat;var handleUpdateChat=function handleUpdateChat(value){return updateChat.mutate({message_expiration:value});};var isBlocking=useAppSelector(function(state){var _chat$account;return state.getIn(['relationships',chat===null||chat===void 0?void 0:(_chat$account=chat.account)===null||_chat$account===void 0?void 0:_chat$account.id,'blocking']);});var closeSettings=function closeSettings(){changeScreen(ChatWidgetScreens.CHAT,chat===null||chat===void 0?void 0:chat.id);};var minimizeChatPane=function minimizeChatPane(){closeSettings();toggleChatPane();};var handleBlockUser=function handleBlockUser(){dispatch(openModal('CONFIRM',{heading:intl.formatMessage(messages.blockHeading,{acct:chat===null||chat===void 0?void 0:chat.account.acct}),message:intl.formatMessage(messages.blockMessage),confirm:intl.formatMessage(messages.blockConfirm),confirmationTheme:'primary',onConfirm:function onConfirm(){return dispatch(blockAccount(chat===null||chat===void 0?void 0:chat.account.id));}}));};var handleUnblockUser=function handleUnblockUser(){dispatch(openModal('CONFIRM',{heading:intl.formatMessage(messages.unblockHeading,{acct:chat===null||chat===void 0?void 0:chat.account.acct}),message:intl.formatMessage(messages.unblockMessage),confirm:intl.formatMessage(messages.unblockConfirm),confirmationTheme:'primary',onConfirm:function onConfirm(){return dispatch(unblockAccount(chat===null||chat===void 0?void 0:chat.account.id));}}));};var handleLeaveChat=function handleLeaveChat(){dispatch(openModal('CONFIRM',{heading:intl.formatMessage(messages.leaveHeading),message:intl.formatMessage(messages.leaveMessage),confirm:intl.formatMessage(messages.leaveConfirm),confirmationTheme:'primary',onConfirm:function onConfirm(){return deleteChat.mutate();}}));};if(!chat){return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(ChatPaneHeader,{isOpen:true,isToggleable:false,onToggle:minimizeChatPane,title:/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:2},void 0,/*#__PURE__*/_jsx(\"button\",{onClick:closeSettings},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/arrow-left.svg'),className:\"h-6 w-6 text-gray-600 dark:text-gray-400\"})),/*#__PURE__*/_jsx(Text,{weight:\"semibold\"},void 0,intl.formatMessage(messages.title)))}),/*#__PURE__*/_jsx(Stack,{space:4,className:\"mx-auto w-5/6\"},void 0,/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:3},void 0,/*#__PURE__*/_jsx(Avatar,{src:chat.account.avatar_static,size:50}),/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{weight:\"semibold\"},void 0,chat.account.display_name),/*#__PURE__*/_jsx(Text,{size:\"sm\",theme:\"primary\"},void 0,\"@\",chat.account.acct))),features.chatsExpiration&&/*#__PURE__*/_jsx(List,{},void 0,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.autoDeleteLabel)},void 0,/*#__PURE__*/_jsx(Select,{defaultValue:chat.message_expiration,onChange:function onChange(event){return handleUpdateChat(Number(event.target.value));}},void 0,messageExpirationOptions.map(function(duration){var inDays=secondsToDays(duration);return/*#__PURE__*/_jsx(\"option\",{value:duration},duration,intl.formatMessage(messages.autoDeleteDays,{day:inDays}));})))),/*#__PURE__*/_jsx(Stack,{space:5},void 0,/*#__PURE__*/_jsx(\"button\",{onClick:isBlocking?handleUnblockUser:handleBlockUser,className:\"flex w-full items-center space-x-2 text-sm font-bold text-primary-600 dark:text-accent-blue\"},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/ban.svg'),className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{},void 0,intl.formatMessage(isBlocking?messages.unblockUser:messages.blockUser,{acct:chat.account.acct}))),features.chatsDelete&&/*#__PURE__*/_jsx(\"button\",{onClick:handleLeaveChat,className:\"flex w-full items-center space-x-2 text-sm font-bold text-danger-600\"},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/logout.svg'),className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{},void 0,intl.formatMessage(messages.leaveChat))))));};export default ChatSettings;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React,{useRef}from'react';import{defineMessages,useIntl}from'react-intl';import{Link}from'react-router-dom';import{Avatar,HStack,Icon,Stack,Text,Tooltip}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification-badge';import{ChatWidgetScreens,useChatContext}from'soapbox/contexts/chat-context';import{secondsToDays}from'soapbox/utils/numbers';import Chat from'../chat';import ChatPaneHeader from'./chat-pane-header';import ChatSettings from'./chat-settings';var messages=defineMessages({autoDeleteMessage:{\"id\":\"chat_window.auto_delete_label\",\"defaultMessage\":\"Auto-delete after {day, plural, one {# day} other {# days}}\"},autoDeleteMessageTooltip:{\"id\":\"chat_window.auto_delete_tooltip\",\"defaultMessage\":\"Chat messages are set to auto-delete after {day, plural, one {# day} other {# days}} upon sending.\"}});var LinkWrapper=function LinkWrapper(_ref){var enabled=_ref.enabled,to=_ref.to,children=_ref.children;if(!enabled){return/*#__PURE__*/React.createElement(React.Fragment,null,children);}return/*#__PURE__*/_jsx(Link,{to:to},void 0,children);};/** Floating desktop chat window. */var ChatWindow=function ChatWindow(){var intl=useIntl();var _useChatContext=useChatContext(),chat=_useChatContext.chat,currentChatId=_useChatContext.currentChatId,screen=_useChatContext.screen,changeScreen=_useChatContext.changeScreen,isOpen=_useChatContext.isOpen,needsAcceptance=_useChatContext.needsAcceptance,toggleChatPane=_useChatContext.toggleChatPane;var inputRef=useRef(null);var closeChat=function closeChat(){changeScreen(ChatWidgetScreens.INBOX);};var openSearch=function openSearch(){toggleChatPane();changeScreen(ChatWidgetScreens.SEARCH);};var openChatSettings=function openChatSettings(){changeScreen(ChatWidgetScreens.CHAT_SETTINGS,currentChatId);};var secondaryAction=function secondaryAction(){if(needsAcceptance){return undefined;}return isOpen?openChatSettings:openSearch;};if(!chat)return null;if(screen===ChatWidgetScreens.CHAT_SETTINGS){return/*#__PURE__*/_jsx(ChatSettings,{});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(ChatPaneHeader,{title:/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:2},void 0,isOpen&&/*#__PURE__*/_jsx(\"button\",{onClick:closeChat},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/arrow-left.svg'),className:\"h-6 w-6 text-gray-600 dark:text-gray-400\"})),/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:3},void 0,isOpen&&/*#__PURE__*/_jsx(Link,{to:\"/@\".concat(chat.account.acct)},void 0,/*#__PURE__*/_jsx(Avatar,{src:chat.account.avatar,size:40})),/*#__PURE__*/_jsx(Stack,{alignItems:\"start\"},void 0,/*#__PURE__*/_jsx(LinkWrapper,{enabled:isOpen,to:\"/@\".concat(chat.account.acct)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"flex grow items-center space-x-1\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",weight:\"bold\",truncate:true},void 0,chat.account.display_name||\"@\".concat(chat.account.acct)),chat.account.verified&&/*#__PURE__*/_jsx(VerificationBadge,{}))),chat.message_expiration&&/*#__PURE__*/_jsx(Tooltip,{text:intl.formatMessage(messages.autoDeleteMessageTooltip,{day:secondsToDays(chat.message_expiration)})},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",weight:\"medium\",theme:\"primary\",truncate:true,className:\"cursor-help\"},void 0,intl.formatMessage(messages.autoDeleteMessage,{day:secondsToDays(chat.message_expiration)})))))),secondaryAction:secondaryAction(),secondaryActionIcon:isOpen?require('@tabler/icons/info-circle.svg'):require('@tabler/icons/edit.svg'),isToggleable:!isOpen,isOpen:isOpen,onToggle:toggleChatPane}),/*#__PURE__*/_jsx(Stack,{className:\"h-full grow overflow-hidden\",space:2},void 0,/*#__PURE__*/_jsx(Chat,{chat:chat,inputRef:inputRef})));};export default ChatWindow;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{HStack,Icon,Text}from'soapbox/components/ui';import{ChatWidgetScreens,useChatContext}from'soapbox/contexts/chat-context';import ChatPaneHeader from'../chat-pane-header';var messages=defineMessages({title:{\"id\":\"chat_search.title\",\"defaultMessage\":\"Messages\"}});var ChatSearchHeader=function ChatSearchHeader(){var intl=useIntl();var _useChatContext=useChatContext(),changeScreen=_useChatContext.changeScreen,isOpen=_useChatContext.isOpen,toggleChatPane=_useChatContext.toggleChatPane;return/*#__PURE__*/_jsx(ChatPaneHeader,{\"data-testid\":\"pane-header\",title:/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:2},void 0,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){changeScreen(ChatWidgetScreens.INBOX);}},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/arrow-left.svg'),className:\"h-6 w-6 text-gray-600 dark:text-gray-400\"})),/*#__PURE__*/_jsx(Text,{size:\"sm\",weight:\"bold\",truncate:true},void 0,intl.formatMessage(messages.title))),isOpen:isOpen,isToggleable:false,onToggle:toggleChatPane});};export default ChatSearchHeader;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import clsx from'clsx';import React from'react';/** Chat pane UI component for desktop. */var Pane=function Pane(_ref){var _ref$isOpen=_ref.isOpen,isOpen=_ref$isOpen===void 0?false:_ref$isOpen,index=_ref.index,children=_ref.children,_ref$main=_ref.main,main=_ref$main===void 0?false:_ref$main;var right=404*index+20;return/*#__PURE__*/_jsx(\"div\",{className:clsx('fixed bottom-0 right-1 z-[99] flex w-96 flex-col rounded-t-lg bg-white shadow-3xl dark:bg-gray-900',{'h-[550px] max-h-[100vh]':isOpen,'h-16':!isOpen}),style:{right:\"\".concat(right,\"px\")},\"data-testid\":\"pane\"},void 0,children);};export{Pane};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{Button,Stack,Text}from'soapbox/components/ui';var messages=defineMessages({title:{\"id\":\"chat_search.empty_results_blankslate.title\",\"defaultMessage\":\"No messages yet\"},body:{\"id\":\"chat_search.empty_results_blankslate.body\",\"defaultMessage\":\"Search for someone to chat with.\"},action:{\"id\":\"chat_search.empty_results_blankslate.action\",\"defaultMessage\":\"Message someone\"}});var Blankslate=function Blankslate(_ref){var onSearch=_ref.onSearch;var intl=useIntl();return/*#__PURE__*/_jsx(Stack,{alignItems:\"center\",justifyContent:\"center\",className:\"h-full grow\",\"data-testid\":\"chat-pane-blankslate\"},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,/*#__PURE__*/_jsx(Stack,{space:1,className:\"mx-auto max-w-[80%]\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",align:\"center\"},void 0,intl.formatMessage(messages.title)),/*#__PURE__*/_jsx(Text,{theme:\"muted\",align:\"center\"},void 0,intl.formatMessage(messages.body))),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto\"},void 0,/*#__PURE__*/_jsx(Button,{theme:\"primary\",onClick:onSearch},void 0,intl.formatMessage(messages.action)))));};export default Blankslate;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.number.constructor.js\";import React,{useState}from'react';import{FormattedMessage}from'react-intl';import{Stack}from'soapbox/components/ui';import{ChatWidgetScreens,useChatContext}from'soapbox/contexts/chat-context';import{useStatContext}from'soapbox/contexts/stat-context';import{useDebounce,useFeatures}from'soapbox/hooks';import{useChats}from'soapbox/queries/chats';import ChatList from'../chat-list';import ChatSearchInput from'../chat-search-input';import ChatSearch from'../chat-search/chat-search';import EmptyResultsBlankslate from'../chat-search/empty-results-blankslate';import ChatPaneHeader from'../chat-widget/chat-pane-header';import ChatWindow from'../chat-widget/chat-window';import ChatSearchHeader from'../chat-widget/headers/chat-search-header';import{Pane}from'../ui';import Blankslate from'./blankslate';var ChatPane=function ChatPane(){var features=useFeatures();var debounce=useDebounce;var _useStatContext=useStatContext(),unreadChatsCount=_useStatContext.unreadChatsCount;var _useState=useState(),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var debouncedValue=debounce(value,300);var _useChatContext=useChatContext(),screen=_useChatContext.screen,changeScreen=_useChatContext.changeScreen,isOpen=_useChatContext.isOpen,toggleChatPane=_useChatContext.toggleChatPane;var _useChats=useChats(debouncedValue),_useChats$chatsQuery=_useChats.chatsQuery,chats=_useChats$chatsQuery.data,isLoading=_useChats$chatsQuery.isLoading;var hasSearchValue=Number(debouncedValue===null||debouncedValue===void 0?void 0:debouncedValue.length)>0;var handleClickChat=function handleClickChat(nextChat){changeScreen(ChatWidgetScreens.CHAT,nextChat.id);setValue(undefined);};var clearValue=function clearValue(){if(hasSearchValue){setValue('');}};var renderBody=function renderBody(){if(hasSearchValue||Number(chats===null||chats===void 0?void 0:chats.length)>0||isLoading){return/*#__PURE__*/_jsx(Stack,{space:4,className:\"h-full grow\"},void 0,features.chatsSearch&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4\"},void 0,/*#__PURE__*/_jsx(ChatSearchInput,{value:value||'',onChange:function onChange(event){return setValue(event.target.value);},onClear:clearValue})),Number(chats===null||chats===void 0?void 0:chats.length)>0||isLoading?/*#__PURE__*/_jsx(ChatList,{searchValue:debouncedValue,onClickChat:handleClickChat}):/*#__PURE__*/_jsx(EmptyResultsBlankslate,{}));}else if((chats===null||chats===void 0?void 0:chats.length)===0){return/*#__PURE__*/_jsx(Blankslate,{onSearch:function onSearch(){changeScreen(ChatWidgetScreens.SEARCH);}});}};// Active chat\nif(screen===ChatWidgetScreens.CHAT||screen===ChatWidgetScreens.CHAT_SETTINGS){return/*#__PURE__*/_jsx(Pane,{isOpen:isOpen,index:0,main:true},void 0,/*#__PURE__*/_jsx(ChatWindow,{}));}if(screen===ChatWidgetScreens.SEARCH){return/*#__PURE__*/_jsx(Pane,{isOpen:isOpen,index:0,main:true},void 0,/*#__PURE__*/_jsx(ChatSearchHeader,{}),isOpen?/*#__PURE__*/_jsx(ChatSearch,{}):null);}return/*#__PURE__*/_jsx(Pane,{isOpen:isOpen,index:0,main:true},void 0,/*#__PURE__*/_jsx(ChatPaneHeader,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"column.chats\",defaultMessage:\"Chats\"}),unreadCount:unreadChatsCount,isOpen:isOpen,onToggle:toggleChatPane,secondaryAction:function secondaryAction(){changeScreen(ChatWidgetScreens.SEARCH);setValue(undefined);if(!isOpen){toggleChatPane();}},secondaryActionIcon:require('@tabler/icons/edit.svg')}),isOpen?renderBody():null);};export default ChatPane;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.match.js\";import React from'react';import{useHistory}from'react-router-dom';import{ChatProvider}from'soapbox/contexts/chat-context';import{useOwnAccount}from'soapbox/hooks';import ChatPane from'../chat-pane/chat-pane';var ChatWidget=function ChatWidget(){var account=useOwnAccount();var history=useHistory();var path=history.location.pathname;var shouldHideWidget=Boolean(path.match(/^\\/chats/));if(!(account!==null&&account!==void 0&&account.chats_onboarded)||shouldHideWidget){return null;}return/*#__PURE__*/_jsx(ChatProvider,{},void 0,/*#__PURE__*/_jsx(ChatPane,{}));};export default ChatWidget;"],"names":["_excluded","props","isOpen","_props$isToggleable","isToggleable","onToggle","secondaryAction","secondaryActionIcon","title","unreadCount","rest","ButtonComp","buttonProps","onClick","alignItems","justifyContent","className","weight","tag","space","src","iconClassName","messages","blockMessage","blockHeading","blockConfirm","unblockMessage","unblockHeading","unblockConfirm","leaveMessage","leaveHeading","leaveConfirm","blockUser","unblockUser","leaveChat","autoDeleteLabel","autoDeleteDays","dispatch","intl","useIntl","features","_useChatContext","chat","changeScreen","toggleChatPane","_useChatActions","id","deleteChat","updateChat","isBlocking","state","_chat$account","getIn","account","closeSettings","formatMessage","avatar_static","size","display_name","theme","acct","chatsExpiration","label","defaultValue","message_expiration","onChange","event","value","Number","target","mutate","duration","inDays","day","heading","message","confirm","confirmationTheme","onConfirm","chatsDelete","autoDeleteMessage","autoDeleteMessageTooltip","LinkWrapper","_ref","enabled","to","children","currentChatId","screen","needsAcceptance","inputRef","useRef","openSearch","openChatSettings","concat","avatar","truncate","verified","text","Pane","_ref$isOpen","index","right","main","style","body","action","onSearch","align","debounce","unreadChatsCount","_useState","useState","_useState2","setValue","debouncedValue","_useChats$chatsQuery","chatsQuery","chats","data","isLoading","hasSearchValue","length","defaultMessage","undefined","chatsSearch","onClear","searchValue","onClickChat","nextChat","path","location","pathname","shouldHideWidget","Boolean","match","chats_onboarded"],"sourceRoot":""}