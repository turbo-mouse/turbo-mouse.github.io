{"version":3,"file":"packs/js/features/auth_token_list-20de4e8c133ccff2c8f5.chunk.js","mappings":"yMAAgjBA,GAAS,QAAe,CAACC,OAAO,CAAC,GAAK,0BAA0B,eAAiB,YAAYC,OAAO,CAAC,GAAK,yBAAyB,eAAiB,UAAUC,qBAAqB,CAAC,GAAK,uCAAuC,eAAiB,0BAA0BC,qBAAqB,CAAC,GAAK,uCAAuC,eAAiB,yEAAyEC,qBAAqB,CAAC,GAAK,uCAAuC,eAAiB,YAAgBC,EAAU,SAAmBC,GAAM,IAAIC,EAAMD,EAAKC,MAAMC,EAAUF,EAAKE,UAAcC,GAAS,UAAqBC,GAAK,SAA2b,OAAmB,OAAK,MAAM,CAACC,UAAU,uDAAkD,GAAoB,OAAK,KAAM,CAACC,MAAM,QAAG,GAAoB,OAAK,KAAM,CAAC,OAAE,GAAoB,OAAK,KAAK,CAACC,KAAK,KAAKC,OAAO,eAAU,EAAOP,EAAMQ,UAAUR,EAAMS,cAA0B,OAAK,KAAK,CAACH,KAAK,KAAKI,MAAM,cAAS,GAAoB,OAAK,KAAc,CAACC,MAAMX,EAAMS,YAAYG,QAAO,EAAKC,KAAK,UAAUC,MAAM,QAAQC,IAAI,UAAUC,KAAK,UAAUC,OAAO,eAA2B,OAAK,MAAM,CAACb,UAAU,yBAAoB,GAAoB,OAAK,KAAO,CAACM,MAAMT,EAAU,SAAS,UAAUiB,QAAj/B,WAAqChB,EAAVD,GAAmB,QAAU,UAAU,CAACkB,KAAK,EAAQ,KAAoCC,QAAQjB,EAAKkB,cAAc7B,EAASG,sBAAsB2B,QAAQnB,EAAKkB,cAAc7B,EAASI,sBAAsB2B,QAAQpB,EAAKkB,cAAc7B,EAASK,sBAAsB2B,UAAU,WAAqBtB,GAAS,QAAqBF,EAAMyB,IAAK,KAAmB,QAAqBzB,EAAMyB,IAAM,QAAymB,EAAOtB,EAAKkB,cAAc7B,EAASE,WAAY,EAA6iC,UAAzhC,WAAyB,IAAIQ,GAAS,UAAqBC,GAAK,SAAcuB,GAAO,SAAe,SAASC,GAAO,OAAOA,EAAMC,SAASC,IAAI,UAAUC,SAAU,IAAOC,GAAe,SAAe,SAASJ,GAAO,IAAIK,EAAaL,EAAMM,KAAKP,OAAOQ,WAAWC,MAAK,SAASnC,GAAO,OAAOA,EAAMoC,KAAKT,EAAMM,KAAKG,EAAG,IAAG,OAAOJ,aAA2C,EAAOA,EAAaP,EAAG,KAAG,IAAAY,YAAU,WAAWnC,GAAS,UAAoB,GAAE,IAAI,IAAIoC,EAAKZ,GAAoB,OAAK,MAAM,CAACtB,UAAU,8CAAyC,EAAOsB,EAAOa,KAAI,SAASvC,GAAO,OAAmB,OAAKF,EAAU,CAACE,MAAMA,EAAMC,UAAUD,EAAMyB,KAAKM,GAAgB/B,EAAMyB,GAAI,MAAiB,OAAK,KAAQ,CAAC,GAAG,OAAmB,OAAK,KAAO,CAACe,MAAMrC,EAAKkB,cAAc7B,EAASC,QAAQgD,aAAY,EAAKC,YAAW,QAAO,GAAoB,OAAK,KAAK,CAACC,QAAQ,gBAAW,GAAoB,OAAK,KAAW,CAACC,SAAS,kBAAa,GAAoB,OAAK,KAAU,CAACC,MAAM1C,EAAKkB,cAAc7B,EAASC,YAAwB,OAAK,KAAS,CAAC,OAAE,EAAO6C,IAAQ,C","sources":["webpack://soapbox/./app/soapbox/features/auth-token-list/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.find.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.array.map.js\";import React,{useEffect}from'react';import{defineMessages,FormattedDate,useIntl}from'react-intl';import{openModal}from'soapbox/actions/modals';import{fetchOAuthTokens,revokeOAuthTokenById}from'soapbox/actions/security';import{Button,Card,CardBody,CardHeader,CardTitle,Column,Spinner,Stack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({header:{\"id\":\"security.headers.tokens\",\"defaultMessage\":\"Sessions\"},revoke:{\"id\":\"security.tokens.revoke\",\"defaultMessage\":\"Revoke\"},revokeSessionHeading:{\"id\":\"confirmations.revoke_session.heading\",\"defaultMessage\":\"Revoke current session\"},revokeSessionMessage:{\"id\":\"confirmations.revoke_session.message\",\"defaultMessage\":\"You are about to revoke your current session. You will be signed out.\"},revokeSessionConfirm:{\"id\":\"confirmations.revoke_session.confirm\",\"defaultMessage\":\"Revoke\"}});var AuthToken=function AuthToken(_ref){var token=_ref.token,isCurrent=_ref.isCurrent;var dispatch=useAppDispatch();var intl=useIntl();var handleRevoke=function handleRevoke(){if(isCurrent)dispatch(openModal('CONFIRM',{icon:require('@tabler/icons/alert-triangle.svg'),heading:intl.formatMessage(messages.revokeSessionHeading),message:intl.formatMessage(messages.revokeSessionMessage),confirm:intl.formatMessage(messages.revokeSessionConfirm),onConfirm:function onConfirm(){dispatch(revokeOAuthTokenById(token.id));}}));else{dispatch(revokeOAuthTokenById(token.id));}};return/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg bg-gray-100 p-4 dark:bg-primary-800\"},void 0,/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{size:\"md\",weight:\"medium\"},void 0,token.app_name),token.valid_until&&/*#__PURE__*/_jsx(Text,{size:\"sm\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedDate,{value:token.valid_until,hour12:true,year:\"numeric\",month:\"short\",day:\"2-digit\",hour:\"numeric\",minute:\"2-digit\"}))),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\"},void 0,/*#__PURE__*/_jsx(Button,{theme:isCurrent?'danger':'primary',onClick:handleRevoke},void 0,intl.formatMessage(messages.revoke)))));};var AuthTokenList=function AuthTokenList(){var dispatch=useAppDispatch();var intl=useIntl();var tokens=useAppSelector(function(state){return state.security.get('tokens').reverse();});var currentTokenId=useAppSelector(function(state){var currentToken=state.auth.tokens.valueSeq().find(function(token){return token.me===state.auth.me;});return currentToken===null||currentToken===void 0?void 0:currentToken.id;});useEffect(function(){dispatch(fetchOAuthTokens());},[]);var body=tokens?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\"},void 0,tokens.map(function(token){return/*#__PURE__*/_jsx(AuthToken,{token:token,isCurrent:token.id===currentTokenId},token.id);})):/*#__PURE__*/_jsx(Spinner,{});return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.header),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{backHref:\"/settings\"},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.header)})),/*#__PURE__*/_jsx(CardBody,{},void 0,body)));};export default AuthTokenList;"],"names":["messages","header","revoke","revokeSessionHeading","revokeSessionMessage","revokeSessionConfirm","AuthToken","_ref","token","isCurrent","dispatch","intl","className","space","size","weight","app_name","valid_until","theme","value","hour12","year","month","day","hour","minute","onClick","icon","heading","formatMessage","message","confirm","onConfirm","id","tokens","state","security","get","reverse","currentTokenId","currentToken","auth","valueSeq","find","me","useEffect","body","map","label","transparent","withHeader","variant","backHref","title"],"sourceRoot":""}