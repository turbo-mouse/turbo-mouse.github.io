{"version":3,"file":"packs/js/features/followers-811d52cc98271b718146.chunk.js","mappings":"gSAA0kCA,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,mBAAmB,eAAiB,eAA+0F,UAAlvF,SAAmBC,GAAO,IAAIC,EAAcC,EAAyBC,GAAK,SAAcC,GAAS,UAAqBC,GAAS,UAAkBC,GAAW,UAAoBC,GAAU,IAAAC,WAAS,GAAMC,GAAW,OAAeF,EAAU,GAAGG,EAAQD,EAAW,GAAGE,EAAWF,EAAW,GAAOG,GAAyC,QAA9BX,EAAcD,EAAMa,cAAgC,IAAhBZ,OAAuB,EAAOA,EAAcW,WAAW,GAAOE,GAAQ,SAAe,SAASC,GAAO,OAAO,QAAsBA,EAAMH,EAAU,IAAOI,EAAaJ,EAASK,iBAAiBX,SAA2F,QAA5CJ,EAAqBI,EAAWM,gBAAyC,IAAvBV,OAA1D,EAA+FA,EAAqBe,eAAmBC,GAAW,SAAe,SAASH,GAAO,IAAII,EAAsB,OAAoH,QAA5GA,EAAsBJ,EAAMK,WAAWC,UAAUC,IAAIR,aAAiC,EAAOA,EAAQS,WAAqC,IAAxBJ,OAA+B,EAAOA,EAAsBK,SAAQ,iBAAsB,IAAOC,GAAQ,SAAe,SAASV,GAAO,IAAIW,EAAuB,QAAuH,QAA7GA,EAAuBX,EAAMK,WAAWC,UAAUC,IAAIR,aAAiC,EAAOA,EAAQS,WAAsC,IAAzBG,IAAiCA,EAAuBC,KAAM,IAAOC,GAAc,SAAe,SAASb,GAAO,IAAIc,GAAyG,IAA/Fd,EAAMe,cAAcC,MAAM,CAACjB,aAAiC,EAAOA,EAAQS,GAAG,eAAsB,OAAOP,GAAmBa,IAAYxB,EAAS2B,eAAgB,IAAOC,GAAe,IAAAC,aAAY,KAAS,WAAcpB,GAASV,GAAS,SAAgBU,EAAQS,IAAM,GAAE,IAAI,CAACY,SAAQ,IAAO,CAACrB,aAAiC,EAAOA,EAAQS,KAAsX,OAAjX,IAAAa,YAAU,WAAW,IAAIC,EAAwBA,EAATvB,EAAkB,CAACV,GAAS,SAAaU,EAAQS,KAAKnB,GAAS,SAAeU,EAAQS,MAAqB,CAACnB,GAAS,SAAuBQ,KAAa0B,QAAQC,IAAIF,GAAUG,MAAK,WAAW,OAAO7B,GAAW,EAAO,IAAG8B,OAAM,WAAW,OAAO9B,GAAW,EAAO,GAAG,GAAE,CAACG,aAAiC,EAAOA,EAAQS,GAAGX,IAAcF,GAASQ,EAAWwB,WAA8B,OAAK,KAAQ,CAAC,GAAQ5B,EAA0Dc,GAAkC,OAAK,MAAM,CAACe,UAAU,+BAA0B,GAAoB,OAAK,IAAiB,CAACpB,GAAG,mCAAmCqB,eAAe,0BAA6C,OAAK,KAAO,CAACC,MAAM1C,EAAK2C,cAAchD,EAASC,SAASgD,aAAY,QAAM,GAAoB,OAAK,IAAe,CAACC,UAAU,YAAYvB,QAAQA,EAAQwB,WAAWhB,EAAeiB,cAA0B,OAAK,IAAiB,CAAC3B,GAAG,0BAA0BqB,eAAe,kCAAkCO,cAAc,aAAQ,EAAOjC,EAAWkC,KAAI,SAAS7B,GAAI,OAAmB,OAAK,IAAiB,CAACA,GAAGA,GAAIA,EAAI,OAA7pB,OAAK,IAAiB,CAAC,EAA2oB,C","sources":["webpack://soapbox/./app/soapbox/features/followers/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.iterator.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.promise.js\";import\"core-js/modules/es.string.iterator.js\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.array.map.js\";import{OrderedSet as ImmutableOrderedSet}from'immutable';import debounce from'lodash/debounce';import React,{useCallback,useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchAccount,fetchFollowers,expandFollowers,fetchAccountByUsername}from'soapbox/actions/accounts';import MissingIndicator from'soapbox/components/missing-indicator';import ScrollableList from'soapbox/components/scrollable-list';import{Column,Spinner}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account-container';import{useAppDispatch,useAppSelector,useFeatures,useOwnAccount}from'soapbox/hooks';import{findAccountByUsername}from'soapbox/selectors';var messages=defineMessages({heading:{\"id\":\"column.followers\",\"defaultMessage\":\"Followers\"}});/** Displays a list of accounts who follow the given account. */var Followers=function Followers(props){var _props$params,_ownAccount$username;var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var ownAccount=useOwnAccount();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var username=((_props$params=props.params)===null||_props$params===void 0?void 0:_props$params.username)||'';var account=useAppSelector(function(state){return findAccountByUsername(state,username);});var isOwnAccount=username.toLowerCase()===(ownAccount===null||ownAccount===void 0?void 0:(_ownAccount$username=ownAccount.username)===null||_ownAccount$username===void 0?void 0:_ownAccount$username.toLowerCase());var accountIds=useAppSelector(function(state){var _state$user_lists$fol;return((_state$user_lists$fol=state.user_lists.followers.get(account===null||account===void 0?void 0:account.id))===null||_state$user_lists$fol===void 0?void 0:_state$user_lists$fol.items)||ImmutableOrderedSet();});var hasMore=useAppSelector(function(state){var _state$user_lists$fol2;return!!((_state$user_lists$fol2=state.user_lists.followers.get(account===null||account===void 0?void 0:account.id))!==null&&_state$user_lists$fol2!==void 0&&_state$user_lists$fol2.next);});var isUnavailable=useAppSelector(function(state){var blockedBy=state.relationships.getIn([account===null||account===void 0?void 0:account.id,'blocked_by'])===true;return isOwnAccount?false:blockedBy&&!features.blockersVisible;});var handleLoadMore=useCallback(debounce(function(){if(account){dispatch(expandFollowers(account.id));}},300,{leading:true}),[account===null||account===void 0?void 0:account.id]);useEffect(function(){var promises=[];if(account){promises=[dispatch(fetchAccount(account.id)),dispatch(fetchFollowers(account.id))];}else{promises=[dispatch(fetchAccountByUsername(username))];}Promise.all(promises).then(function(){return setLoading(false);}).catch(function(){return setLoading(false);});},[account===null||account===void 0?void 0:account.id,username]);if(loading&&accountIds.isEmpty()){return/*#__PURE__*/_jsx(Spinner,{});}if(!account){return/*#__PURE__*/_jsx(MissingIndicator,{});}if(isUnavailable){return/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"}));}return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading),transparent:true},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"followers\",hasMore:hasMore,onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.followers.empty\",defaultMessage:\"No one follows this user yet.\"}),itemClassName:\"pb-4\"},void 0,accountIds.map(function(id){return/*#__PURE__*/_jsx(AccountContainer,{id:id},id);})));};export default Followers;"],"names":["messages","heading","props","_props$params","_ownAccount$username","intl","dispatch","features","ownAccount","_useState","useState","_useState2","loading","setLoading","username","params","account","state","isOwnAccount","toLowerCase","accountIds","_state$user_lists$fol","user_lists","followers","get","id","items","hasMore","_state$user_lists$fol2","next","isUnavailable","blockedBy","relationships","getIn","blockersVisible","handleLoadMore","useCallback","leading","useEffect","promises","Promise","all","then","catch","isEmpty","className","defaultMessage","label","formatMessage","transparent","scrollKey","onLoadMore","emptyMessage","itemClassName","map"],"sourceRoot":""}