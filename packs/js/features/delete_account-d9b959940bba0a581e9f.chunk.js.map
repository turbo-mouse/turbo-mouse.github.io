{"version":3,"file":"packs/js/features/delete_account-d9b959940bba0a581e9f.chunk.js","mappings":"mNAAykBA,GAAS,QAAe,CAACC,mBAAmB,CAAC,GAAK,iCAAiC,eAAiB,YAAYC,aAAa,CAAC,GAAK,0BAA0B,eAAiB,kBAAkBC,WAAW,CAAC,GAAK,uBAAuB,eAAiB,iSAAiSC,gBAAgB,CAAC,GAAK,6BAA6B,eAAiB,4HAA4HC,aAAa,CAAC,GAAK,yBAAyB,eAAiB,kBAAkBC,qBAAqB,CAAC,GAAK,kCAAkC,eAAiB,iCAAiCC,kBAAkB,CAAC,GAAK,+BAA+B,eAAiB,8BAA2tD,UAA3qD,WAAyB,IAAIC,GAAK,SAAcC,GAAS,UAAqBC,GAAS,UAAkBC,EAAgB,WAAe,IAAIC,GAAiB,OAAeD,EAAgB,GAAGE,EAASD,EAAiB,GAAGE,EAAYF,EAAiB,GAAOG,EAAiB,YAAe,GAAOC,GAAiB,OAAeD,EAAiB,GAAGE,EAAUD,EAAiB,GAAGE,EAAWF,EAAiB,GAAOG,EAAkB,eAAkB,SAASC,GAAOA,EAAMC,UAAUP,EAAYM,EAAME,OAAOC,MAAO,GAAE,IAAQC,EAAa,eAAkB,WAAWN,GAAW,GAAMT,GAAS,QAAcI,IAAWY,MAAK,WAAWX,EAAY,IAAI,YAAcN,EAAKkB,cAAc1B,EAASM,sBAAuB,IAAGqB,SAAQ,WAAWT,GAAW,EAAO,IAAGU,OAAM,WAAWd,EAAY,IAAI,UAAYN,EAAKkB,cAAc1B,EAASO,mBAAoB,GAAG,GAAE,CAACM,EAASJ,EAASD,IAAO,OAAmB,OAAK,KAAK,CAACqB,QAAQ,gBAAW,GAAoB,OAAK,KAAW,CAACC,SAAS,kBAAa,GAAoB,OAAK,KAAU,CAACC,MAAMvB,EAAKkB,cAAc1B,EAASE,kBAA8B,OAAK,KAAS,CAAC,OAAE,GAAoB,OAAK,KAAM,CAAC8B,MAAM,QAAG,GAAoB,OAAK,KAAK,CAACC,MAAM,cAAS,EAAOzB,EAAKkB,cAAchB,EAASwB,WAAWlC,EAASG,WAAWH,EAASI,mBAA+B,OAAK,KAAK,CAAC+B,SAASX,QAAc,GAAoB,OAAK,KAAU,CAACY,UAAU5B,EAAKkB,cAAc1B,EAASC,0BAAqB,GAAoB,OAAK,KAAM,CAACoC,KAAK,WAAWC,KAAK,WAAWC,SAASpB,EAAkBI,MAAMV,MAAyB,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAO,CAACwB,KAAK,SAASJ,MAAM,SAASO,SAASvB,QAAW,EAAOT,EAAKkB,cAAc1B,EAASK,mBAAoB,C","sources":["webpack://soapbox/./app/soapbox/features/delete-account/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.promise.js\";import\"core-js/modules/es.promise.finally.js\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{deleteAccount}from'soapbox/actions/security';import{Button,Card,CardBody,CardHeader,CardTitle,Form,FormActions,FormGroup,Input,Stack,Text}from'soapbox/components/ui';import{useAppDispatch,useFeatures}from'soapbox/hooks';import toast from'soapbox/toast';var messages=defineMessages({passwordFieldLabel:{\"id\":\"security.fields.password.label\",\"defaultMessage\":\"Password\"},deleteHeader:{\"id\":\"security.headers.delete\",\"defaultMessage\":\"Delete Account\"},deleteText:{\"id\":\"security.text.delete\",\"defaultMessage\":\"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone. Your account will be destroyed from this server, and a deletion request will be sent to other servers. It's not guaranteed that all servers will purge your account.\"},localDeleteText:{\"id\":\"security.text.delete.local\",\"defaultMessage\":\"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone.\"},deleteSubmit:{\"id\":\"security.submit.delete\",\"defaultMessage\":\"Delete Account\"},deleteAccountSuccess:{\"id\":\"security.delete_account.success\",\"defaultMessage\":\"Account successfully deleted.\"},deleteAccountFail:{\"id\":\"security.delete_account.fail\",\"defaultMessage\":\"Account deletion failed.\"}});var DeleteAccount=function DeleteAccount(){var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),password=_React$useState2[0],setPassword=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setLoading=_React$useState4[1];var handleInputChange=React.useCallback(function(event){event.persist();setPassword(event.target.value);},[]);var handleSubmit=React.useCallback(function(){setLoading(true);dispatch(deleteAccount(password)).then(function(){setPassword('');toast.success(intl.formatMessage(messages.deleteAccountSuccess));}).finally(function(){setLoading(false);}).catch(function(){setPassword('');toast.error(intl.formatMessage(messages.deleteAccountFail));});},[password,dispatch,intl]);return/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{backHref:\"/settings\"},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.deleteHeader)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,/*#__PURE__*/_jsx(Text,{theme:\"muted\"},void 0,intl.formatMessage(features.federating?messages.deleteText:messages.localDeleteText)),/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.passwordFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",onChange:handleInputChange,value:password})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"danger\",disabled:isLoading},void 0,intl.formatMessage(messages.deleteSubmit)))))));};export default DeleteAccount;"],"names":["messages","passwordFieldLabel","deleteHeader","deleteText","localDeleteText","deleteSubmit","deleteAccountSuccess","deleteAccountFail","intl","dispatch","features","_React$useState","_React$useState2","password","setPassword","_React$useState3","_React$useState4","isLoading","setLoading","handleInputChange","event","persist","target","value","handleSubmit","then","formatMessage","finally","catch","variant","backHref","title","space","theme","federating","onSubmit","labelText","type","name","onChange","disabled"],"sourceRoot":""}