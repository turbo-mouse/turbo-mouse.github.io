{"version":3,"file":"packs/js/features/admin/moderation_log-c6e15a5ea786c31bece1.chunk.js","mappings":"oMAA+eA,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,8BAA8B,eAAiB,kBAAkBC,aAAa,CAAC,GAAK,qCAAqC,eAAiB,mGAAs+CC,EAAQ,SAAiBC,GAAM,IAAIC,EAAID,EAAKC,IAAI,OAAmB,OAAK,KAAM,CAACC,MAAM,EAAEC,UAAU,YAAO,GAAoB,OAAK,KAAK,CAAC,OAAE,EAAOF,EAAIG,UAAsB,OAAK,KAAK,CAACC,MAAM,QAAQC,KAAK,WAAM,GAAoB,OAAK,KAAc,CAACC,MAAM,IAAIC,KAAc,IAATP,EAAIQ,MAAWC,QAAO,EAAKC,KAAK,UAAUC,MAAM,QAAQC,IAAI,UAAUC,KAAK,UAAUC,OAAO,aAAc,EAAE,UAAluD,WAAyB,IAAIC,GAAK,SAAcC,GAAS,UAAqBC,GAAM,SAAe,SAASC,GAAO,OAAOA,EAAMC,UAAUC,MAAMC,KAAI,SAASC,GAAG,OAAOJ,EAAMC,UAAUF,MAAMM,IAAIC,OAAOF,GAAI,GAAG,IAAOG,GAAQ,SAAe,SAASP,GAAO,OAAOA,EAAMC,UAAUO,MAAMR,EAAMC,UAAUC,MAAMO,QAAQ,CAAE,IAAOC,GAAU,IAAAC,WAAS,GAAMC,GAAW,OAAeF,EAAU,GAAGG,EAAUD,EAAW,GAAGE,EAAaF,EAAW,GAAOG,GAAW,IAAAJ,UAAS,GAAGK,GAAW,OAAeD,EAAW,GAAGE,EAASD,EAAW,GAAGE,EAAYF,EAAW,GAAOG,EAAYN,GAA2B,IAAhBd,EAAMU,QAA6V,OAAjV,IAAAW,YAAU,WAAWtB,GAAS,WAAsBuB,MAAK,WAAWP,GAAa,GAAOI,EAAY,EAAG,IAAGI,OAAM,WAAW,GAAG,GAAE,KAAoO,OAAK,KAAO,CAACC,MAAM1B,EAAK2B,cAAc/C,EAASC,eAAU,GAAoB,OAAK,IAAe,CAACmC,UAAUA,EAAUM,YAAYA,EAAYM,UAAU,iBAAiB9C,aAAakB,EAAK2B,cAAc/C,EAASE,cAAc4B,QAAQA,EAAQmB,WAA7b,WAA0B,IAAIC,EAAKV,EAAS,EAAEH,GAAa,GAAMhB,GAAS,QAAmB,CAAC6B,KAAKA,KAAQN,MAAK,WAAWP,GAAa,GAAOI,EAAYS,EAAM,IAAGL,OAAM,WAAW,GAAG,EAA+RtC,UAAU,mEAA8D,EAAOe,EAAMI,KAAI,SAASyB,GAAM,OAAOA,IAAmB,OAAKhD,EAAQ,CAACE,IAAI8C,GAAMA,EAAKC,GAAI,KAAK,C","sources":["webpack://soapbox/./app/soapbox/features/admin/moderation-log.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.array.map.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedDate,useIntl}from'react-intl';import{fetchModerationLog}from'soapbox/actions/admin';import ScrollableList from'soapbox/components/scrollable-list';import{Column,Stack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({heading:{\"id\":\"column.admin.moderation_log\",\"defaultMessage\":\"Moderation Log\"},emptyMessage:{\"id\":\"admin.moderation_log.empty_message\",\"defaultMessage\":\"You have not performed any moderation actions yet. When you do, a history will be shown here.\"}});var ModerationLog=function ModerationLog(){var intl=useIntl();var dispatch=useAppDispatch();var items=useAppSelector(function(state){return state.admin_log.index.map(function(i){return state.admin_log.items.get(String(i));});});var hasMore=useAppSelector(function(state){return state.admin_log.total-state.admin_log.index.count()>0;});var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),lastPage=_useState4[0],setLastPage=_useState4[1];var showLoading=isLoading&&items.count()===0;useEffect(function(){dispatch(fetchModerationLog()).then(function(){setIsLoading(false);setLastPage(1);}).catch(function(){});},[]);var handleLoadMore=function handleLoadMore(){var page=lastPage+1;setIsLoading(true);dispatch(fetchModerationLog({page:page})).then(function(){setIsLoading(false);setLastPage(page);}).catch(function(){});};return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{isLoading:isLoading,showLoading:showLoading,scrollKey:\"moderation-log\",emptyMessage:intl.formatMessage(messages.emptyMessage),hasMore:hasMore,onLoadMore:handleLoadMore,className:\"divide-y divide-solid divide-gray-200 dark:divide-gray-800\"},void 0,items.map(function(item){return item&&/*#__PURE__*/_jsx(LogItem,{log:item},item.id);})));};var LogItem=function LogItem(_ref){var log=_ref.log;return/*#__PURE__*/_jsx(Stack,{space:2,className:\"p-4\"},void 0,/*#__PURE__*/_jsx(Text,{},void 0,log.message),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"xs\"},void 0,/*#__PURE__*/_jsx(FormattedDate,{value:new Date(log.time*1000),hour12:true,year:\"numeric\",month:\"short\",day:\"2-digit\",hour:\"numeric\",minute:\"2-digit\"})));};export default ModerationLog;"],"names":["messages","heading","emptyMessage","LogItem","_ref","log","space","className","message","theme","size","value","Date","time","hour12","year","month","day","hour","minute","intl","dispatch","items","state","admin_log","index","map","i","get","String","hasMore","total","count","_useState","useState","_useState2","isLoading","setIsLoading","_useState3","_useState4","lastPage","setLastPage","showLoading","useEffect","then","catch","label","formatMessage","scrollKey","onLoadMore","page","item","id"],"sourceRoot":""}