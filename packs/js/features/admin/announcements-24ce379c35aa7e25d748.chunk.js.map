{"version":3,"file":"packs/js/features/admin/announcements-24ce379c35aa7e25d748.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/admin/announcements.tsx","webpack://soapbox/./app/soapbox/features/ui/components/modals/edit-announcement-modal.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.map.js\";import React,{useEffect}from'react';import{FormattedDate,FormattedMessage,defineMessages,useIntl}from'react-intl';import{deleteAnnouncement,fetchAdminAnnouncements,initAnnouncementModal}from'soapbox/actions/admin';import{openModal}from'soapbox/actions/modals';import ScrollableList from'soapbox/components/scrollable-list';import{Button,Column,HStack,Stack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({heading:{\"id\":\"column.admin.announcements\",\"defaultMessage\":\"Announcements\"},deleteConfirm:{\"id\":\"confirmations.admin.delete_announcement.confirm\",\"defaultMessage\":\"Delete\"},deleteHeading:{\"id\":\"confirmations.admin.delete_announcement.heading\",\"defaultMessage\":\"Delete announcement\"},deleteMessage:{\"id\":\"confirmations.admin.delete_announcement.message\",\"defaultMessage\":\"Are you sure you want to delete the announcement?\"}});var Announcement=function Announcement(_ref){var announcement=_ref.announcement;var intl=useIntl();var dispatch=useAppDispatch();var handleEditAnnouncement=function handleEditAnnouncement(announcement){return function(){dispatch(initAnnouncementModal(announcement));};};var handleDeleteAnnouncement=function handleDeleteAnnouncement(id){return function(){dispatch(openModal('CONFIRM',{heading:intl.formatMessage(messages.deleteHeading),message:intl.formatMessage(messages.deleteMessage),confirm:intl.formatMessage(messages.deleteConfirm),onConfirm:function onConfirm(){return dispatch(deleteAnnouncement(id));}}));};};return/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg bg-gray-100 p-4 dark:bg-primary-800\"},announcement.id,/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{dangerouslySetInnerHTML:{__html:announcement.contentHtml}}),(announcement.starts_at||announcement.ends_at||announcement.all_day)&&/*#__PURE__*/_jsx(HStack,{space:2,wrap:true},void 0,announcement.starts_at&&/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",size:\"sm\",weight:\"medium\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.announcements.starts_at\",defaultMessage:\"Starts at:\"})),' ',/*#__PURE__*/_jsx(FormattedDate,{value:announcement.starts_at,year:\"2-digit\",month:\"short\",day:\"2-digit\",weekday:\"short\"})),announcement.ends_at&&/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",size:\"sm\",weight:\"medium\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.announcements.ends_at\",defaultMessage:\"Ends at:\"})),' ',/*#__PURE__*/_jsx(FormattedDate,{value:announcement.ends_at,year:\"2-digit\",month:\"short\",day:\"2-digit\",weekday:\"short\"})),announcement.all_day&&/*#__PURE__*/_jsx(Text,{weight:\"medium\",size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.announcements.all_day\",defaultMessage:\"All day\"}))),/*#__PURE__*/_jsx(HStack,{justifyContent:\"end\",space:2},void 0,/*#__PURE__*/_jsx(Button,{theme:\"primary\",onClick:handleEditAnnouncement(announcement)},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.announcements.edit\",defaultMessage:\"Edit\"})),/*#__PURE__*/_jsx(Button,{theme:\"primary\",onClick:handleDeleteAnnouncement(announcement.id)},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.announcements.delete\",defaultMessage:\"Delete\"})))));};var Announcements=function Announcements(){var intl=useIntl();var dispatch=useAppDispatch();var announcements=useAppSelector(function(state){return state.admin_announcements.items;});var isLoading=useAppSelector(function(state){return state.admin_announcements.isLoading;});useEffect(function(){dispatch(fetchAdminAnnouncements());},[]);var handleCreateAnnouncement=function handleCreateAnnouncement(){dispatch(initAnnouncementModal());};var emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.admin.announcements\",defaultMessage:\"There are no announcements yet.\"});return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(Stack,{className:\"gap-4\"},void 0,/*#__PURE__*/_jsx(Button,{className:\"sm:w-fit sm:self-end\",icon:require('@tabler/icons/plus.svg'),onClick:handleCreateAnnouncement,theme:\"secondary\",block:true},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.announcements.action\",defaultMessage:\"Create announcement\"})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"announcements\",emptyMessage:emptyMessage,itemClassName:\"py-3 first:pt-0 last:pb-0\",isLoading:isLoading,showLoading:isLoading&&!announcements.count()},void 0,announcements.map(function(announcement){return/*#__PURE__*/_jsx(Announcement,{announcement:announcement},announcement.id);}))));};export default Announcements;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{FormattedMessage,defineMessages,useIntl}from'react-intl';import{changeAnnouncementAllDay,changeAnnouncementContent,changeAnnouncementEndTime,changeAnnouncementStartTime,handleCreateAnnouncement}from'soapbox/actions/admin';import{closeModal}from'soapbox/actions/modals';import{Form,FormGroup,HStack,Modal,Stack,Text,Textarea,Toggle}from'soapbox/components/ui';import BundleContainer from'soapbox/features/ui/containers/bundle-container';import{DatePicker}from'soapbox/features/ui/util/async-components';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({save:{\"id\":\"admin.edit_announcement.save\",\"defaultMessage\":\"Save\"},announcementContentPlaceholder:{\"id\":\"admin.edit_announcement.fields.content_placeholder\",\"defaultMessage\":\"Announcement content\"},announcementStartTimePlaceholder:{\"id\":\"admin.edit_announcement.fields.start_time_placeholder\",\"defaultMessage\":\"Announcement starts on\\u2026\"},announcementEndTimePlaceholder:{\"id\":\"admin.edit_announcement.fields.end_time_placeholder\",\"defaultMessage\":\"Announcement ends on\\u2026\"}});var EditAnnouncementModal=function EditAnnouncementModal(_ref){var onClose=_ref.onClose;var dispatch=useAppDispatch();var intl=useIntl();var id=useAppSelector(function(state){return state.admin_announcements.form.id;});var content=useAppSelector(function(state){return state.admin_announcements.form.content;});var startTime=useAppSelector(function(state){return state.admin_announcements.form.starts_at;});var endTime=useAppSelector(function(state){return state.admin_announcements.form.ends_at;});var allDay=useAppSelector(function(state){return state.admin_announcements.form.all_day;});var onChangeContent=function onChangeContent(_ref2){var target=_ref2.target;return dispatch(changeAnnouncementContent(target.value));};var onChangeStartTime=function onChangeStartTime(date){return dispatch(changeAnnouncementStartTime(date));};var onChangeEndTime=function onChangeEndTime(date){return dispatch(changeAnnouncementEndTime(date));};var onChangeAllDay=function onChangeAllDay(_ref3){var target=_ref3.target;return dispatch(changeAnnouncementAllDay(target.checked));};var onClickClose=function onClickClose(){onClose('EDIT_ANNOUNCEMENT');};var handleSubmit=function handleSubmit(){return dispatch(handleCreateAnnouncement()).then(function(){return dispatch(closeModal('EDIT_ANNOUNCEMENT'));});};return/*#__PURE__*/_jsx(Modal,{onClose:onClickClose,title:id?/*#__PURE__*/_jsx(FormattedMessage,{id:\"column.admin.edit_announcement\",defaultMessage:\"Edit announcement\"}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"column.admin.create_announcement\",defaultMessage:\"Create announcement\"}),confirmationAction:handleSubmit,confirmationText:intl.formatMessage(messages.save)},void 0,/*#__PURE__*/_jsx(Form,{},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.edit_announcement.fields.content_label\",defaultMessage:\"Content\"})},void 0,/*#__PURE__*/_jsx(Textarea,{autoComplete:\"off\",placeholder:intl.formatMessage(messages.announcementContentPlaceholder),value:content,onChange:onChangeContent})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.edit_announcement.fields.start_time_label\",defaultMessage:\"Start date\"})},void 0,/*#__PURE__*/_jsx(BundleContainer,{fetchComponent:DatePicker},void 0,function(Component){return/*#__PURE__*/_jsx(Component,{showTimeSelect:true,dateFormat:\"MMMM d, yyyy h:mm aa\",timeIntervals:15,wrapperClassName:\"react-datepicker-wrapper\",placeholderText:intl.formatMessage(messages.announcementStartTimePlaceholder),selected:startTime,onChange:onChangeStartTime,isClearable:true});})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.edit_announcement.fields.end_time_label\",defaultMessage:\"End date\"})},void 0,/*#__PURE__*/_jsx(BundleContainer,{fetchComponent:DatePicker},void 0,function(Component){return/*#__PURE__*/_jsx(Component,{showTimeSelect:true,dateFormat:\"MMMM d, yyyy h:mm aa\",timeIntervals:15,wrapperClassName:\"react-datepicker-wrapper\",placeholderText:intl.formatMessage(messages.announcementEndTimePlaceholder),selected:endTime,onChange:onChangeEndTime,isClearable:true});})),/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:2},void 0,/*#__PURE__*/_jsx(Toggle,{icons:false,checked:allDay,onChange:onChangeAllDay}),/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.edit_announcement.fields.all_day_label\",defaultMessage:\"All-day event\"})),/*#__PURE__*/_jsx(Text,{size:\"xs\",tag:\"span\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.edit_announcement.fields.all_day_hint\",defaultMessage:\"When checked, only the dates of the time range will be displayed\"}))))));};export default EditAnnouncementModal;"],"names":["messages","heading","deleteConfirm","deleteHeading","deleteMessage","Announcement","_ref","id","announcement","intl","dispatch","className","space","dangerouslySetInnerHTML","__html","contentHtml","starts_at","ends_at","all_day","wrap","size","tag","weight","defaultMessage","value","year","month","day","weekday","justifyContent","theme","onClick","handleEditAnnouncement","formatMessage","message","confirm","onConfirm","announcements","state","admin_announcements","items","isLoading","useEffect","emptyMessage","label","icon","block","scrollKey","itemClassName","showLoading","count","map","save","announcementContentPlaceholder","announcementStartTimePlaceholder","announcementEndTimePlaceholder","onClose","form","content","startTime","endTime","allDay","onChangeStartTime","date","onChangeEndTime","title","confirmationAction","then","confirmationText","labelText","autoComplete","placeholder","onChange","_ref2","target","fetchComponent","Component","showTimeSelect","dateFormat","timeIntervals","wrapperClassName","placeholderText","selected","isClearable","alignItems","icons","checked","_ref3"],"sourceRoot":""}