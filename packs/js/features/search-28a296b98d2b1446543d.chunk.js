"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[70],{769:function(e,s,t){t.r(s),t.d(s,{default:function(){return z}});var a=t(2057),r=t(2058),n=t(2059),u=t(2),o=t(1117),c=(t(6),t(51),t(9),t(0),t(4),t(90),t(5),t(7),t(418)),i=t(1),d=t(2077),l=t(312),m=t(1176),f=t(1122),h=t(184),g=t(57),p=t(82),v=t(2075),Z=t(2069),y=t(1129),M=t(3),b=t(38),C=["id"],x=function(e){var s=e.id,t=(0,Z.Z)(e,C),a=(0,i.useCallback)((0,b.e6)(),[]),r=(0,M.CG)((function(e){return a(e,s)}));return r?i.createElement(y.Z,(0,v.Z)({group:r},t)):null},_=t(890),k=t(1130),G=t(1131),N=t(2091),E=function(){var e=(0,N.lv)(15,30);return(0,a.Z)("div",{className:"animate-pulse text-primary-200 dark:text-primary-700"},void 0,(0,a.Z)("p",{},void 0,(0,N._4)(e)))},L=t(887),w=(0,r.vU)({accounts:{id:"search_results.accounts",defaultMessage:"People"},statuses:{id:"search_results.statuses",defaultMessage:"Posts"},groups:{id:"search_results.groups",defaultMessage:"Groups"},hashtags:{id:"search_results.hashtags",defaultMessage:"Hashtags"}}),H=function(){var e,s,r=(0,i.useRef)(null),o=(0,n.Z)(),v=(0,M.TL)(),Z=(0,M.hz)(),y=(0,M.CG)((function(e){return e.search.submittedValue})),b=(0,M.CG)((function(e){return e.search.results})),C=(0,M.CG)((function(e){return e.suggestions.items})),N=(0,M.CG)((function(e){return e.trending_statuses.items})),H=(0,M.CG)((function(e){return e.trends.items})),T=(0,M.CG)((function(e){return e.search.submitted})),z=(0,M.CG)((function(e){return e.search.filter})),U=(0,M.CG)((function(e){return e.search.accountId})),I=(0,M.CG)((function(e){var s;return null===(s=e.accounts.get(U))||void 0===s?void 0:s.acct})),S=function(e){return v((0,l.Tv)(e))},D=function(e){var s;return null===(s=J)||void 0===s?void 0:s.keySeq().findIndex((function(s){return s===e}))},q=function(e){if(J){var s=D(e)-1;P(s)}},F=function(e){if(J){var s=D(e)+1;P(s)}},P=function(e){var s;null===(s=r.current)||void 0===s||s.scrollIntoView({index:e,behavior:"smooth",done:function(){var s=document.querySelector('#search-results [data-index="'.concat(e,'"] .focusable'));null==s||s.focus()}})};(0,i.useEffect)((function(){v((0,m.AJ)())}),[]);var V,A,J,K,Q=!1,R=L.Z;return"accounts"===z&&(Q=b.accountsHasMore,V=b.accountsLoaded,R=k.Z,b.accounts&&b.accounts.size>0?s=b.accounts.map((function(e){return(0,a.Z)(p.Z,{id:e},e)})):T||!C||C.isEmpty()?V&&(A=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.accounts",defaultMessage:'There are no people results for "{term}"',values:{term:y}}))):s=C.map((function(e){return(0,a.Z)(p.Z,{id:e.account},e.account)}))),"statuses"===z&&(Q=b.statusesHasMore,V=b.statusesLoaded,b.statuses&&b.statuses.size>0?(s=b.statuses.map((function(e){return(0,a.Z)(_.Z,{id:e,onMoveUp:q,onMoveDown:F},e)})),J=b.statuses):T||!N||N.isEmpty()?V&&(A=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.statuses",defaultMessage:'There are no posts results for "{term}"',values:{term:y}}))):(s=N.map((function(e){return(0,a.Z)(_.Z,{id:e,onMoveUp:q,onMoveDown:F},e)})),J=N)),"groups"===z&&(Q=b.groupsHasMore,V=b.groupsLoaded,R=G.Z,b.groups&&b.groups.size>0?(s=b.groups.map((function(e){return(0,a.Z)(x,{id:e})})),J=b.groups):T||!N||N.isEmpty()?V&&(A=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.groups",defaultMessage:'There are no groups results for "{term}"',values:{term:y}}))):s=null),"hashtags"===z&&(Q=b.hashtagsHasMore,V=b.hashtagsLoaded,R=E,b.hashtags&&b.hashtags.size>0?s=b.hashtags.map((function(e){return(0,a.Z)(f.Z,{hashtag:e},e.name)})):T||!C||C.isEmpty()?V&&(A=(0,a.Z)("div",{className:"empty-column-indicator"},void 0,(0,a.Z)(d.Z,{id:"empty_column.search.hashtags",defaultMessage:'There are no hashtags results for "{term}"',values:{term:y}}))):s=H.map((function(e){return(0,a.Z)(f.Z,{hashtag:e},e.name)}))),i.createElement(i.Fragment,null,U?(0,a.Z)(u.Ug,{className:"mb-4 border-b border-solid border-gray-200 px-2 pb-4 dark:border-gray-800",space:2},void 0,(0,a.Z)(h.Z,{iconClassName:"h-5 w-5",src:t(80),onClick:function(){return v((0,l.DH)(null))}}),(0,a.Z)(u.xv,{},void 0,(0,a.Z)(d.Z,{id:"search_results.filter_message",defaultMessage:"You are searching for posts from @{acct}.",values:{acct:I}}))):((K=[]).push({text:o.formatMessage(w.accounts),action:function(){return S("accounts")},name:"accounts"},{text:o.formatMessage(w.statuses),action:function(){return S("statuses")},name:"statuses"}),Z.groups&&K.push({text:o.formatMessage(w.groups),action:function(){return S("groups")},name:"groups"}),K.push({text:o.formatMessage(w.hashtags),action:function(){return S("hashtags")},name:"hashtags"}),(0,a.Z)(u.mQ,{items:K,activeItem:z})),A||i.createElement(g.Z,{id:"search-results",ref:r,key:z,scrollKey:"".concat(z,":").concat(y),isLoading:T&&!V,showLoading:T&&!V&&(null===(e=s)||void 0===e?void 0:e.isEmpty()),hasMore:Q,onLoadMore:function(){return v((0,l.i9)(z))},placeholderComponent:R,placeholderCount:20,className:(0,c.default)({"divide-gray-200 dark:divide-gray-800 divide-solid divide-y":"statuses"===z}),itemClassName:(0,c.default)({"pb-4":"accounts"===z,"pb-3":"hashtags"===z})},s||[]))},T=(0,r.vU)({heading:{id:"column.search",defaultMessage:"Search"}}),z=function(){var e=(0,n.Z)();return(0,a.Z)(u.sg,{label:e.formatMessage(T.heading)},void 0,(0,a.Z)("div",{className:"space-y-4"},void 0,(0,a.Z)(o.Z,{autoFocus:!0,autoSubmit:!0}),(0,a.Z)(H,{})))}}}]);
//# sourceMappingURL=search-28a296b98d2b1446543d.chunk.js.map