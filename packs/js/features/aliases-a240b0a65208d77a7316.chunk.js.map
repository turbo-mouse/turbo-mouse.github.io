{"version":3,"file":"packs/js/features/aliases-a240b0a65208d77a7316.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/aliases/components/account.tsx","webpack://soapbox/./app/soapbox/features/aliases/components/search.tsx","webpack://soapbox/./app/soapbox/features/aliases/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import\"core-js/modules/es.string.includes.js\";import React,{useCallback}from'react';import{defineMessages,useIntl}from'react-intl';import{addToAliases}from'soapbox/actions/aliases';import AccountComponent from'soapbox/components/account';import IconButton from'soapbox/components/icon-button';import{HStack}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures}from'soapbox/hooks';import{makeGetAccount}from'soapbox/selectors';var messages=defineMessages({add:{\"id\":\"aliases.account.add\",\"defaultMessage\":\"Create alias\"}});var Account=function Account(_ref){var accountId=_ref.accountId,aliases=_ref.aliases;var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var getAccount=useCallback(makeGetAccount(),[]);var account=useAppSelector(function(state){return getAccount(state,accountId);});var me=useAppSelector(function(state){return state.me;});var added=useAppSelector(function(state){var account=getAccount(state,accountId);var apId=account===null||account===void 0?void 0:account.pleroma.get('ap_id');var name=features.accountMoving?account===null||account===void 0?void 0:account.acct:apId;return aliases.includes(name);});var handleOnAdd=function handleOnAdd(){return dispatch(addToAliases(account));};if(!account)return null;var button;if(!added&&accountId!==me){button=/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/plus.svg'),iconClassName:\"h-5 w-5\",title:intl.formatMessage(messages.add),onClick:handleOnAdd});}return/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\",justifyContent:\"between\",className:\"p-2.5\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"w-full\"},void 0,/*#__PURE__*/_jsx(AccountComponent,{account:account,withRelationship:false})),button);};export default Account;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.search.js\";import clsx from'clsx';import React from'react';import{defineMessages,useIntl}from'react-intl';import{fetchAliasesSuggestions,clearAliasesSuggestions,changeAliasesSuggestions}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import{Button}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({search:{\"id\":\"aliases.search\",\"defaultMessage\":\"Search your old account\"},searchTitle:{\"id\":\"tabs_bar.search\",\"defaultMessage\":\"Search\"}});var Search=function Search(){var dispatch=useAppDispatch();var intl=useIntl();var value=useAppSelector(function(state){return state.aliases.suggestions.value;});var handleChange=function handleChange(e){dispatch(changeAliasesSuggestions(e.target.value));};var handleKeyUp=function handleKeyUp(e){if(e.keyCode===13){dispatch(fetchAliasesSuggestions(value));}};var handleSubmit=function handleSubmit(){dispatch(fetchAliasesSuggestions(value));};var handleClear=function handleClear(){dispatch(clearAliasesSuggestions());};var hasValue=value.length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1\"},void 0,/*#__PURE__*/_jsx(\"label\",{className:\"relative grow\"},void 0,/*#__PURE__*/_jsx(\"span\",{style:{display:'none'}},void 0,intl.formatMessage(messages.search)),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full rounded-full focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500 sm:text-sm\",type:\"text\",value:value,onChange:handleChange,onKeyUp:handleKeyUp,placeholder:intl.formatMessage(messages.search)}),/*#__PURE__*/_jsx(\"div\",{role:\"button\",tabIndex:hasValue?0:-1,className:\"search__icon\",onClick:handleClear},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/backspace.svg'),\"aria-label\":intl.formatMessage(messages.search),className:clsx('svg-icon--backspace',{active:hasValue})}))),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit},void 0,intl.formatMessage(messages.searchTitle)));};export default Search;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.map.js\";import React,{useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchAliases,removeFromAliases}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable-list';import{CardHeader,CardTitle,Column,HStack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures,useOwnAccount}from'soapbox/hooks';import Account from'./components/account';import Search from'./components/search';var messages=defineMessages({heading:{\"id\":\"column.aliases\",\"defaultMessage\":\"Account aliases\"},subheading_add_new:{\"id\":\"column.aliases.subheading_add_new\",\"defaultMessage\":\"Add New Alias\"},create_error:{\"id\":\"column.aliases.create_error\",\"defaultMessage\":\"Error creating alias\"},delete_error:{\"id\":\"column.aliases.delete_error\",\"defaultMessage\":\"Error deleting alias\"},subheading_aliases:{\"id\":\"column.aliases.subheading_aliases\",\"defaultMessage\":\"Current aliases\"},delete:{\"id\":\"column.aliases.delete\",\"defaultMessage\":\"Delete\"}});var Aliases=function Aliases(){var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var account=useOwnAccount();var aliases=useAppSelector(function(state){if(features.accountMoving){return state.aliases.aliases.items;}else{return account.pleroma.get('also_known_as');}});var searchAccountIds=useAppSelector(function(state){return state.aliases.suggestions.items;});var loaded=useAppSelector(function(state){return state.aliases.suggestions.loaded;});useEffect(function(){dispatch(fetchAliases);},[]);var handleFilterDelete=function handleFilterDelete(e){dispatch(removeFromAliases(e.currentTarget.dataset.value));};var emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases\",defaultMessage:\"You haven't created any account alias yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"aliases-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Search,{}),loaded&&searchAccountIds.size===0?/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases.suggestions\",defaultMessage:\"There are no account suggestions available for the provided term.\"})):/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts mb-4\"},void 0,searchAccountIds.map(function(accountId){return/*#__PURE__*/_jsx(Account,{accountId:accountId,aliases:aliases},accountId);})),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_aliases)})),/*#__PURE__*/_jsx(\"div\",{className:\"aliases-settings-panel\"},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"aliases\",emptyMessage:emptyMessage},void 0,aliases.map(function(alias,i){return/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",justifyContent:\"between\",space:1,className:\"p-2\"},i,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.account_label\",defaultMessage:\"Old account:\"})),' ',/*#__PURE__*/_jsx(Text,{tag:\"span\"},void 0,alias)),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",role:\"button\",tabIndex:0,onClick:handleFilterDelete,\"data-value\":alias,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"mr-1.5\",src:require('@tabler/icons/x.svg')}),/*#__PURE__*/_jsx(Text,{weight:\"bold\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.aliases_list_delete\",defaultMessage:\"Unlink alias\"}))));}))));};export default Aliases;"],"names":["messages","add","_ref","button","accountId","aliases","intl","useIntl","dispatch","features","getAccount","useCallback","account","state","me","added","apId","pleroma","get","name","accountMoving","acct","includes","src","iconClassName","title","formatMessage","onClick","space","alignItems","justifyContent","className","withRelationship","search","searchTitle","value","suggestions","hasValue","length","style","display","type","onChange","e","target","onKeyUp","keyCode","placeholder","role","tabIndex","active","heading","subheading_add_new","create_error","delete_error","subheading_aliases","delete","items","searchAccountIds","loaded","useEffect","handleFilterDelete","currentTarget","dataset","emptyMessage","id","defaultMessage","label","size","map","scrollKey","alias","i","tag","theme","weight"],"sourceRoot":""}