{"version":3,"file":"packs/js/features/directory-ba257dd365c7020154df.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/directory/components/account-card.tsx","webpack://soapbox/./app/soapbox/features/directory/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import clsx from'clsx';import React from'react';import{FormattedMessage}from'react-intl';import{getSettings}from'soapbox/actions/settings';import Account from'soapbox/components/account';import Badge from'soapbox/components/badge';import RelativeTimestamp from'soapbox/components/relative-timestamp';import{Stack,Text}from'soapbox/components/ui';import ActionButton from'soapbox/features/ui/components/action-button';import{useAppSelector}from'soapbox/hooks';import{makeGetAccount}from'soapbox/selectors';import{shortNumberFormat}from'soapbox/utils/numbers';var getAccount=makeGetAccount();var AccountCard=function AccountCard(_ref){var _account$relationship;var id=_ref.id;var me=useAppSelector(function(state){return state.me;});var account=useAppSelector(function(state){return getAccount(state,id);});var autoPlayGif=useAppSelector(function(state){return getSettings(state).get('autoPlayGif');});if(!account)return null;var followedBy=me!==account.id&&((_account$relationship=account.relationship)===null||_account$relationship===void 0?void 0:_account$relationship.followed_by);return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow dark:divide-primary-700 dark:bg-primary-800\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative\"},void 0,followedBy&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2.5 left-2.5\"},void 0,/*#__PURE__*/_jsx(Badge,{slug:\"opaque\",title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.follows_you\",defaultMessage:\"Follows you\"})})),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2.5 right-2.5\"},void 0,/*#__PURE__*/_jsx(ActionButton,{account:account,small:true})),/*#__PURE__*/_jsx(\"img\",{src:autoPlayGif?account.header:account.header_static,alt:\"\",className:\"h-32 w-full rounded-t-lg object-cover\"})),/*#__PURE__*/_jsx(Stack,{space:4,className:\"p-3\"},void 0,/*#__PURE__*/_jsx(Account,{account:account,withRelationship:false}),/*#__PURE__*/_jsx(Text,{truncate:true,align:\"left\",className:clsx('[&_br]:hidden [&_p]:hidden [&_p:first-child]:inline [&_p:first-child]:truncate'),dangerouslySetInnerHTML:{__html:account.note_emojified||'&nbsp;'}})),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-1 py-4\"},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{theme:\"primary\",size:\"md\",weight:\"medium\"},void 0,shortNumberFormat(account.statuses_count)),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.posts\",defaultMessage:\"Posts\"}))),/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{theme:\"primary\",size:\"md\",weight:\"medium\"},void 0,shortNumberFormat(account.followers_count)),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.followers\",defaultMessage:\"Followers\"}))),/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{theme:\"primary\",size:\"md\",weight:\"medium\"},void 0,account.last_status_at===null?/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.never_active\",defaultMessage:\"Never\"}):/*#__PURE__*/_jsx(RelativeTimestamp,{theme:\"inherit\",timestamp:account.last_status_at})),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.last_status\",defaultMessage:\"Last active\"})))));};export default AccountCard;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.search.js\";import\"core-js/modules/es.array.iterator.js\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.string.iterator.js\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url-search-params.js\";import\"core-js/modules/es.array.map.js\";import clsx from'clsx';import React,{useEffect,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{useLocation}from'react-router-dom';import{fetchDirectory,expandDirectory}from'soapbox/actions/directory';import LoadMore from'soapbox/components/load-more';import{Column,RadioButton,Stack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures,useInstance}from'soapbox/hooks';import AccountCard from'./components/account-card';var messages=defineMessages({title:{\"id\":\"column.directory\",\"defaultMessage\":\"Browse profiles\"},recentlyActive:{\"id\":\"directory.recently_active\",\"defaultMessage\":\"Recently active\"},newArrivals:{\"id\":\"directory.new_arrivals\",\"defaultMessage\":\"New arrivals\"},local:{\"id\":\"directory.local\",\"defaultMessage\":\"From {domain} only\"},federated:{\"id\":\"directory.federated\",\"defaultMessage\":\"From known fediverse\"}});var Directory=function Directory(){var intl=useIntl();var dispatch=useAppDispatch();var _useLocation=useLocation(),search=_useLocation.search;var params=new URLSearchParams(search);var instance=useInstance();var features=useFeatures();var accountIds=useAppSelector(function(state){return state.user_lists.directory.items;});var isLoading=useAppSelector(function(state){return state.user_lists.directory.isLoading;});var _useState=useState(params.get('order')||'active'),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];var _useState3=useState(!!params.get('local')),_useState4=_slicedToArray(_useState3,2),local=_useState4[0],setLocal=_useState4[1];useEffect(function(){dispatch(fetchDirectory({order:order||'active',local:local||false}));},[order,local]);var handleChangeOrder=function handleChangeOrder(e){setOrder(e.target.value);};var handleChangeLocal=function handleChangeLocal(e){setLocal(e.target.value==='1');};var handleLoadMore=function handleLoadMore(){dispatch(expandDirectory({order:order||'active',local:local||false}));};return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title)},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\"},void 0,\"Display filter\"),/*#__PURE__*/_jsx(\"fieldset\",{className:\"mt-3\"},void 0,/*#__PURE__*/_jsx(\"legend\",{className:\"sr-only\"},void 0,\"Display filter\"),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\"},void 0,/*#__PURE__*/_jsx(RadioButton,{name:\"order\",value:\"active\",label:intl.formatMessage(messages.recentlyActive),checked:order==='active',onChange:handleChangeOrder}),/*#__PURE__*/_jsx(RadioButton,{name:\"order\",value:\"new\",label:intl.formatMessage(messages.newArrivals),checked:order==='new',onChange:handleChangeOrder})))),features.federating&&/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\"},void 0,\"Fediverse filter\"),/*#__PURE__*/_jsx(\"fieldset\",{className:\"mt-3\"},void 0,/*#__PURE__*/_jsx(\"legend\",{className:\"sr-only\"},void 0,\"Fediverse filter\"),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\"},void 0,/*#__PURE__*/_jsx(RadioButton,{name:\"local\",value:\"1\",label:intl.formatMessage(messages.local,{domain:instance.title}),checked:local,onChange:handleChangeLocal}),/*#__PURE__*/_jsx(RadioButton,{name:\"local\",value:\"0\",label:intl.formatMessage(messages.federated),checked:!local,onChange:handleChangeLocal}))))),/*#__PURE__*/_jsx(\"div\",{className:clsx({'grid grid-cols-1 sm:grid-cols-2 gap-2.5':true,'opacity-30':isLoading})},void 0,accountIds.map(function(accountId){return/*#__PURE__*/_jsx(AccountCard,{id:accountId},accountId);})),/*#__PURE__*/_jsx(LoadMore,{onClick:handleLoadMore,disabled:isLoading})));};export default Directory;"],"names":["getAccount","_ref","_account$relationship","id","me","state","account","autoPlayGif","get","followedBy","relationship","followed_by","className","slug","title","defaultMessage","small","src","header","header_static","alt","space","withRelationship","truncate","align","dangerouslySetInnerHTML","__html","note_emojified","theme","size","weight","statuses_count","followers_count","last_status_at","timestamp","messages","recentlyActive","newArrivals","local","federated","intl","useIntl","dispatch","search","params","URLSearchParams","instance","features","accountIds","user_lists","directory","items","isLoading","_useState","useState","_useState2","order","setOrder","_useState3","_useState4","setLocal","useEffect","handleChangeOrder","e","target","value","handleChangeLocal","label","formatMessage","name","checked","onChange","federating","domain","map","accountId","onClick","disabled"],"sourceRoot":""}