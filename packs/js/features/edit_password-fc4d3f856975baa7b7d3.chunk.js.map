{"version":3,"file":"packs/js/features/edit_password-fc4d3f856975baa7b7d3.chunk.js","mappings":"yRAA0wB,SAASA,EAAQC,EAAOC,GAAgB,IAAIC,EAAKC,OAAOD,KAAKF,GAAQ,GAAGG,OAAOC,sBAAsB,CAAC,IAAIC,EAAQF,OAAOC,sBAAsBJ,GAAQC,IAAiBI,EAAQA,EAAQC,QAAO,SAASC,GAAK,OAAOJ,OAAOK,yBAAyBR,EAAOO,GAAKE,UAAW,KAAIP,EAAKQ,KAAKC,MAAMT,EAAKG,E,CAAU,OAAOH,CAAK,CAAC,SAASU,EAAcC,GAAQ,IAAI,IAAIC,EAAE,EAAEA,EAAEC,UAAUC,OAAOF,IAAI,CAAC,IAAIG,EAAO,MAAMF,UAAUD,GAAGC,UAAUD,GAAG,GAAGA,EAAE,EAAEf,EAAQI,OAAOc,IAAQ,GAAIC,SAAQ,SAASC,IAAK,OAAgBN,EAAOM,EAAIF,EAAOE,GAAM,IAAGhB,OAAOiB,0BAA0BjB,OAAOkB,iBAAiBR,EAAOV,OAAOiB,0BAA0BH,IAASlB,EAAQI,OAAOc,IAASC,SAAQ,SAASC,GAAKhB,OAAOmB,eAAeT,EAAOM,EAAIhB,OAAOK,yBAAyBS,EAAOE,GAAM,G,CAAI,OAAON,CAAO,CAAuZ,IAAIU,GAAS,QAAe,CAACC,sBAAsB,CAAC,GAAK,mCAAmC,eAAiB,kCAAkCC,mBAAmB,CAAC,GAAK,gCAAgC,eAAiB,2BAA2BC,sBAAsB,CAAC,GAAK,qCAAqC,eAAiB,oBAAoBC,sBAAsB,CAAC,GAAK,qCAAqC,eAAiB,gBAAgBC,uBAAuB,CAAC,GAAK,8CAA8C,eAAiB,wBAAwBC,OAAO,CAAC,GAAK,uBAAuB,eAAiB,mBAAmBC,OAAO,CAAC,GAAK,kBAAkB,eAAiB,gBAAgBC,OAAO,CAAC,GAAK,gBAAgB,eAAiB,YAAgBC,EAAa,CAACC,gBAAgB,GAAGC,YAAY,GAAGC,wBAAwB,IAA66F,UAAx5F,WAAwB,IAAIC,GAAK,SAAcC,GAAS,UAAgDC,GAAd,UAAgDA,qBAAyBC,EAAgB,WAAeP,GAAcQ,GAAiB,OAAeD,EAAgB,GAAGE,EAAMD,EAAiB,GAAGE,EAASF,EAAiB,GAAOG,EAAiB,YAAe,GAAOC,GAAiB,OAAeD,EAAiB,GAAGE,EAAUD,EAAiB,GAAGE,EAAWF,EAAiB,GAAOG,EAAiB,YAAeT,GAAiCU,GAAiB,OAAeD,EAAiB,GAAGE,EAAiBD,EAAiB,GAAGE,EAAoBF,EAAiB,GAAOf,EAAgBQ,EAAMR,gBAAgBC,EAAYO,EAAMP,YAAYC,EAAwBM,EAAMN,wBAA4BgB,EAAW,WAAsB,OAAOT,EAASV,EAAc,EAAMoB,EAAkB,eAAkB,SAASC,GAAOA,EAAMC,UAAUZ,GAAS,SAASa,GAAW,OAAO3C,EAAcA,EAAc,CAAC,EAAE2C,GAAW,CAAC,GAAE,OAAgB,CAAC,EAAEF,EAAMxC,OAAO2C,KAAKH,EAAMxC,OAAO4C,OAAQ,GAAG,GAAE,IAAQC,EAAa,eAAkB,WAAWZ,GAAW,GAAMT,GAAS,QAAeJ,EAAgBC,EAAYC,IAA0BwB,MAAK,WAAWR,IAAa,YAAcf,EAAKwB,cAAcrC,EAASC,uBAAwB,IAAGqC,SAAQ,WAAWf,GAAW,EAAO,IAAGgB,OAAM,WAAWX,IAAa,UAAYf,EAAKwB,cAAcrC,EAASE,oBAAqB,GAAG,GAAE,CAACQ,EAAgBC,EAAYC,EAAwBE,EAASD,IAAO,OAAmB,OAAK,KAAO,CAAC2B,MAAM3B,EAAKwB,cAAcrC,EAASM,QAAQmC,aAAY,EAAKC,YAAW,QAAO,GAAoB,OAAK,KAAK,CAACC,QAAQ,gBAAW,GAAoB,OAAK,KAAW,CAACC,SAAS,kBAAa,GAAoB,OAAK,KAAU,CAACC,MAAMhC,EAAKwB,cAAcrC,EAASM,YAAwB,OAAK,KAAS,CAAC,OAAE,GAAoB,OAAK,KAAK,CAACwC,SAASX,QAAc,GAAoB,OAAK,KAAU,CAACY,UAAUlC,EAAKwB,cAAcrC,EAASG,6BAAwB,GAAoB,OAAK,KAAM,CAAC6C,KAAK,WAAWf,KAAK,kBAAkBgB,SAASpB,EAAkBK,MAAMxB,MAAgC,OAAK,KAAU,CAACqC,UAAUlC,EAAKwB,cAAcrC,EAASI,6BAAwB,GAAoB,OAAK,KAAM,CAAC4C,KAAK,WAAWf,KAAK,cAAcgB,SAASpB,EAAkBK,MAAMvB,IAAcI,IAAmC,OAAK,IAAkB,CAACmC,SAASvC,EAAYsC,SAAStB,MAAoC,OAAK,KAAU,CAACoB,UAAUlC,EAAKwB,cAAcrC,EAASK,8BAAyB,GAAoB,OAAK,KAAM,CAAC2C,KAAK,WAAWf,KAAK,0BAA0BgB,SAASpB,EAAkBK,MAAMtB,MAAwC,OAAK,KAAY,CAAC,OAAE,GAAoB,OAAK,KAAO,CAACuC,GAAG,YAAYC,MAAM,iBAAY,EAAOvC,EAAKwB,cAAcrC,EAASQ,UAAsB,OAAK,KAAO,CAACwC,KAAK,SAASI,MAAM,UAAUC,SAAS/B,IAAYI,QAAkB,EAAOb,EAAKwB,cAAcrC,EAASO,aAAc,C","sources":["webpack://soapbox/./app/soapbox/features/edit-password/index.tsx"],"sourcesContent":["import\"core-js/modules/es.object.keys.js\";import\"core-js/modules/es.symbol.js\";import\"core-js/modules/es.array.filter.js\";import\"core-js/modules/es.object.get-own-property-descriptor.js\";import\"core-js/modules/es.array.push.js\";import\"core-js/modules/web.dom-collections.for-each.js\";import\"core-js/modules/es.object.get-own-property-descriptors.js\";import\"core-js/modules/es.object.define-properties.js\";import\"core-js/modules/es.object.define-property.js\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import\"core-js/modules/es.object.to-string.js\";import\"core-js/modules/es.promise.js\";import\"core-js/modules/es.promise.finally.js\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React from'react';import{defineMessages,useIntl}from'react-intl';import{changePassword}from'soapbox/actions/security';import{Button,Card,CardBody,CardHeader,CardTitle,Column,Form,FormActions,FormGroup,Input}from'soapbox/components/ui';import{useAppDispatch,useFeatures}from'soapbox/hooks';import toast from'soapbox/toast';import PasswordIndicator from'../verification/components/password-indicator';var messages=defineMessages({updatePasswordSuccess:{\"id\":\"security.update_password.success\",\"defaultMessage\":\"Password successfully updated.\"},updatePasswordFail:{\"id\":\"security.update_password.fail\",\"defaultMessage\":\"Update password failed.\"},oldPasswordFieldLabel:{\"id\":\"security.fields.old_password.label\",\"defaultMessage\":\"Current password\"},newPasswordFieldLabel:{\"id\":\"security.fields.new_password.label\",\"defaultMessage\":\"New password\"},confirmationFieldLabel:{\"id\":\"security.fields.password_confirmation.label\",\"defaultMessage\":\"New password (again)\"},header:{\"id\":\"edit_password.header\",\"defaultMessage\":\"Change Password\"},submit:{\"id\":\"security.submit\",\"defaultMessage\":\"Save changes\"},cancel:{\"id\":\"common.cancel\",\"defaultMessage\":\"Cancel\"}});var initialState={currentPassword:'',newPassword:'',newPasswordConfirmation:''};var EditPassword=function EditPassword(){var intl=useIntl();var dispatch=useAppDispatch();var _useFeatures=useFeatures(),passwordRequirements=_useFeatures.passwordRequirements;var _React$useState=React.useState(initialState),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setLoading=_React$useState4[1];var _React$useState5=React.useState(passwordRequirements?false:true),_React$useState6=_slicedToArray(_React$useState5,2),hasValidPassword=_React$useState6[0],setHasValidPassword=_React$useState6[1];var currentPassword=state.currentPassword,newPassword=state.newPassword,newPasswordConfirmation=state.newPasswordConfirmation;var resetState=function resetState(){return setState(initialState);};var handleInputChange=React.useCallback(function(event){event.persist();setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},event.target.name,event.target.value));});},[]);var handleSubmit=React.useCallback(function(){setLoading(true);dispatch(changePassword(currentPassword,newPassword,newPasswordConfirmation)).then(function(){resetState();toast.success(intl.formatMessage(messages.updatePasswordSuccess));}).finally(function(){setLoading(false);}).catch(function(){resetState();toast.error(intl.formatMessage(messages.updatePasswordFail));});},[currentPassword,newPassword,newPasswordConfirmation,dispatch,intl]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.header),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{backHref:\"/settings\"},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.header)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.oldPasswordFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"currentPassword\",onChange:handleInputChange,value:currentPassword})),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.newPasswordFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"newPassword\",onChange:handleInputChange,value:newPassword}),passwordRequirements&&/*#__PURE__*/_jsx(PasswordIndicator,{password:newPassword,onChange:setHasValidPassword})),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.confirmationFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"newPasswordConfirmation\",onChange:handleInputChange,value:newPasswordConfirmation})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{to:\"/settings\",theme:\"tertiary\"},void 0,intl.formatMessage(messages.cancel)),/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\",disabled:isLoading||!hasValidPassword},void 0,intl.formatMessage(messages.submit)))))));};export default EditPassword;"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","messages","updatePasswordSuccess","updatePasswordFail","oldPasswordFieldLabel","newPasswordFieldLabel","confirmationFieldLabel","header","submit","cancel","initialState","currentPassword","newPassword","newPasswordConfirmation","intl","dispatch","passwordRequirements","_React$useState","_React$useState2","state","setState","_React$useState3","_React$useState4","isLoading","setLoading","_React$useState5","_React$useState6","hasValidPassword","setHasValidPassword","resetState","handleInputChange","event","persist","prevState","name","value","handleSubmit","then","formatMessage","finally","catch","label","transparent","withHeader","variant","backHref","title","onSubmit","labelText","type","onChange","password","to","theme","disabled"],"sourceRoot":""}