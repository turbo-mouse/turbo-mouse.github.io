"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[4],{1433:function(e,t,n){n.r(t);var i=n(2057),a=(n(90),n(5),n(7),n(1)),o=n(2077),u=n(2050),s=n(43),d=n(2073),c=n(81),l=n(1121),r=n(153),v=n(2),f=n(3),m=n(38),Z=n(1098),g=function(e){var t=e.maxId,n=e.onLoadMore;return(0,i.Z)(l.Z,{onClick:function(){n(t)}})};t.default=function(){var e=(0,f.TL)(),t=(0,u.UO)().username,n=(0,f.hz)(),p=(0,f.CG)((function(e){var i,a,o=e.me,u=((null===(i=e.accounts.get(-1))||void 0===i?void 0:i.username)||"").toLowerCase()===t.toLowerCase(),s=-1,d=t;if(u)s=null;else{var c=(0,m.XO)(e,t);s=c?c.id||null:-1,d=(null==c?void 0:c.acct)||""}var l=(null===(a=e.relationships.get(String(s)))||void 0===a?void 0:a.blocked_by)||!1;return{accountId:s,unavailable:o!==s&&l&&!n.blockersVisible,accountUsername:d}})),h=p.accountId,b=p.unavailable,I=p.accountUsername,C=(0,f.CG)((function(e){return!!e.accounts.get(h)})),M=(0,f.CG)((function(e){return(0,m.Uq)(e,h)})),_=(0,f.CG)((function(e){var t;return null===(t=e.timelines.get("account:".concat(h,":media")))||void 0===t?void 0:t.isLoading})),x=(0,f.CG)((function(e){var t;return null===(t=e.timelines.get("account:".concat(h,":media")))||void 0===t?void 0:t.hasMore})),y=(0,a.useRef)(null),L=function(t){h&&-1!==h&&e((0,c.fe)(h,{maxId:t}))},k=function(t){if("video"===t.type)e((0,d.h7)("VIDEO",{media:t,status:t.status,account:t.account}));else{var n=t.status.media_attachments,i=n.findIndex((function(e){return e.id===t.id}));e((0,d.h7)("MEDIA",{media:n,index:i,status:t.status}))}};if((0,a.useEffect)((function(){h&&-1!==h?(e((0,s.$Gz)(h)),e((0,c.fe)(h))):e((0,s.ULQ)(t))}),[h]),!C&&-1!==h)return(0,i.Z)(r.Z,{});if(-1===h||!M&&_)return(0,i.Z)(v.sg,{},void 0,(0,i.Z)(v.$j,{}));var E=null;return!x||_&&0===M.size||(E=(0,i.Z)(l.Z,{visible:!_,onClick:function(e){e.preventDefault(),x&&L(M.size>0?M.last().status.id:void 0)}})),b?(0,i.Z)(v.sg,{},void 0,(0,i.Z)("div",{className:"empty-column-indicator"},void 0,(0,i.Z)(o.Z,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"}))):(0,i.Z)(v.sg,{label:"@".concat(I),transparent:!0,withHeader:!1},void 0,a.createElement("div",{role:"feed",className:"grid grid-cols-2 gap-2 sm:grid-cols-3",ref:y},M.map((function(e,t){var n,a;return null===e?(0,i.Z)(g,{maxId:t>0&&(null===(a=M.get(t-1))||void 0===a?void 0:a.id)||null,onLoadMore:L},"more:"+(null===(n=M.get(t+1))||void 0===n?void 0:n.id)):(0,i.Z)(Z.Z,{attachment:e,onOpenMedia:k},"".concat(e.status.id,"+").concat(e.id))})),!_&&0===M.size&&(0,i.Z)("div",{className:"empty-column-indicator"},void 0,(0,i.Z)(o.Z,{id:"account_gallery.none",defaultMessage:"No media to show."})),E),_&&0===M.size&&(0,i.Z)("div",{className:"slist__append"},void 0,(0,i.Z)(v.$j,{})))}},1477:function(e,t,n){n.r(t);var i=n(2057),a=n(2047),o=(n(90),n(9),n(0),n(15),n(5),n(7),n(1103)),u=n(1),s=n(2077),d=n(2073),c=n(81),l=n(2),r=n(3),v=n(38),f=n(1098);t.default=function(e){var t,n=e.account,m=(0,r.TL)(),Z=(0,u.useState)(!0),g=(0,a.Z)(Z,2),p=g[0],h=g[1],b=(0,r.CG)((function(e){return n?(0,v.Uq)(e,null==n?void 0:n.id):(0,o.List)()})),I=function(e){if("video"===e.type)m((0,d.h7)("VIDEO",{media:e,status:e.status}));else{var t=e.getIn(["status","media_attachments"]),n=t.findIndex((function(t){return t.id===e.id}));m((0,d.h7)("MEDIA",{media:t,index:n,status:e.status}))}};return(0,u.useEffect)((function(){h(!0),n&&m((0,c.fe)(n.id)).then((function(){return h(!1)})).catch((function(){}))}),[null==n?void 0:n.id]),(0,i.Z)(l.$L,{title:(0,i.Z)(s.Z,{id:"media_panel.title",defaultMessage:"Media"})},void 0,n&&(0,i.Z)("div",{className:"w-full"},void 0,p?(0,i.Z)(l.$j,{}):(t=b.filter((function(e){return"public"===e.getIn(["status","visibility"])})).slice(0,9)).isEmpty()?(0,i.Z)(l.xv,{size:"sm",theme:"muted"},void 0,(0,i.Z)(s.Z,{id:"media_panel.empty_message",defaultMessage:"No media found."})):(0,i.Z)("div",{className:"grid grid-cols-3 gap-1"},void 0,t.map((function(e,t){return(0,i.Z)(f.Z,{attachment:e,onOpenMedia:I},"".concat(e.getIn(["status","id"]),"+").concat(e.id))})))))}}}]);
//# sourceMappingURL=account_gallery-0f3901d6ac362bf84142.chunk.js.map