{"version":3,"file":"packs/js/features/import_data-9ddf4b5d983d74d3a305.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/actions/import-data.ts","webpack://soapbox/./app/soapbox/features/import-data/components/csv-importer.tsx","webpack://soapbox/./app/soapbox/features/import-data/index.tsx"],"sourcesContent":["import{defineMessages}from'react-intl';import toast from'soapbox/toast';import api from'../api';export var IMPORT_FOLLOWS_REQUEST='IMPORT_FOLLOWS_REQUEST';export var IMPORT_FOLLOWS_SUCCESS='IMPORT_FOLLOWS_SUCCESS';export var IMPORT_FOLLOWS_FAIL='IMPORT_FOLLOWS_FAIL';export var IMPORT_BLOCKS_REQUEST='IMPORT_BLOCKS_REQUEST';export var IMPORT_BLOCKS_SUCCESS='IMPORT_BLOCKS_SUCCESS';export var IMPORT_BLOCKS_FAIL='IMPORT_BLOCKS_FAIL';export var IMPORT_MUTES_REQUEST='IMPORT_MUTES_REQUEST';export var IMPORT_MUTES_SUCCESS='IMPORT_MUTES_SUCCESS';export var IMPORT_MUTES_FAIL='IMPORT_MUTES_FAIL';var messages=defineMessages({blocksSuccess:{\"id\":\"import_data.success.blocks\",\"defaultMessage\":\"Blocks imported successfully\"},followersSuccess:{\"id\":\"import_data.success.followers\",\"defaultMessage\":\"Followers imported successfully\"},mutesSuccess:{\"id\":\"import_data.success.mutes\",\"defaultMessage\":\"Mutes imported successfully\"}});export var importFollows=function importFollows(params){return function(dispatch,getState){dispatch({type:IMPORT_FOLLOWS_REQUEST});return api(getState).post('/api/pleroma/follow_import',params).then(function(response){toast.success(messages.followersSuccess);dispatch({type:IMPORT_FOLLOWS_SUCCESS,config:response.data});}).catch(function(error){dispatch({type:IMPORT_FOLLOWS_FAIL,error:error});});};};export var importBlocks=function importBlocks(params){return function(dispatch,getState){dispatch({type:IMPORT_BLOCKS_REQUEST});return api(getState).post('/api/pleroma/blocks_import',params).then(function(response){toast.success(messages.blocksSuccess);dispatch({type:IMPORT_BLOCKS_SUCCESS,config:response.data});}).catch(function(error){dispatch({type:IMPORT_BLOCKS_FAIL,error:error});});};};export var importMutes=function importMutes(params){return function(dispatch,getState){dispatch({type:IMPORT_MUTES_REQUEST});return api(getState).post('/api/pleroma/mutes_import',params).then(function(response){toast.success(messages.mutesSuccess);dispatch({type:IMPORT_MUTES_SUCCESS,config:response.data});}).catch(function(error){dispatch({type:IMPORT_MUTES_FAIL,error:error});});};};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useIntl}from'react-intl';import{Button,FileInput,Form,FormActions,FormGroup,Text}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';var CSVImporter=function CSVImporter(_ref){var messages=_ref.messages,action=_ref.action;var dispatch=useAppDispatch();var intl=useIntl();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var handleSubmit=function handleSubmit(event){var params=new FormData();params.append('list',file);setIsLoading(true);dispatch(action(params)).then(function(){setIsLoading(false);}).catch(function(){setIsLoading(false);});event.preventDefault();};var handleFileChange=function handleFileChange(e){var _e$target$files;var file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files.item(0);setFile(file);};return/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(Text,{size:\"xl\",weight:\"bold\",tag:\"label\"},void 0,intl.formatMessage(messages.input_label)),/*#__PURE__*/_jsx(FormGroup,{hintText:/*#__PURE__*/_jsx(Text,{theme:\"muted\"},void 0,intl.formatMessage(messages.input_hint))},void 0,/*#__PURE__*/_jsx(FileInput,{accept:\".csv,text/csv\",onChange:handleFileChange,required:true})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\",disabled:isLoading},void 0,intl.formatMessage(messages.submit))));};export default CSVImporter;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{importFollows,importBlocks,importMutes}from'soapbox/actions/import-data';import{Column}from'soapbox/components/ui';import CSVImporter from'./components/csv-importer';var messages=defineMessages({heading:{\"id\":\"column.import_data\",\"defaultMessage\":\"Import data\"},submit:{\"id\":\"import_data.actions.import\",\"defaultMessage\":\"Import\"}});var followMessages=defineMessages({input_label:{\"id\":\"import_data.follows_label\",\"defaultMessage\":\"Follows\"},input_hint:{\"id\":\"import_data.hints.follows\",\"defaultMessage\":\"CSV file containing a list of followed accounts\"},submit:{\"id\":\"import_data.actions.import_follows\",\"defaultMessage\":\"Import follows\"}});var blockMessages=defineMessages({input_label:{\"id\":\"import_data.blocks_label\",\"defaultMessage\":\"Blocks\"},input_hint:{\"id\":\"import_data.hints.blocks\",\"defaultMessage\":\"CSV file containing a list of blocked accounts\"},submit:{\"id\":\"import_data.actions.import_blocks\",\"defaultMessage\":\"Import blocks\"}});var muteMessages=defineMessages({input_label:{\"id\":\"import_data.mutes_label\",\"defaultMessage\":\"Mutes\"},input_hint:{\"id\":\"import_data.hints.mutes\",\"defaultMessage\":\"CSV file containing a list of muted accounts\"},submit:{\"id\":\"import_data.actions.import_mutes\",\"defaultMessage\":\"Import mutes\"}});var ImportData=function ImportData(){var intl=useIntl();return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CSVImporter,{action:importFollows,messages:followMessages}),/*#__PURE__*/_jsx(CSVImporter,{action:importBlocks,messages:blockMessages}),/*#__PURE__*/_jsx(CSVImporter,{action:importMutes,messages:muteMessages}));};export default ImportData;"],"names":["messages","blocksSuccess","followersSuccess","mutesSuccess","importFollows","params","dispatch","getState","type","api","post","then","response","toast","config","data","catch","error","importBlocks","importMutes","_ref","action","intl","useIntl","_useState","useState","_useState2","isLoading","setIsLoading","_useState3","_useState4","file","setFile","onSubmit","event","FormData","append","preventDefault","size","weight","tag","formatMessage","input_label","hintText","theme","input_hint","accept","onChange","e","_e$target$files","target","files","item","required","disabled","submit","heading","followMessages","blockMessages","muteMessages","label"],"sourceRoot":""}