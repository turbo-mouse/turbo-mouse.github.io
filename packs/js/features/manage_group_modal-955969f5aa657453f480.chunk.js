"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[60],{1426:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});var r,n=t(2063),i=t(2053),o=t(1),s=t(2064),l=t(2065),u=t(2083),c=t(143),d=t(2),p=t(3),g=(t(0),t(25),t(10),t(79),t(14),t(17),t(16),t(91),t(66),t(661)),f=t(53),m=t(131),v=t(289),Z=(0,s.vU)({groupNamePlaceholder:{id:"manage_group.fields.name_placeholder",defaultMessage:"Group Name"},groupDescriptionPlaceholder:{id:"manage_group.fields.description_placeholder",defaultMessage:"Description"}}),h=function(e){var a=e.src,r=e.onChange,i=e.accept,o=e.disabled;return(0,n.Z)("label",{className:"dark:sm:shadow-inset relative h-24 w-full cursor-pointer overflow-hidden rounded-lg bg-primary-100 text-primary-500 dark:bg-gray-800 dark:text-accent-blue sm:h-36 sm:shadow"},void 0,a&&(0,n.Z)("img",{className:"h-full w-full object-cover",src:a,alt:""}),(0,n.Z)(d.Ug,{className:(0,g.default)("absolute top-0 h-full w-full transition-opacity",{"opacity-0 hover:opacity-90 bg-primary-100 dark:bg-gray-800":a}),space:3,alignItems:"center",justifyContent:"center"},void 0,(0,n.Z)(f.Z,{src:t(1028),className:"h-7 w-7"}),(0,n.Z)(d.xv,{size:"sm",theme:"primary",weight:"semibold",transform:"uppercase"},void 0,(0,n.Z)(u.Z,{id:"compose_event.upload_banner",defaultMessage:"Upload photo"})),(0,n.Z)("input",{name:"header",type:"file",accept:i,onChange:r,disabled:o,className:"hidden"})))},b=function(e){var a=e.src,r=e.onChange,i=e.accept,o=e.disabled;return(0,n.Z)("label",{className:"absolute left-1/2 bottom-0 h-[72px] w-[72px] -translate-x-1/2 translate-y-1/2 cursor-pointer rounded-full bg-primary-500 ring-2 ring-white dark:ring-primary-900"},void 0,a&&(0,n.Z)(d.qE,{src:a,size:72}),(0,n.Z)(d.Ug,{alignItems:"center",justifyContent:"center",className:(0,g.default)("absolute left-0 top-0 h-full w-full rounded-full transition-opacity",{"opacity-0 hover:opacity-90 bg-primary-500":a})},void 0,(0,n.Z)(f.Z,{src:t(2038),className:"h-7 w-7 text-white"})),(0,n.Z)("span",{className:"sr-only"},void 0,"Upload avatar"),(0,n.Z)("input",{name:"avatar",type:"file",accept:i,onChange:r,disabled:o,className:"hidden"}))},_=t(98),y=(0,s.vU)({next:{id:"manage_group.next",defaultMessage:"Next"},create:{id:"manage_group.create",defaultMessage:"Create"},update:{id:"manage_group.update",defaultMessage:"Update"}});!function(e){e.ONE="ONE",e.TWO="TWO"}(r||(r={}));var x={ONE:function(){var e=(0,p.TL)(),a=(0,p.CG)((function(e){return e.group_editor.locked})),t=function(a){e((0,c.hB)(a))};return o.createElement(o.Fragment,null,(0,n.Z)(d.Kq,{className:"mx-auto max-w-sm",space:2},void 0,(0,n.Z)(d.xv,{size:"3xl",weight:"bold",align:"center"},void 0,(0,n.Z)(u.Z,{id:"manage_group.get_started",defaultMessage:"Let's get started!"})),(0,n.Z)(d.xv,{size:"lg",theme:"muted",align:"center"},void 0,(0,n.Z)(u.Z,{id:"manage_group.tagline",defaultMessage:"Groups connect you with others based on shared interests."}))),(0,n.Z)(d.l0,{},void 0,(0,n.Z)(d.cw,{labelText:(0,n.Z)(u.Z,{id:"manage_group.privacy.label",defaultMessage:"Privacy settings"})},void 0,(0,n.Z)(_.Z,{},void 0,(0,n.Z)(_.H,{label:(0,n.Z)(u.Z,{id:"manage_group.privacy.public.label",defaultMessage:"Public"}),hint:(0,n.Z)(u.Z,{id:"manage_group.privacy.public.hint",defaultMessage:"Discoverable. Anyone can join."}),onSelect:function(){return t(!1)},isSelected:!a}),(0,n.Z)(_.H,{label:(0,n.Z)(u.Z,{id:"manage_group.privacy.private.label",defaultMessage:"Private (Owner approval required)"}),hint:(0,n.Z)(u.Z,{id:"manage_group.privacy.private.hint",defaultMessage:"Discoverable. Users can join after their request is approved."}),onSelect:function(){return t(!0)},isSelected:a}))),(0,n.Z)(d.xv,{size:"sm",theme:"muted",align:"center"},void 0,(0,n.Z)(u.Z,{id:"manage_group.privacy.hint",defaultMessage:"These settings cannot be changed later."}))))},TWO:function(){var e,a=(0,l.Z)(),t=(0,p.TL)(),r=(0,p.CG)((function(e){return e.group_editor.groupId})),s=(0,p.CG)((function(e){return e.group_editor.isUploading})),g=(0,p.CG)((function(e){return e.group_editor.displayName})),f=(0,p.CG)((function(e){return e.group_editor.note})),_=(0,o.useState)(null),y=(0,i.Z)(_,2),x=y[0],C=y[1],M=(0,o.useState)(null),N=(0,i.Z)(M,2),w=N[0],O=N[1],G=null===(e=(0,p.CG)((function(e){return e.instance.configuration.getIn(["media_attachments","supported_mime_types"])})))||void 0===e?void 0:e.filter((function(e){return e.startsWith("image/")})).toArray().join(","),T=function(e){var a,r=null===(a=e.target.files)||void 0===a?void 0:a.item(0);r&&("avatar"===e.target.name?(0,v.Z)(r,16e4).then((function(e){t((0,c.X_)("avatar",e)),C(URL.createObjectURL(e))})).catch(console.error):(0,v.Z)(r,2073600).then((function(e){t((0,c.X_)("header",e)),O(URL.createObjectURL(e))})).catch(console.error))};return(0,o.useEffect)((function(){r&&t((function(e,a){var t=a().groups.items.get(r);t&&(t.avatar&&!(0,m.z_)(t.avatar)&&C(t.avatar),t.header&&!(0,m.NF)(t.header)&&O(t.header))}))}),[r]),(0,n.Z)(d.l0,{},void 0,(0,n.Z)("div",{className:"relative mb-12 flex"},void 0,(0,n.Z)(h,{src:w,accept:G,onChange:T,disabled:s}),(0,n.Z)(b,{src:x,accept:G,onChange:T,disabled:s})),(0,n.Z)(d.cw,{labelText:(0,n.Z)(u.Z,{id:"manage_group.fields.name_label",defaultMessage:"Group name (required)"})},void 0,(0,n.Z)(d.II,{type:"text",placeholder:a.formatMessage(Z.groupNamePlaceholder),value:g,onChange:function(e){var a=e.target;t((0,c.pz)(a.value))}})),(0,n.Z)(d.cw,{labelText:(0,n.Z)(u.Z,{id:"manage_group.fields.description_label",defaultMessage:"Description"})},void 0,(0,n.Z)(d.gx,{autoComplete:"off",placeholder:a.formatMessage(Z.groupDescriptionPlaceholder),value:f,onChange:function(e){var a=e.target;t((0,c.eq)(a.value))}})))}},C=function(e){var a=e.onClose,t=(0,l.Z)(),s=(0,p.TL)(),g=(0,p.CG)((function(e){return e.group_editor.groupId})),f=(0,p.CG)((function(e){return e.group_editor.isSubmitting})),m=(0,o.useState)(g?r.TWO:r.ONE),v=(0,i.Z)(m,2),Z=v[0],h=v[1],b=(0,o.useMemo)((function(){return Z===r.TWO?t.formatMessage(g?y.update:y.create):t.formatMessage(y.next)}),[Z]),_=x[Z];return(0,n.Z)(d.u_,{title:g?(0,n.Z)(u.Z,{id:"navigation_bar.edit_group",defaultMessage:"Edit Group"}):(0,n.Z)(u.Z,{id:"navigation_bar.create_group",defaultMessage:"Create Group"}),confirmationAction:function(){switch(Z){case r.ONE:h(r.TWO);break;case r.TWO:s((0,c.vy)(!0)),a()}},confirmationText:b,confirmationDisabled:f,confirmationFullWidth:!0,onClose:function(){a("MANAGE_GROUP")}},void 0,(0,n.Z)(d.Kq,{space:2},void 0,(0,n.Z)(_,{})))}},2038:function(e,a,t){e.exports=t.p+"packs/icons/camera-plus-ca41696e.svg"}}]);
//# sourceMappingURL=manage_group_modal-955969f5aa657453f480.chunk.js.map